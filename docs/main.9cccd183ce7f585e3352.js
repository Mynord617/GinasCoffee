(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("uXP2"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function u(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(u((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new c(t,n)))}class c{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,e,n),s=this.destination;s.add(i);const a=Object(r.a)(this,t,void 0,void 0,i);a!==i&&s.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("uXP2"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),p=new s.b("@firebase/database"),d=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=s.a.VERBOSE,v=p.log.bind(p),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));p.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw p.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));p.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===S||e===I)return-1;if(e===S||t===I)return 1;var n=K(t),r=K(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},k=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P,D,L,F,U,M,H,q,V,G,z=function(t){var e,n,r,i,s;Object(o.e)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},B=new RegExp("^-?(0*)\\d{1,10}$"),K=function(t){if(B.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},W=function(t){try{t()}catch(e){setTimeout((function(){throw C("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},Q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},$=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Y=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),J=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.e)("string"==typeof t,"typeof type must == string"),Object(o.e)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),Z=function(t,e){var n=tt(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new X(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new $(n.pathString)}},tt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},et=/[\[\].#$\/\u0000-\u001F\u007F]/,nt=/[\[\].#$\u0000-\u001F\u007F]/,rt=function(t){return"string"==typeof t&&0!==t.length&&!et.test(t)},it=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},st=function(t,e,n,r,i){i&&void 0===n||at(Object(o.m)(t,e,i),n,r)},at=function(t,e,n){var r=n instanceof $?new Y(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Object(o.E)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!rt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),at(t,n,r),r.pop()})),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ut=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,(function(t,e){var n=new $(t);if(at(s,e,r.child(n)),".priority"===n.getBack()&&!ot(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!rt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ct=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ot(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ht=function(t,e,n,r){if(!(r&&void 0===n||rt(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ft=function(t,e,n,r){if(!(r&&void 0===n||it(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ft(t,e,n,r)},dt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},gt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!rt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),it(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},vt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),dt("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),dt("OnDisconnect.set",this.path_),st("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),dt("OnDisconnect.setWithPriority",this.path_),st("OnDisconnect.setWithPriority",1,t,this.path_,!1),ct("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),dt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ut("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),mt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),bt=(P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D=0,L=[],function(t){var e,n=t===D;D=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=P.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=P.charAt(L[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),_t=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),wt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new _t(S,t),r=new _t(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return _t.MIN},t}(),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return _t.MIN},e.prototype.maxPost=function(){return new _t(I,F)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new _t(t,F)},e.prototype.toString=function(){return".key"},e}(wt),Ot=new Et,Ct=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===U||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===U||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},St=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Tt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ct(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),It=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return _t.MIN},e.prototype.maxPost=function(){return new _t(I,new St("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=H(t);return new _t(e,new St("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(wt)),xt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),jt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:At.EMPTY_NODE,this.right=null!=o?o:At.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return At.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return At.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),kt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new jt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),At=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new xt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new xt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new kt,t}(),Nt=Math.log(2),Rt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Nt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Pt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new jt(s,o.node,jt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new jt(s,o.node,jt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new jt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,jt.BLACK):(a(h,jt.BLACK),a(h,jt.RED))}return o}(new Rt(t.length));return new At(r||e,o)},Dt={},Lt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)(Dt&&It,"ChildrenNode.ts has not been loaded"),V=V||new t({".priority":Dt},{".priority":It})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof At?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==Ot,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(_t.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Pt(s,e.getCompare()):Dt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,(function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===Dt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(_t.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Pt(a,s.getCompare())}return Dt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new _t(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,(function(t){if(t===Dt)return t;var r=n.get(e.name);return r?t.remove(new _t(e.name,r)):t})),this.indexSet_)},t}();function Ft(t,e){return x(t.name,e.name)}function Ut(t,e){return x(t,e)}var Mt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return G||(G=new t(new At(Ut),null,Lt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||G},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?G:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new _t(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?G:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(It,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ct(this.getPriority().val())+":"),this.forEachChild(It,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new _t(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new _t(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new _t(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,_t.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,_t.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ht?-1:0},t.prototype.withIndex=function(e){if(e===Ot||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ot||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(It),r=e.getIterator(It),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ot?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ht=new(function(t){function e(){return t.call(this,new At(Ut),Mt.EMPTY_NODE,Lt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Mt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Mt));function qt(t,e){if(void 0===e&&(e=null),null===t)return Mt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new St(t,qt(e));if(t instanceof Array){var n=Mt.EMPTY_NODE;return R(t,(function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=qt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(qt(e))}var r=[],i=!1;if(R(t,(function(t,e){if("."!==t.substring(0,1)){var n=qt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new _t(t,n)))}})),0===r.length)return Mt.EMPTY_NODE;var s=Pt(r,Ft,(function(t){return t.name}),Ut);if(i){var a=Pt(r,It.getCompare());return new Mt(s,qt(e),new Lt({".priority":a},{".priority":It}))}return new Mt(s,qt(e),Lt.Default)}Object.defineProperties(_t,{MIN:{value:new _t(S,Mt.EMPTY_NODE)},MAX:{value:new _t(I,Ht)}}),Et.__EMPTY_NODE=Mt.EMPTY_NODE,St.__childrenNodeConstructor=Mt,U=Ht,function(t){q=t}(Ht),function(t){H=t}(qt);var Vt,Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return _t.MIN},e.prototype.maxPost=function(){return _t.MAX},e.prototype.makePost=function(t,e){var n=qt(t);return new _t(e,n)},e.prototype.toString=function(){return".value"},e}(wt)),zt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=qt(t),r=Mt.EMPTY_NODE.updateChild(this.indexPath_,n);return new _t(e,r)},e.prototype.maxPost=function(){var t=Mt.EMPTY_NODE.updateChild(this.indexPath_,Ht);return new _t(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(wt),Bt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),ft("DataSnapshot.child",1,e,!1);var n=new $(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,It)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),ft("DataSnapshot.hasChild",1,t,!1);var e=new $(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),It))}))},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Kt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Wt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Qt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Kt("value",this,new Bt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Wt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),$t=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Wt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Kt(t.type,this,new Bt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Yt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(Vt,"Reference.ts has not been loaded"),Vt},set:function(t){Vt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ot){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===It){if(null!=e&&!ot(e)||null!=n&&!ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof zt||t.getIndex()===Gt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),lt("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Qt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new $t(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),lt("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Qt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new $t(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),lt("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ft("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new zt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ot);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(It);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),st("Query.startAt",1,e,this.path,!0),ht("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),st("Query.endAt",1,e,this.path,!0),ht("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),st("Query.equalTo",1,t,this.path,!1),ht("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Jt=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Xt=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Zt=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?te(t[".sv"],e,n):"object"==typeof t[".sv"]?ee(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},te=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},ee=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},ne=function(t,e,n,r){return ie(e,new Xt(n,t),r)},re=function(t,e,n){return ie(t,new Jt(e),n)};function ie(t,e,n){var r,i=t.getPriority().val(),o=Zt(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Zt(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new St(a,qt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new St(o))),u.forEachChild(It,(function(t,i){var o=ie(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var oe,se,ae=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(It,(function(t,e){n.remember(new $(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new $(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),ue=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ce=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.e)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ue.ACK_USER_WRITE,this.source=ce.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $(e));return new t($.Empty,n,this.revert)}return Object(o.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),he=function(){function t(t,e){void 0===e&&(oe||(oe=new At(j)),e=oe),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return R(e,(function(t,e){n=n.set(new $(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:$.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new $(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_($.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,$.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,$.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_($.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),fe=function(){function t(t,e){this.source=t,this.path=e,this.type=ue.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty):new t(this.source,this.path.popFront())},t}(),pe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ue.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),de=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ue.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new pe(this.source,$.Empty,n.value):new t(this.source,$.Empty,n)}return Object(o.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ge=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ye=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ge(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ge(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ge(Mt.EMPTY_NODE,!1,!1),new ge(Mt.EMPTY_NODE,!1,!1)),t}(),ve=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),me=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ve.childRemovedChange(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ve.childAddedChange(e,n)):s.trackChildChange(ve.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(It,(function(t,r){e.hasChild(t)||n.trackChildChange(ve.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(It,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve.childChangedChange(e,r,i))}else n.trackChildChange(ve.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Mt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)(e===ve.CHILD_ADDED||e===ve.CHILD_CHANGED||e===ve.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===ve.CHILD_ADDED&&i===ve.CHILD_REMOVED)this.changeMap.set(n,ve.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===ve.CHILD_REMOVED&&i===ve.CHILD_ADDED)this.changeMap.delete(n);else if(e===ve.CHILD_REMOVED&&i===ve.CHILD_CHANGED)this.changeMap.set(n,ve.childRemovedChange(n,r.oldSnap));else if(e===ve.CHILD_CHANGED&&i===ve.CHILD_ADDED)this.changeMap.set(n,ve.childAddedChange(n,t.snapshotNode));else{if(e!==ve.CHILD_CHANGED||i!==ve.CHILD_CHANGED)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),_e=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),we=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ee=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Oe=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new be;if(n.type===ue.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===ue.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===ue.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ue.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Ee(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ve.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Mt?c:Mt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.e)(1===e.getLength(),"Can't have a priority with additional path components");var p=s.getNode();u=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,u);a=null!=d?this.filter_.updatePriority(p,d):s.getNode()}else{var g=e.popFront(),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=v?s.getNode().getImmediateChild(f).updateChild(g,v):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,_e,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new we(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new we(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Mt.EMPTY_NODE}if(f.equals(p))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:he.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new $(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new $(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=he.Empty;return a.getNode().forEachChild(Ot,(function(t,e){u=u.set(new $(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=he.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,_e,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new we(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.e)(h instanceof Mt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Mt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite($.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Ce=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===ve.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(ve.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,ve.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,ve.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,ve.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,ve.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,ve.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.f)("Should only compare child_ events.");var n=new _t(t.childName,t.snapshotNode),r=new _t(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Te=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new me(n.getIndex()),i=n.getNodeFilter();this.processor_=new Oe(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Mt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Mt.EMPTY_NODE,s.getNode(),null),c=new ge(a,o.isFullyInitialized(),r.filtersNodes()),l=new ge(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ye(l,c),this.eventGenerator_=new Ce(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ue.MERGE&&null!==t.source.queryId&&(Object(o.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(It,(function(t,e){n.push(ve.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(ve.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Se=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(se,"Reference.ts has not been loaded"),se},set:function(t){Object(o.e)(!se,"__referenceConstructor has already been defined"),se=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Mt?(a=n.calcCompleteEventChildren(r),u=!1):(a=Mt.EMPTY_NODE,u=!1);var c=new ye(new ge(a,u,!1),new ge(r,i,!1));s=new Te(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var p,d=Object(i.e)(f.value,2),g=d[0];c=c.concat((p=d[1]).removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(g),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(p=this.views.get(a))&&(c=c.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ie=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new he(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new he(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return R(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,he.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild($.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(It,(function(e,n){t.push(new _t(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new _t(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new he(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.e)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(e.child(n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}($.Empty,this.writeTree_,t)},t.Empty=new t(new he(null)),t}(),xe=function(){function t(){this.visibleWrites_=Ie.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new je(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):R(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite($.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Mt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite($.Empty)?a.apply(n||Mt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Mt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(It,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(It,(function(t,e){var r=i.childCompoundWrite(new $(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode($.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ie.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=$.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=$.relativePath(a,n),r=r.addWrite($.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(n.contains(a))u=$.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=$.relativePath(a,n)).isEmpty())r=r.addWrites($.Empty,s.children);else{var c=Object(o.D)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite($.Empty,l)}}}}}return r},t}(),je=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),ke=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=he.Empty,this.pendingWriteTree_=new xe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new pe(ce.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=he.fromObject(e);return this.applyOperationToSyncPoints_(new de(ce.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=he.Empty;return null!=n.snap?r=r.set($.Empty,!0):R(n.children,(function(t,e){r=r.set(new $(t),e)})),this.applyOperationToSyncPoints_(new le(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new pe(ce.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=he.fromObject(e);return this.applyOperationToSyncPoints_(new de(ce.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new fe(ce.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=new pe(ce.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=he.fromObject(n),l=new de(ce.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=$.relativePath(o,e),u=new fe(ce.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=$.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache($.Empty)):(u=new Se,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Mt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache($.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var g=p[d],y=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=$.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),R(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Mt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get($.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache($.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get($.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache($.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Ae=function(){function t(){this.rootNode_=Mt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ne=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),Re=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ne),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Pe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),De=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pe(t);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,(function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Fe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Fe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&_("event: "+e.toString()),W(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Ue=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Me=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ue),He=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ue),qe=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&W((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ve=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Re.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new qe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ge((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=s,n.password=a;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&J.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ge=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=d(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),ze="";function Be(t){ze=t}var Ke=null;"undefined"!=typeof MozWebSocket?Ke=MozWebSocket:"undefined"!=typeof WebSocket&&(Ke=WebSocket);var We=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Re.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&J.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+ze+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Ke(this.connURL,[],r)}else this.mySock=new Ke(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ke&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Qe=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ve,We]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=We&&We.isAvailable(),s=o&&!We.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[We];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),$e=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Qe(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=k("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Q((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ye=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Je=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Me.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&He.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new $e(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return A(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new $(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+ze.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=He.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ye),Xe=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(Ye),Ze=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Le,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ae,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Re.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Xe(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Je(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Re.getOrCreateReporter(this.repoInfo_,(function(){return new De(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Ae,this.infoSyncTree_=new ke({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ke({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new $(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.B)(e,(function(t){return qt(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=qt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.B)(e,(function(t){return qt(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=qt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new $("/.info/"+t),r=qt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=qt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Bt(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Object(o.G)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Bt(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=qt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=re(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,(function(e,n){i=!1,s[e]=ne(t.child(e),qt(n),r.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),R(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ae;this.onDisconnect_.forEachTree($.Empty,(function(r,i){var o=ne(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree($.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new ae,this.eventQueue_.raiseEventsForChangedPath($.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=qt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=qt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.s)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&R(e,(function(e,n){var i=qt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Pe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);R(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&W((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new fn(this))},enumerable:!1,configurable:!0}),t}(),tn=function(){function t(e){this.indexedFilter_=new me(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new _t(e,n))||(n=Mt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Mt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Mt.EMPTY_NODE);var i=this;return e.forEachChild(It,(function(t,e){i.matches(new _t(t,e))||(r=r.updateImmediateChild(t,Mt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),en=function(){function t(t){this.rangedFilter_=new tn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new _t(e,n))||(n=Mt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Mt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Mt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Mt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Mt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new _t(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(ve.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ve.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Mt.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(ve.childAddedChange(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ve.childRemovedChange(l.name,l.node)),i.trackChildChange(ve.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Mt.EMPTY_NODE)):t},t}(),nn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==It&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===It},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new me(this.getIndex()):this.hasLimit()?new en(this):new tn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===It?e=n.PRIORITY_INDEX:this.index_===Gt?e=n.VALUE_INDEX:this.index_===Ot?e=n.KEY_INDEX:(Object(o.e)(this.index_ instanceof zt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.G)(e),this.startSet_&&(r[n.START_AT]=Object(o.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),rn=function(t){function e(e,n){if(!(e instanceof Ze))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,nn.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof $||(null===this.path.getFront()?pt("Reference.child",1,t,!1):ft("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),dt("Reference.set",this.path),st("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),dt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ut("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),dt("Reference.setWithPriority",this.path),st("Reference.setWithPriority",1,t,this.path,!1),ct("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),dt("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),dt("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),yt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new mt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),dt("Reference.setPriority",this.path),ct("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),dt("Reference.push",this.path),st("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=bt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return dt("Reference.onDisconnect",this.path),new vt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Yt);Yt.__referenceConstructor=rn,Se.__referenceConstructor=rn;var on=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),sn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new on),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof $?e:new $(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.D)(r.node_.children,i)||new on),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new $(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),an=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});Ze.MAX_TRANSACTION_RETRIES_=25,Ze.prototype.transactionsInit_=function(){this.transactionQueueTree_=new sn},Ze.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new rn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:d(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Bt(a.currentInputSnapshot,new rn(this,a.path),It);a.onComplete(null,!1,l)}}else{at("transaction failed: Data returned ",c,a.path),a.status=an.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&Object(o.i)(c,".priority")?(p=Object(o.D)(c,".priority"),Object(o.e)(ot(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Mt.EMPTY_NODE).getPriority().val(),p=p;var g=this.generateServerValues(),y=qt(c,p),v=re(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},Ze.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Mt.EMPTY_NODE},Ze.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===an.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Ze.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.e)(c.status===an.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=an.SENT,c.retryCount++;var l=$.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=an.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new rn(n,e[s].path),c=new Bt(a,u,It);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)W(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===an.SENT_NEEDS_ABORT?an.NEEDS_ABORT:an.RUN;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=an.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},Ze.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Ze.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===an.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=$.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===an.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===an.RUN)if(a.retryCount>=Ze.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){at("transaction failed: Data returned ",f,a.path);var p=qt(f);"object"==typeof f&&null!=f&&Object(o.i)(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=a.currentWriteId,g=this.generateServerValues(),y=re(p,h,g);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=an.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new rn(this,t[s].path),m=new Bt(t[s].currentInputSnapshot,v,It);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)W(n[s]);this.sendReadyTransactions_()}},Ze.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Ze.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Ze.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Ze.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==an.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Ze.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Ze.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===an.SENT_NEEDS_ABORT||(e[s].status===an.SENT?(Object(o.e)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=an.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.e)(e[s].status===an.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)W(n[s])}};var un,cn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),ln=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),hn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return un||(un=new t),un},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new X(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new ln)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Z(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=Z(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new ln:new cn(t,e);return gt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||O("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.D)(this.repos_,t.app.name);e&&Object(o.D)(e,t.key)===t||O("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Ze(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),fn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.checkDeleted_("delete"),hn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Ze||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new rn(this.repo_,$.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):hn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof rn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=Z(t,this.repo_.repoInfo_.nodeAdmin);gt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),pn=Object.freeze({__proto__:null,forceLongPolling:function(){We.forceDisallow(),Ve.forceAllow()},forceWebSockets:function(){Ve.forceDisallow()},isWebSocketsAvailable:function(){return We.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Be(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:hn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),dn=Je;Je.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Je.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var gn=Object.freeze({__proto__:null,DataConnection:dn,RealTimeConnection:$e,hijackHash:function(t){var e=Je.prototype.put;return Je.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Je.prototype.put=e}},ConnectionTarget:X,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){hn.getInstance().forceRestClient(t)}}),yn=fn.ServerValue;!function(e){Be(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return hn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:rn,Query:Yt,Database:fn,DataSnapshot:Bt,enableLogging:b,INTERNAL:pn,ServerValue:yn,TEST_ACCESS:gn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.2"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.2.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function s(t,e,n,s,a=new r.a(t,n,s)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return Zi})),n.d(e,"b",(function(){return Xs})),n.d(e,"c",(function(){return Ws})),n.d(e,"d",(function(){return Bs})),n.d(e,"e",(function(){return Ks})),n.d(e,"f",(function(){return Va})),n.d(e,"g",(function(){return Na})),n.d(e,"h",(function(){return Li})),n.d(e,"i",(function(){return ca})),n.d(e,"j",(function(){return Ro})),n.d(e,"k",(function(){return ea})),n.d(e,"l",(function(){return Po})),n.d(e,"m",(function(){return hn})),n.d(e,"n",(function(){return js})),n.d(e,"o",(function(){return z})),n.d(e,"p",(function(){return l})),n.d(e,"q",(function(){return G})),n.d(e,"r",(function(){return Xi})),n.d(e,"s",(function(){return Zo})),n.d(e,"t",(function(){return ts})),n.d(e,"u",(function(){return ta})),n.d(e,"v",(function(){return it})),n.d(e,"w",(function(){return Pa})),n.d(e,"x",(function(){return rt})),n.d(e,"y",(function(){return Ia})),n.d(e,"z",(function(){return fa})),n.d(e,"A",(function(){return h})),n.d(e,"B",(function(){return Js})),n.d(e,"C",(function(){return Ys})),n.d(e,"D",(function(){return Uo})),n.d(e,"E",(function(){return Lo})),n.d(e,"F",(function(){return Fo})),n.d(e,"G",(function(){return Ho})),n.d(e,"H",(function(){return Zn})),n.d(e,"I",(function(){return p})),n.d(e,"J",(function(){return Fa})),n.d(e,"K",(function(){return is})),n.d(e,"L",(function(){return _a})),n.d(e,"M",(function(){return Ui})),n.d(e,"N",(function(){return Vo})),n.d(e,"O",(function(){return qo})),n.d(e,"P",(function(){return ss})),n.d(e,"Q",(function(){return ct})),n.d(e,"R",(function(){return xa})),n.d(e,"S",(function(){return jn})),n.d(e,"T",(function(){return xn})),n.d(e,"U",(function(){return Ha})),n.d(e,"V",(function(){return Oa})),n.d(e,"W",(function(){return Zs})),n.d(e,"X",(function(){return Mi})),n.d(e,"Y",(function(){return Es})),n.d(e,"Z",(function(){return Jn})),n.d(e,"ab",(function(){return Pn})),n.d(e,"bb",(function(){return bn})),n.d(e,"cb",(function(){return wn})),n.d(e,"db",(function(){return Tn})),n.d(e,"eb",(function(){return On})),n.d(e,"fb",(function(){return En})),n.d(e,"gb",(function(){return Cn})),n.d(e,"hb",(function(){return ms})),n.d(e,"ib",(function(){return Ma})),n.d(e,"jb",(function(){return bs})),n.d(e,"kb",(function(){return _s})),n.d(e,"lb",(function(){return _n})),n.d(e,"mb",(function(){return D})),n.d(e,"nb",(function(){return ro})),n.d(e,"ob",(function(){return _o})),n.d(e,"pb",(function(){return bo})),n.d(e,"qb",(function(){return vs})),n.d(e,"rb",(function(){return Mt})),n.d(e,"sb",(function(){return S})),n.d(e,"tb",(function(){return mn})),n.d(e,"ub",(function(){return Rt})),n.d(e,"vb",(function(){return br})),n.d(e,"wb",(function(){return so})),n.d(e,"xb",(function(){return qs})),n.d(e,"yb",(function(){return pt})),n.d(e,"zb",(function(){return _t})),n.d(e,"Ab",(function(){return y})),n.d(e,"Bb",(function(){return v})),n.d(e,"Cb",(function(){return vt})),n.d(e,"Db",(function(){return wt})),n.d(e,"Eb",(function(){return lo})),n.d(e,"Fb",(function(){return vo})),n.d(e,"Gb",(function(){return yo})),n.d(e,"Hb",(function(){return go})),n.d(e,"Ib",(function(){return mo})),n.d(e,"Jb",(function(){return jo})),n.d(e,"Kb",(function(){return Z})),n.d(e,"Lb",(function(){return ho})),n.d(e,"Mb",(function(){return zs})),n.d(e,"Nb",(function(){return wo})),n.d(e,"Ob",(function(){return Vs})),n.d(e,"Pb",(function(){return Ce})),n.d(e,"Qb",(function(){return Oe})),n.d(e,"Rb",(function(){return Co})),n.d(e,"Sb",(function(){return fo})),n.d(e,"Tb",(function(){return To})),n.d(e,"Ub",(function(){return xs})),n.d(e,"Vb",(function(){return Hs})),n.d(e,"Wb",(function(){return co})),n.d(e,"Xb",(function(){return ne})),n.d(e,"Yb",(function(){return tr})),n.d(e,"Zb",(function(){return mt})),n.d(e,"ac",(function(){return uo})),n.d(e,"bc",(function(){return So})),n.d(e,"cc",(function(){return Io})),n.d(e,"dc",(function(){return xo}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}function c(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const l=c("Inject",t=>({token:t})),h=c("Optional"),f=c("Self"),p=c("SkipSelf");var d=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function m(t){return b(t,t[w])||b(t,t[C])}function b(t,e){return e&&e.token===t?e:null}function _(t){return t&&(t.hasOwnProperty(E)||t.hasOwnProperty(T))?t[E]:null}const w=g({"\u0275prov":g}),E=g({"\u0275inj":g}),O=g({"\u0275provFallback":g}),C=g({ngInjectableDef:g}),T=g({ngInjectorDef:g});function S(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(S).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function I(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const x=g({__forward_ref__:g});function j(t){return t.__forward_ref__=j,t.toString=function(){return S(this())},t}function k(t){return"function"==typeof(e=t)&&e.hasOwnProperty(x)&&e.__forward_ref__===j?t():t;var e}const A="undefined"!=typeof globalThis&&globalThis,N="undefined"!=typeof window&&window,R="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,P="undefined"!=typeof global&&global,D=A||P||N||R,L=g({"\u0275cmp":g}),F=g({"\u0275dir":g}),U=g({"\u0275pipe":g}),M=g({"\u0275mod":g}),H=g({"\u0275loc":g}),q=g({"\u0275fac":g}),V=g({__NG_ELEMENT_ID__:g});class G{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const z=new G("INJECTOR",-1),B={},K=/\n/gm,W=g({provide:String,useValue:g});let Q,$=void 0;function Y(t){const e=$;return $=t,e}function J(t){const e=Q;return Q=t,e}function X(t,e=d.Default){if(void 0===$)throw new Error("inject() must be called from an injection context");return null===$?tt(t,void 0,e):$.get(t,e&d.Optional?null:void 0,e)}function Z(t,e=d.Default){return(Q||X)(k(t),e)}function tt(t,e,n){const r=m(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&d.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${S(t)}]`)}function et(t){const e=[];for(let n=0;n<t.length;n++){const r=k(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=d.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof h||"Optional"===i.ngMetadataName||i===h?n|=d.Optional:i instanceof p||"SkipSelf"===i.ngMetadataName||i===p?n|=d.SkipSelf:i instanceof f||"Self"===i.ngMetadataName||i===f?n|=d.Self:t=i instanceof l||i===l?i.token:i}e.push(Z(t,n))}else e.push(Z(r))}return e}class nt{get(t,e=B){if(e===B){const e=new Error(`NullInjectorError: No provider for ${S(t)}!`);throw e.name="NullInjectorError",e}return e}}class rt{}class it{}function ot(t,e){t.forEach(t=>Array.isArray(t)?ot(t,e):e(t))}function st(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function at(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var ut=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),ct=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const lt={},ht=[];let ft=0;function pt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ut.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ht,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ct.Emulated,id:"c",styles:t.styles||ht,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=ft++,n.inputs=bt(t.inputs,e),n.outputs=bt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(dt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(gt):null,n})}function dt(t){return Et(t)||function(t){return t[F]||null}(t)}function gt(t){return function(t){return t[U]||null}(t)}const yt={};function vt(t){const e={type:t.type,bootstrap:t.bootstrap||ht,declarations:t.declarations||ht,imports:t.imports||ht,exports:t.exports||ht,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{yt[t.id]=t.type}),e}function mt(t,e){return u(()=>{const n=Ct(t,!0);n.declarations=e.declarations||ht,n.imports=e.imports||ht,n.exports=e.exports||ht})}function bt(t,e){if(null==t)return lt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const _t=pt;function wt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Et(t){return t[L]||null}function Ot(t,e){return t.hasOwnProperty(q)?t[q]:null}function Ct(t,e){const n=t[M]||null;if(!n&&!0===e)throw new Error(`Type ${S(t)} does not have '\u0275mod' property.`);return n}function Tt(t){return Array.isArray(t)&&"object"==typeof t[1]}function St(t){return Array.isArray(t)&&!0===t[1]}function It(t){return 0!=(8&t.flags)}function xt(t){return 2==(2&t.flags)}function jt(t){return 1==(1&t.flags)}function kt(t){return null!==t.template}function At(t){return 0!=(512&t[2])}class Nt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Rt(){return Pt}function Pt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Lt),Dt}function Dt(){const t=Ft(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===lt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Lt(t,e,n,r){const i=Ft(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:lt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Nt(u&&u.currentValue,e,s===lt),t[r]=e}function Ft(t){return t.__ngSimpleChanges__||null}Rt.ngInherit=!0;let Ut=void 0;function Mt(t){Ut=t}function Ht(t){return!!t.listen}const qt={createRenderer:(t,e)=>void 0!==Ut?Ut:"undefined"!=typeof document?document:void 0};function Vt(t){for(;Array.isArray(t);)t=t[0];return t}function Gt(t,e){return Vt(e[t.index])}function zt(t,e){return t.data[e+20]}function Bt(t,e){const n=e[t];return Tt(n)?n:n[0]}function Kt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Wt(t){return 4==(4&t[2])}function Qt(t){return 128==(128&t[2])}function $t(t,e){return null===t||null==e?null:t[e]}function Yt(t){t[18]=0}function Jt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Xt={lFrame:ye(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Zt(){return Xt.bindingsEnabled}function te(){return Xt.lFrame.lView}function ee(){return Xt.lFrame.tView}function ne(t){Xt.lFrame.contextLView=t}function re(){return Xt.lFrame.previousOrParentTNode}function ie(t,e){Xt.lFrame.previousOrParentTNode=t,Xt.lFrame.isParent=e}function oe(){return Xt.lFrame.isParent}function se(){return Xt.checkNoChangesMode}function ae(t){Xt.checkNoChangesMode=t}function ue(){return Xt.lFrame.bindingIndex++}function ce(t,e){const n=Xt.lFrame;n.bindingIndex=n.bindingRootIndex=t,le(e)}function le(t){Xt.lFrame.currentDirectiveIndex=t}function he(){return Xt.lFrame.currentQueryIndex}function fe(t){Xt.lFrame.currentQueryIndex=t}function pe(t,e){const n=ge();Xt.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function de(t,e){const n=ge(),r=t[1];Xt.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function ge(){const t=Xt.lFrame,e=null===t?null:t.child;return null===e?ye(t):e}function ye(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function ve(){const t=Xt.lFrame;return Xt.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const me=ve;function be(){const t=ve();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function _e(){return Xt.lFrame.selectedIndex}function we(t){Xt.lFrame.selectedIndex=t}function Ee(){const t=Xt.lFrame;return zt(t.tView,t.selectedIndex)}function Oe(){Xt.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Ce(){Xt.lFrame.currentNamespace=null}function Te(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Se(t,e,n){je(t,e,3,n)}function Ie(t,e,n,r){(3&t[2])===n&&je(t,e,n,r)}function xe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function je(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(ke(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function ke(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Ae{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ne(t,e,n){const r=Ht(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Pe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Re(t){return 3===t||4===t||6===t}function Pe(t){return 64===t.charCodeAt(0)}function De(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Le(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Le(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Fe(t){return-1!==t}function Ue(t){return 32767&t}function Me(t){return t>>16}function He(t,e){let n=Me(t),r=e;for(;n>0;)r=r[15],n--;return r}function qe(t){return"string"==typeof t?t:null==t?"":""+t}function Ve(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():qe(t)}const Ge=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(D))();function ze(t){return t instanceof Function?t():t}let Be=!0;function Ke(t){const e=Be;return Be=t,e}let We=0;function Qe(t,e){const n=Ye(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,$e(r.data,t),$e(e,null),$e(r.blueprint,null));const i=Je(t,e),o=t.injectorIndex;if(Fe(i)){const t=Ue(i),n=He(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function $e(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ye(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Je(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Xe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(V)&&(r=n[V]),null==r&&(r=n[V]=We++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Ze(t,e,n,r=d.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(V)?t[V]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){pe(e,t);try{const t=i();if(null!=t||r&d.Optional)return t;throw new Error(`No provider for ${Ve(n)}!`)}finally{me()}}else if("number"==typeof i){if(-1===i)return new an(t,e);let o=null,s=Ye(t,e),a=-1,u=r&d.Host?e[16][6]:null;for((-1===s||r&d.SkipSelf)&&(a=-1===s?Je(t,e):e[s+8],sn(r,!1)?(o=e[1],s=Ue(a),e=He(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(on(i,s,t.data)){const t=en(s,e,n,o,r,u);if(t!==tn)return t}sn(r,e[1].data[s+8]===u)&&on(i,s,e)?(o=t,s=Ue(a),e=He(a,e)):s=-1}}}if(r&d.Optional&&void 0===i&&(i=null),0==(r&(d.Self|d.Host))){const t=e[9],o=J(void 0);try{return t?t.get(n,i,r&d.Optional):tt(n,i,r&d.Optional)}finally{J(o)}}if(r&d.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Ve(n)}]`)}const tn={};function en(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=nn(a,s,n,null==r?xt(a)&&Be:r!=s&&3===a.type,i&d.Host&&o===a);return null!==u?rn(e,s,u,a):tn}function nn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&kt(t)&&t.type===n)return u}return null}function rn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ae){const s=i;if(s.resolving)throw new Error("Circular dep for "+Ve(o[n]));const a=Ke(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=J(s.injectImpl)),pe(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Pt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&J(u),Ke(a),s.resolving=!1,me()}}return i}function on(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function sn(t,e){return!(t&d.Self||t&d.Host&&e)}class an{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ze(this._tNode,this._lView,t,void 0,e)}}function un(t){return t.ngDebugContext}function cn(t){return t.ngOriginalError}function ln(t,...e){t.error(...e)}class hn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||ln}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?un(t)?un(t):this._findContext(cn(t)):null}_findOriginalError(t){let e=cn(t);for(;e&&cn(e);)e=cn(e);return e}}class fn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class pn extends fn{getTypeName(){return"HTML"}}class dn extends fn{getTypeName(){return"Style"}}class gn extends fn{getTypeName(){return"Script"}}class yn extends fn{getTypeName(){return"URL"}}class vn extends fn{getTypeName(){return"ResourceURL"}}function mn(t){return t instanceof fn?t.changingThisBreaksApplicationSecurity:t}function bn(t,e){const n=_n(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function _n(t){return t instanceof fn&&t.getTypeName()||null}function wn(t){return new pn(t)}function En(t){return new dn(t)}function On(t){return new gn(t)}function Cn(t){return new yn(t)}function Tn(t){return new vn(t)}let Sn=!0,In=!1;function xn(){return In=!0,Sn}function jn(){if(In)throw new Error("Cannot enable prod mode after platform setup.");Sn=!1}class kn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class An{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Nn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Rn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Pn(t){return(t=String(t)).match(Nn)||t.match(Rn)?t:(xn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Dn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ln(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Fn=Dn("area,br,col,hr,img,wbr"),Un=Dn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Mn=Dn("rp,rt"),Hn=Ln(Mn,Un),qn=Ln(Fn,Ln(Un,Dn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ln(Mn,Dn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hn),Vn=Dn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Gn=Dn("srcset"),zn=Ln(Vn,Gn,Dn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Dn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Bn=Dn("script,style,template");class Kn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!qn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Bn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!zn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Vn[o]&&(s=Pn(s)),Gn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Pn(t.trim())).join(", ")),this.buf.push(" ",e,'="',$n(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();qn.hasOwnProperty(e)&&!Fn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push($n(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qn=/([^\#-~ |!])/g;function $n(t){return t.replace(/&/g,"&amp;").replace(Wn,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Qn,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yn;function Jn(t,e){let n=null;try{Yn=Yn||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new kn:new An(t)}(t);let r=e?String(e):"";n=Yn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Yn.getInertBodyElement(r)}while(r!==o);const s=new Kn,a=s.sanitizeChildren(Xn(n)||n);return xn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Xn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Xn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Zn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function tr(t){const e=function(){const t=te();return t&&t[12]}();return e?e.sanitize(Zn.URL,t)||"":bn(t,"URL")?mn(t):Pn(qe(t))}function er(t,e){t.__ngContext__=e}function nr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function rr(){throw new Error("Cannot mix multi providers and regular providers")}function ir(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function or(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ir(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function sr(t){return 0===t.type&&"ng-template"!==t.tagName}function ar(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function ur(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Re(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ar(t,u,n)||""===u&&1===e.length){if(cr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!or(t.attrs,c,n)){if(cr(r))return!1;s=!0}continue}const l=lr(8&r?"class":u,i,sr(t),n);if(-1===l){if(cr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ir(e,c,0)||2&r&&c!==t){if(cr(r))return!1;s=!0}}}}else{if(!s&&!cr(r)&&!cr(u))return!1;if(s&&cr(u))continue;s=!1,r=u|1&r}}return cr(r)||s}function cr(t){return 0==(1&t)}function lr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function hr(t,e,n=!1){for(let r=0;r<e.length;r++)if(ur(t,e[r],n))return!0;return!1}function fr(t,e){return t?":not("+e.trim()+")":e}function pr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||cr(s)||(e+=fr(o,i),i=""),r=s,o=o||!cr(r);n++}return""!==i&&(e+=fr(o,i)),e}const dr={};function gr(t){const e=t[3];return St(e)?e[3]:e}function yr(t){return mr(t[13])}function vr(t){return mr(t[4])}function mr(t){for(;null!==t&&!St(t);)t=t[4];return t}function br(t){_r(ee(),te(),_e()+t,se())}function _r(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Se(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ie(e,r,0,n)}we(n)}function wr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];fe(i),n.contentQueries(2,e[o],o)}}}function Er(t,e,n){return Ht(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Or(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Yt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Cr(t,e,n,r,i,o){const s=n+20,a=t.data[s]||function(t,e,n,r,i,o){const s=re(),a=oe(),u=a?s:s&&s.parent,c=t.data[n]=Pr(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,r,i,o);return ie(a,!0),a}function Tr(t,e,n){de(e,e[6]);try{const r=t.viewQuery;null!==r&&ni(1,r,n);const i=t.template;null!==i&&xr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wr(t,e),t.staticViewQueries&&ni(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Jr(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,be()}}function Sr(t,e,n,r){const i=e[2];if(256==(256&i))return;de(e,e[6]);const o=se();try{Yt(e),Xt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&xr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Se(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ie(e,n,0,null),xe(e,0)}if(function(t){for(let e=yr(t);null!==e;e=vr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Jt(r,1),n[2]|=1024}}}(e),function(t){for(let e=yr(t);null!==e;e=vr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Qt(n)&&Sr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&wr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Se(e,n)}else{const n=t.contentHooks;null!==n&&Ie(e,n,1),xe(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,we(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(ce(r,i),s(2,e[i])),i++)}}}finally{we(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Yr(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ni(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Se(e,n)}else{const n=t.viewHooks;null!==n&&Ie(e,n,2),xe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Jt(e[3],-1))}finally{be()}}function Ir(t,e,n,r){const i=e[10],o=!se(),s=Wt(e);try{o&&!s&&i.begin&&i.begin(),s&&Tr(t,e,r),Sr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function xr(t,e,n,r,i){const o=_e();try{we(-1),2&r&&e.length>20&&_r(t,e,0,se()),n(r,i)}finally{we(o)}}function jr(t,e,n){Zt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Qe(n,e),er(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=kt(r);o&&Kr(e,n,r);const u=rn(e,t,a,n);er(u,e),null!==s&&Wr(0,a-i,u,r,0,s),o&&(Bt(n.index,e)[8]=u)}}(t,e,n,Gt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,u=Xt.lFrame.currentDirectiveIndex;try{we(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];le(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Hr(r,i):s&&o.push(null)}}finally{we(-1),le(u)}}(t,e,n))}function kr(t,e,n=Gt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ar(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Nr(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Nr(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:dr);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:a,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function Rr(t,e,n,r){const i=ii(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Pr(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Dr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Lr(t,e,n,r,i,o,s,a){const u=Gt(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(si(t,n,c,r,i),xt(e)&&function(t,e){const n=Bt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,Ht(o)?o.setProperty(u,r,i):Pe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Fr(t,e,n,r){let i=!1;if(Zt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];hr(n,s.selectors,!1)&&(i||(i=[]),Xe(Qe(n,e),t,s.type),kt(s)?(2&n.flags&&nr(n),Vr(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,zr(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}qr(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=De(n.mergedAttrs,c.hostAttrs),Br(t,e,c),Gr(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),u=!0),Ur(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||sr(e)?null:Qr(n,i);o.push(c),s=Dr(n,u,s),a=Dr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Mr(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=De(n.mergedAttrs,n.attrs),i}function Ur(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Mr(t,e,n){for(let r=0;r<n;r++)e.push(dr),t.blueprint.push(dr),t.data.push(null)}function Hr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function qr(t,e,n){const r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Vr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Gr(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;kt(e)&&(n[""]=t)}}function zr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Br(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Ot(n.type)),i=new Ae(r,kt(n),null);t.blueprint.push(i),e.push(i)}function Kr(t,e,n){const r=Gt(e,t),i=Ar(n),o=t[10],s=Xr(t,Or(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function Wr(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Qr(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function $r(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Yr(t,e){const n=Bt(e,t);if(Qt(n)){const t=n[1];80&n[2]?Sr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=yr(e);null!==r;r=vr(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Sr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Bt(n[r],e);Qt(i)&&i[5]>0&&t(i)}}(n)}}function Jr(t,e){const n=Bt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Tr(r,n,n[8])}function Xr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Zr(t){for(;t;){t[2]|=64;const e=gr(t);if(At(t)&&!e)return t;t=e}return null}function ti(t,e,n){const r=e[10];r.begin&&r.begin();try{Sr(t,e,t.template,n)}catch(i){throw oi(e,i),i}finally{r.end&&r.end()}}function ei(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Kt(n),i=r[1];Ir(i,r,i.template,n)}}(t[8])}function ni(t,e,n){fe(0),e(t,n)}const ri=(()=>Promise.resolve(null))();function ii(t){return t[7]||(t[7]=[])}function oi(t,e){const n=t[9],r=n?n.get(hn,null):null;r&&r.handleError(e)}function si(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ai(t,e){const n=e[3];return-1===t.index?St(n)?n:null:n}function ui(t,e){const n=ai(t,e);return n?bi(e[11],n[7]):null}function ci(t,e,n,r,i){if(null!=r){let o,s=!1;St(r)?o=r:Tt(r)&&(s=!0,r=r[0]);const a=Vt(r);0===t&&null!==n?null==i?vi(e,n,a):yi(e,n,a,i||null):1===t&&null!==n?yi(e,n,a,i||null):2===t?function(t,e,n){const r=bi(t,e);r&&function(t,e,n,r){Ht(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Vt(n)&&ci(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Oi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function li(t,e,n,r){const i=ui(t.node,e);i&&Oi(t,e,e[11],n?1:2,i,r)}function hi(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&Jt(e[3],-1),n.splice(r,1)}function fi(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&hi(i,r),e>0&&(t[n-1][4]=r[4]);const o=at(t,10+e);li(r[1],r,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function pi(t,e){if(!(256&e[2])){const n=e[11];Ht(n)&&n.destroyNode&&Oi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return gi(t[1],t);for(;e;){let n=null;if(Tt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Tt(e)&&gi(e[1],e),e=di(e,t);null===e&&(e=t),Tt(e)&&gi(e[1],e),n=e&&e[4]}e=n}}(e)}}function di(t,e){let n;return Tt(t)&&(n=t[6])&&2===n.type?ai(n,t):t[3]===e?null:t[3]}function gi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ae)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Vt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Ht(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&St(e[3])){r!==e[3]&&hi(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function yi(t,e,n,r){Ht(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function vi(t,e,n){Ht(t)?t.appendChild(e,n):e.appendChild(n)}function mi(t,e,n,r){null!==r?yi(t,e,n,r):vi(t,e,n)}function bi(t,e){return Ht(t)?t.parentNode(e):e.parentNode}function _i(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?ui(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Gt(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==ct.ShadowDom&&n!==ct.Native)return null}return Gt(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){if(2===t.type){const n=ai(t,e);return null===n?null:wi(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Gt(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)mi(t,i,n[e],o);else mi(t,i,n,o)}}function wi(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Gt(n,e);if(0===r)return wi(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return St(t)?wi(-1,t):Vt(t)}}{const r=e[16],i=r[6],o=gr(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function Ei(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&er(Vt(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Ei(t,e,n.child,r,i,o,!1),ci(e,t,i,a,o)):1===u?Ci(t,e,r,n,i,o):ci(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Oi(t,e,n,r,i,o){Ei(n,r,t.node.child,e,i,o,!1)}function Ci(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)ci(e,t,i,a[u],o);else Ei(t,e,a,s[3],i,o,!0)}function Ti(t,e,n){Ht(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Si(t,e,n){Ht(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Ii{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Vt(s)),St(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=gr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}pi(this._lView[1],this._lView)}onDestroy(t){Rr(this._lView[1],this._lView,null,t)}markForCheck(){Zr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ti(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ae(!0);try{ti(t,e,n)}finally{ae(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Oi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class xi extends Ii{constructor(t){super(t),this._view=t}detectChanges(){ei(this._view)}checkNoChanges(){!function(t){ae(!0);try{ei(t)}finally{ae(!1)}}(this._view)}get context(){return null}}let ji,ki,Ai;function Ni(t,e,n){return ji||(ji=class extends t{}),new ji(Gt(e,n))}function Ri(t,e,n,r){return ki||(ki=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Or(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Tr(e,n,t),new Ii(n)}}),0===n.type?new ki(r,n,Ni(e,n,r)):null}function Pi(t,e,n,r){let i;Ai||(Ai=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Ni(e,this._hostTNode,this._hostView)}get injector(){return new an(this._hostTNode,this._hostView)}get parentInjector(){const t=Je(this._hostTNode,this._hostView),e=He(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=Me(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return Fe(t)&&null!=n?new an(n,e):new an(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(rt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),St(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ai(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],st(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),li(r,n,!0,wi(i,this._lContainer)),t.attachToViewContainerRef(this),st(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=fi(this._lContainer,e);n&&(at(this._lContainer[8],e),pi(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=fi(this._lContainer,e);return n&&null!=at(this._lContainer[8],e)?new Ii(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(St(o))i=o;else{let t;if(4===n.type)t=Vt(o);else if(t=r[11].createComment(""),At(r)){const e=r[11],i=Gt(n,r);yi(e,bi(e,i),t,function(t,e){return Ht(t)?t.nextSibling(e):e.nextSibling}(e,i))}else _i(r[1],r,t,n);r[n.index]=i=$r(o,r,t,n),Xr(r,i)}return new Ai(i,n,r)}function Di(t=!1){return function(t,e,n){if(!n&&xt(t)){const n=Bt(t.index,e);return new Ii(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Ii(e[16],e):null}(re(),te(),t)}let Li=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Fi(),t})();const Fi=Di,Ui=Function,Mi=new G("Set Injector scope."),Hi={},qi={},Vi=[];let Gi=void 0;function zi(){return void 0===Gi&&(Gi=new nt),Gi}function Bi(t,e=null,n=null,r){return new Ki(t,n,e||zi(),r)}class Ki{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ot(e,n=>this.processProvider(n,t,e)),ot([t],t=>this.processInjectorType(t,[],i)),this.records.set(z,Qi(void 0,this));const o=this.records.get(Mi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:S(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=B,n=d.Default){this.assertNotDestroyed();const r=Y(this);try{if(!(n&d.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof G)&&m(t);e=n&&this.injectableDefInScope(n)?Qi(Wi(t),Hi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&d.Self?zi():this.parent).get(t,e=n&d.Optional&&e===B?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(S(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=S(e);if(Array.isArray(e))i=e.map(S).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):S(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(K,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Y(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(S(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=k(t)))return!1;let r=_(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=_(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ot(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ot(r,t=>this.processProvider(t,n,r||Vi))}}this.injectorDefTypes.add(o),this.records.set(o,Qi(r.factory,Hi));const a=r.providers;if(null!=a&&!s){const e=t;ot(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Yi(t=k(t))?t:k(t&&t.provide);const i=function(t,e,n){return $i(t)?Qi(void 0,t.useValue):Qi(function(t,e,n){let r=void 0;if(Yi(t)){const e=k(t);return Ot(e)||Wi(e)}if($i(t))r=()=>k(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...et(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Z(k(t.useExisting));else{const i=k(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${S(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return Ot(i)||Wi(i);r=()=>new i(...et(t.deps))}var i;return r}(t,e,n),Hi)}(t,e,n);if(Yi(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&rr()}else{let e=this.records.get(r);e?void 0===e.multi&&rr():(e=Qi(void 0,Hi,!0),e.factory=()=>et(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===qi?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(S(t)):e.value===Hi&&(e.value=qi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Wi(t){const e=m(t),n=null!==e?e.factory:Ot(t);if(null!==n)return n;const r=_(t);if(null!==r)return r.factory;if(t instanceof G)throw new Error(`Token ${S(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${S(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[w]||t[C]||t[O]&&t[O]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Qi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $i(t){return null!==t&&"object"==typeof t&&W in t}function Yi(t){return"function"==typeof t}const Ji=function(t,e,n){return function(t,e=null,n=null,r){const i=Bi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Xi=(()=>{class t{static create(t,e){return Array.isArray(t)?Ji(t,e,""):Ji(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=B,t.NULL=new nt,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>Z(z)}),t.__NG_ELEMENT_ID__=-1,t})();const Zi=new G("AnalyzeForEntryComponents");function to(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=I(i,t):2==o&&(r=I(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let eo=null;function no(){if(!eo){const t=D.Symbol;if(t&&t.iterator)eo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(eo=n)}}}return eo}function ro(t){return!!io(t)&&(Array.isArray(t)||!(t instanceof Map)&&no()in t)}function io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function oo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function so(t,e,n,r){const i=te();return oo(i,ue(),e)&&(ee(),function(t,e,n,r,i,o){const s=Gt(t,e),a=e[11];if(null==r)Ht(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?qe(r):i(r,t.tagName||"",n);Ht(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Ee(),i,t,e,n,r)),so}function ao(t,e,n,r){return oo(t,ue(),n)?e+qe(n)+r:dr}function uo(t,e,n,r,i,o,s,a){const u=te(),c=ee(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Cr(e,n[6],t,0,s||null,$t(c,a));Fr(e,n,l,$t(c,u)),Te(e,l);const h=l.tViews=Nr(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=Pr(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];ie(h,!1);const f=u[11].createComment("");_i(c,u,f,h),er(f,u),Xr(u,u[l]=$r(f,u,f,h)),jt(h)&&jr(c,u,h),null!=s&&kr(u,h,a)}function co(t){return function(t,e){return t[e+20]}(Xt.lFrame.contextLView,t)}function lo(t,e=d.Default){const n=te();return null==n?Z(t,e):Ze(re(),n,k(t),e)}function ho(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Re(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(re(),t)}function fo(t,e,n){const r=te();return oo(r,ue(),e)&&Lr(ee(),Ee(),r,t,e,r[11],n,!1),fo}function po(t,e,n,r,i){const o=i?"class":"style";si(t,n,e.inputs[o],o,r)}function go(t,e,n,r){const i=te(),o=ee(),s=20+t,a=i[11],u=i[s]=Er(e,a,Xt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=$t(a,o),c=Cr(e,n[6],t,3,i,u);return Fr(e,n,c,$t(a,s)),null!==c.attrs&&to(c,c.attrs,!1),null!==c.mergedAttrs&&to(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[s];ie(c,!0);const l=c.mergedAttrs;null!==l&&Ne(a,u,l);const h=c.classes;null!==h&&Si(a,u,h);const f=c.styles;null!==f&&Ti(a,u,f),_i(o,i,u,c),0===Xt.lFrame.elementDepthCount&&er(u,i),Xt.lFrame.elementDepthCount++,jt(c)&&(jr(o,i,c),function(t,e,n){if(It(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&kr(i,c)}function yo(){let t=re();oe()?Xt.lFrame.isParent=!1:(t=t.parent,ie(t,!1));const e=t;Xt.lFrame.elementDepthCount--;const n=ee();n.firstCreatePass&&(Te(n,t),It(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&po(n,e,te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&po(n,e,te(),e.stylesWithoutHost,!1)}function vo(t,e,n,r){go(t,e,n,r),yo()}function mo(){return te()}function bo(t){return!!t&&"function"==typeof t.then}function _o(t){return!!t&&"function"==typeof t.subscribe}function wo(t,e,n=!1,r){const i=te(),o=ee(),s=re();return function(t,e,n,r,i,o,s=!1,a){const u=jt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=ii(e);let h=!0;if(3===r.type){const f=Gt(r,e),p=a?a(f):lt,d=p.target||f,g=l.length,y=a?t=>a(Vt(t[r.index])).target:r.index;if(Ht(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Oo(r,e,o,!1);const t=n.listen(p.name||d,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Oo(r,e,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),wo}function Eo(t,e,n){try{return!1!==e(n)}catch(r){return oi(t,r),!1}}function Oo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Bt(t.index,e):e;0==(32&e[2])&&Zr(s);let a=Eo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Eo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Co(t=1){return function(t){return(Xt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Xt.lFrame.contextLView))[8]}(t)}function To(t,e,n,r,i){const o=te(),s=ao(o,e,n,r);return s!==dr&&Lr(ee(),Ee(),o,t,s,o[11],i,!1),To}function So(t,e=""){const n=te(),r=ee(),i=t+20,o=r.firstCreatePass?Cr(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return Ht(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);_i(r,n,s,o),ie(o,!1)}function Io(t){return xo("",t,""),Io}function xo(t,e,n){const r=te(),i=ao(r,t,e,n);return i!==dr&&function(t,e,n){const r=function(t,e){return Vt(e[t+20])}(e,t),i=t[11];Ht(i)?i.setValue(r,n):r.textContent=n}(r,_e(),i),xo}function jo(t,e,n){const r=te();return oo(r,ue(),e)&&Lr(ee(),Ee(),r,t,e,r[11],n,!0),jo}function ko(t,e){const n=Kt(t)[1],r=n.data.length-1;Te(n,{directiveStart:r,directiveEnd:r+1})}class Ao{}class No{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${S(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ro=(()=>{class t{}return t.NULL=new No,t})(),Po=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Do(t),t})();const Do=function(t){return Ni(t,re(),te())};class Lo{}var Fo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Uo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Mo(),t})();const Mo=function(){const t=te(),e=Bt(re().index,t);return function(t){const e=t[11];if(Ht(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Tt(e)?e:t)};let Ho=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class qo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Vo=new qo("10.0.14");class Go{constructor(){}supports(t){return ro(t)}create(t){return new Bo(t)}}const zo=(t,e)=>e;class Bo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||zo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<$o(n,r,i)?e:n,s=$o(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ro(t))throw new Error(`Error trying to diff '${S(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[no()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ko(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Qo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ko{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Wo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Qo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Wo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $o(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Yo{constructor(){}supports(t){return t instanceof Map||io(t)}create(){return new Jo}}class Jo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||io(t)))throw new Error(`Error trying to diff '${S(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Xo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Xo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Zo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Go])}),t})(),ts=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Yo])}),t})();const es=[new Yo],ns=new Zo([new Go]),rs=new ts(es);let is=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>os(t,Po),t})();const os=function(t,e){return Ri(t,e,re(),te())};let ss=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>as(t,Po),t})();const as=function(t,e){return Pi(t,e,re(),te())},us={};class cs extends Ro{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Et(t);return new fs(e,this.ngModule)}}function ls(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const hs=new G("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ge});class fs extends Ao{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(pr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ls(this.componentDef.inputs)}get outputs(){return ls(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,us,i);return o!==us||r===us?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Lo,qt),s=i.get(Ho,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ht(t))return t.selectRootElement(e,n===ct.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Er(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Ge,clean:ri,playerHandler:null,flags:0},f=Nr(0,-1,null,1,0,null,null,null,null,null),p=Or(null,f,h,l,null,null,o,a,s,i);let d,g;de(p,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Cr(s,null,0,3,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(to(a,u,!0),null!==t&&(Ne(i,t,u),null!==a.classes&&Si(i,t,a.classes),null!==a.styles&&Ti(i,t,a.styles)));const c=r.createRenderer(t,e),l=Or(n,Ar(e),null,e.onPush?64:16,n[20],a,r,c,void 0);return s.firstCreatePass&&(Xe(Qe(a,n),s,e.type),Vr(s,a),zr(a,n.length,1)),Xr(n,l),n[20]=l}(c,this.componentDef,p,o,a);if(c)if(n)Ne(a,c,["ng-version",Vo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!cr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ne(a,c,t),e&&e.length>0&&Si(a,c,e.join(" "))}if(g=zt(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}d=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=re();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),qr(t,r,1),Br(t,e,n));const i=rn(e,t,e.length-1,r);er(i,e);const o=Gt(r,e);return o&&er(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=re();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){we(a.index-20);const t=n[1];Ur(t,e),Mr(t,n,e.hostVars),Hr(e,s)}return s}(t,this.componentDef,p,h,[ko]),Tr(f,p,null)}finally{be()}const y=new ps(this.componentType,d,Ni(Po,g,p),p,g);return f.node.child=g,y}}class ps extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new xi(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=Pr(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new an(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const ds=void 0;var gs=["en",[["a","p"],["AM","PM"],ds],[["AM","PM"],ds,ds],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ds,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ds,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ds,"{1} 'at' {0}",ds],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ys={};function vs(t,e,n){"string"!=typeof e&&(n=e,e=t[Es.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ys[e]=t,n&&(ys[e][Es.ExtraData]=n)}function ms(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ws(e);if(n)return n;const r=e.split("-")[0];if(n=ws(r),n)return n;if("en"===r)return gs;throw new Error(`Missing locale data for the locale "${t}".`)}function bs(t){return ms(t)[Es.CurrencyCode]||null}function _s(t){return ms(t)[Es.PluralCase]}function ws(t){return t in ys||(ys[t]=D.ng&&D.ng.common&&D.ng.common.locales&&D.ng.common.locales[t]),ys[t]}var Es=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Os="en-US";function Cs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Os=t.toLowerCase().replace(/_/g,"-"))}const Ts=new Map;class Ss extends rt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cs(this);const n=Ct(t),r=t[H]||null;r&&Cs(r),this._bootstrapComponents=ze(n.bootstrap),this._r3Injector=Bi(t,e,[{provide:rt,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],S(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Xi.THROW_IF_NOT_FOUND,n=d.Default){return t===Xi||t===rt||t===z?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Is extends it{constructor(t){super(),this.moduleType=t,null!==Ct(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${S(e)} vs ${S(e.name)}`)})(t,Ts.get(t),e),Ts.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Ss(this.moduleType,t)}}function xs(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return oo(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===dr?void 0:n}(t,s+1)}(te(),function(){const t=Xt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}const js=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ks(){return this._results[no()]()}class As{constructor(){this.dirty=!0,this._results=[],this.changes=new js,this.length=0;const t=no(),e=As.prototype;e[t]||(e[t]=ks)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ns{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ns(this.queryList)}setDirty(){this.queryList.setDirty()}}class Rs{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Rs(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Gs(t,e).matches&&this.queries[e].setDirty()}}class Ps{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Ds{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ds(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ls{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ls(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Fs(e,i)),this.matchTNodeWithReadOption(t,e,nn(e,t,i,!1,!1))}else n===is?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,nn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Po||r===ss||r===is&&0===e.type)this.addMatch(e.index,-2);else{const n=nn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Fs(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Us(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?Ni(Po,t,e):0===t.type?Ri(is,Po,t,e):null}(e,t):-2===n?function(t,e,n){return n===Po?Ni(Po,e,t):n===is?Ri(is,Po,e,t):n===ss?Pi(ss,Po,e,t):void 0}(t,e,r):rn(t,t[1],n,e)}function Ms(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Us(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Hs(t){const e=te(),n=ee(),r=he();fe(r+1);const i=Gs(n,r);if(t.dirty&&Wt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Ms(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Ms(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function qs(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Ds),t.queries.track(new Ls(e,n))}(t,new Ps(n,r,!1,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new As;Rr(t,e,n,n.destroy),null===e[19]&&(e[19]=new Rs),e[19].queries.push(new Ns(n))}(t,e)}(ee(),te(),e,n,r,0,re(),t)}function Vs(){return t=te(),e=he(),t[19].queries[e].queryList;var t,e}function Gs(t,e){return t.queries.getByIndex(e)}function zs(t=d.Default){const e=Di(!0);if(null!=e||t&d.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const Bs=new G("Application Initializer");let Ks=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();bo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Z(Bs,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Ws=new G("AppId"),Qs={provide:Ws,useFactory:function(){return`${$s()}${$s()}${$s()}`},deps:[]};function $s(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ys=new G("Platform Initializer"),Js=new G("Platform ID"),Xs=new G("appBootstrapListener");let Zs=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const ta=new G("LocaleId"),ea=new G("DefaultCurrencyCode");class na{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ra=function(t){return new Is(t)},ia=ra,oa=function(t){return Promise.resolve(ra(t))},sa=function(t){const e=ra(t),n=ze(Ct(t).declarations).reduce((t,e)=>{const n=Et(e);return n&&t.push(new fs(n)),t},[]);return new na(e,n)},aa=sa,ua=function(t){return Promise.resolve(sa(t))};let ca=(()=>{class t{constructor(){this.compileModuleSync=ia,this.compileModuleAsync=oa,this.compileModuleAndAllComponentsSync=aa,this.compileModuleAndAllComponentsAsync=ua}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const la=(()=>Promise.resolve(0))();function ha(t){"undefined"==typeof Zone?la.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class fa{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new js(!1),this.onMicrotaskEmpty=new js(!1),this.onStable=new js(!1),this.onError=new js(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=D.requestAnimationFrame,e=D.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(D,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ya(t),ga(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ya(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return va(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),ma(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return va(t),e.invoke(r,i,o,s,a)}finally{ma(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ya(t),ga(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,da,pa,pa);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function pa(){}const da={};function ga(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ya(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function va(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ma(t){t._nesting--,ga(t)}class ba{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new js,this.onMicrotaskEmpty=new js,this.onStable=new js,this.onError=new js}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let _a=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fa.assertNotInAngularZone(),ha(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ha(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Z(fa))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),wa=(()=>{class t{constructor(){this._applications=new Map,Ta.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ta.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class Ea{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Oa(t){Ta=t}let Ca,Ta=new Ea;const Sa=new G("AllowMultipleToken");class Ia{constructor(t,e){this.name=t,this.token=e}}function xa(t,e,n=[]){const r="Platform: "+e,i=new G(r);return(e=[])=>{let o=ja();if(!o||o.injector.get(Sa,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Mi,useValue:"platform"});!function(t){if(Ca&&!Ca.destroyed&&!Ca.injector.get(Sa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ca=t.get(ka);const e=t.get(Ys,null);e&&e.forEach(t=>t())}(Xi.create({providers:t,name:r}))}return function(t){const e=ja();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ja(){return Ca&&!Ca.destroyed?Ca:null}let ka=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ba:("zone.js"===t?void 0:t)||new fa({enableLongStackTrace:xn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:fa,useValue:n}];return n.run(()=>{const e=Xi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(hn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Ra(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return bo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ks);return t.runInitializers(),t.donePromise.then(()=>(Cs(i.injector.get(ta,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Aa({},e);return function(t,e,n){const r=new Is(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Na);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${S(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Z(Xi))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Aa(t,e){return Array.isArray(e)?e.reduce(Aa,t):Object.assign(Object.assign({},t),e)}let Na=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=xn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{fa.assertNotInAngularZone(),ha(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{fa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ao?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(rt),i=n.create(Xi.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(_a,null);return o&&i.injector.get(wa).registerApplication(i.location.nativeElement,o),this._loadComponent(i),xn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ra(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Xs,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Ra(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Z(fa),Z(Zs),Z(Xi),Z(hn),Z(Ro),Z(Ks))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Ra(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Pa{}class Da{}const La={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Fa=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||La}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ua(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ua(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Z(ca),Z(Da,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Ua(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ma=function(t){return null},Ha=xa(null,"core",[{provide:Js,useValue:"unknown"},{provide:ka,deps:[Xi]},{provide:wa,deps:[]},{provide:Zs,deps:[]}]),qa=[{provide:Na,useClass:Na,deps:[fa,Zs,Xi,hn,Ro,Ks]},{provide:hs,deps:[fa],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ks,useClass:Ks,deps:[[new h,Bs]]},{provide:ca,useClass:ca,deps:[]},Qs,{provide:Zo,useFactory:function(){return ns},deps:[]},{provide:ts,useFactory:function(){return rs},deps:[]},{provide:ta,useFactory:function(t){return Cs(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new l(ta),new h,new p]]},{provide:ea,useValue:"USD"}];let Va=(()=>{class t{constructor(t){}}return t.\u0275mod=vt({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(Z(Na))},providers:qa}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return F})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return N})),n.d(e,"j",(function(){return U})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return V})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return A})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return v})),n.d(e,"r",(function(){return b})),n.d(e,"s",(function(){return P})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return d})),n.d(e,"v",(function(){return g})),n.d(e,"w",(function(){return E})),n.d(e,"x",(function(){return m})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return k})),n.d(e,"A",(function(){return I})),n.d(e,"B",(function(){return D})),n.d(e,"C",(function(){return L})),n.d(e,"D",(function(){return R})),n.d(e,"E",(function(){return K})),n.d(e,"F",(function(){return B})),n.d(e,"G",(function(){return x})),n.d(e,"H",(function(){return q})),n.d(e,"I",(function(){return G})),n.d(e,"J",(function(){return z}));var r=n("uXP2"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function _(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return p().indexOf("MSAppHost/")>=0}function E(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function T(t,e){return t.replace(S,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var S=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},k=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},A=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function U(t,e){var n=new M(t,e);return n.subscribe.bind(n)}var M=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function H(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function V(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function G(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(V(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(V(t,e,r)+"must be a valid context object.")}var B=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},K=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i)},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:a,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(l){e=l instanceof s?u(l.errors):[l]}if(Object(r.a)(c)){let t=-1,n=c.length;for(;++t<n;){const n=c[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){e=e||[],l instanceof s?e=e.concat(u(l.errors)):e.push(l)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return y})),n.d(e,"j",(function(){return E}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.a){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class p{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function d(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.T)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let S=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Cb({type:t}),t.\u0275inj=u.Bb({factory:function(e){return new(e||t)(u.Kb(u.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const p=new f(l);var d=n("DH7j");class g extends r.a{constructor(t,e=0,n=p){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(d.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=p)}static create(t,e=0,n=p){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},uXP2:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function d(){return t=>{return a()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("uXP2"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.l)(p,a.serviceProps),r[h]=p,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var m=d;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",void 0),t.registerVersion("fire-js","")}(m),e.a=m},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyDIS0Q0fsgxpXtaB-N7jrBtTe1SgtdkDFc",authDomain:"portafoliogyna.firebaseapp.com",projectId:"portafoliogyna",storageBucket:"portafoliogyna.appspot.com",messagingSenderId:"232519282185",appId:"1:232519282185:web:0e412086de67f5619792d8",measurementId:"G-5HQNXQHJCG"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Kb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(a))},t.\u0275prov=Object(r.Ab)({factory:p,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function p(){return new h(Object(r.Kb)(a))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Kb)(a).location;return new _(Object(r.Kb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(u),r.Kb(b,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(u),r.Kb(b,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(v),r.Kb(u))},t.normalizeQueryParams=y,t.joinWithSlash=d,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Ab)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new E(Object(r.Kb)(v),Object(r.Kb)(u))}function C(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.kb;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.u))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();function j(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.T)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(r.P),r.Eb(r.K),r.Eb(r.s))},t.\u0275dir=r.zb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let R=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(r.P),r.Eb(r.K))},t.\u0275dir=r.zb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.sb)(e)}'.`)}let L=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(r.l),r.Eb(r.t),r.Eb(r.D))},t.\u0275dir=r.zb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),F=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[{provide:I,useClass:x}]}),t})();function U(t){return"server"===t}let M=(()=>{class t{}return t.\u0275prov=Object(r.Ab)({token:t,providedIn:"root",factory:()=>new H(Object(r.Kb)(a),window,Object(r.Kb)(r.m))}),t})();class H{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=q(this.window.history)||q(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function q(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class V extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new V,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=z||(z=document.querySelector("base"),z)?z.getAttribute("href"):null;return null==e?null:(n=e,G||(G=document.createElement("a")),G.setAttribute("href",n),"/"===G.pathname.charAt(0)?G.pathname:"/"+G.pathname);var n}resetBaseElement(){z=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return j(document.cookie,t)}}let G,z=null;const B=new r.q("TRANSITION_ID"),K=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[B,a,r.r],multi:!0}];class W{static init(){Object(r.V)(new W)}addToWindow(t){r.mb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.mb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.mb.getAllAngularRootElements=()=>t.getAllRootElements(),r.mb.frameworkStabilizers||(r.mb.frameworkStabilizers=[]),r.mb.frameworkStabilizers.push(t=>{const e=r.mb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Q=new r.q("EventManagerPlugins");let $=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Q),r.Kb(r.z))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class Y{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let J=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t extends J{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const Z={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=/%COMP%/g;function et(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?et(t,i,n):(i=i.replace(tt,t),n.push(i))}return n}function nt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let rt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new it(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ot(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.Q.Native:case r.Q.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=et(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb($),r.Kb(X),r.Kb(r.c))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class it{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Z[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Z[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Z[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,nt(n)):this.eventManager.addEventListener(t,e,nt(n))}}class ot extends it{constructor(t,e,n,r){super(t),this.component=n;const i=et(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(tt,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(tt,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class st extends it{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=et(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let at=(()=>{class t extends Y{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const ut=["alt","control","meta","shift"],ct={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ht={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ft=(()=>{class t extends Y{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ut.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&lt.hasOwnProperty(e)&&(e=lt[e]))}return ct[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ut.forEach(r=>{r!=n&&(0,ht[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const pt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){V.makeCurrent(),W.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.rb)(document),document},deps:[]}],dt=Object(r.R)(r.U,"browser",pt),gt=[[],{provide:r.X,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Q,useClass:at,multi:!0,deps:[a,r.z,r.B]},{provide:Q,useClass:ft,multi:!0,deps:[a]},[],{provide:rt,useClass:rt,deps:[$,X,r.c]},{provide:r.E,useExisting:rt},{provide:J,useExisting:X},{provide:X,useClass:X,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:$,useClass:$,deps:[Q,r.z]},[]];let yt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:B,useExisting:r.c},K]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)(r.Kb(t,12))},providers:gt,imports:[F,r.f]}),t})();"undefined"!=typeof window&&window;var vt=n("LRne"),mt=n("Cfvw"),bt=n("XNiG"),_t=n("9ppp");class wt extends bt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _t.a;return this._value}next(t){super.next(this._value=t)}}var Et=n("HDdC");const Ot=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Ct=n("z+Ro"),Tt=n("DH7j"),St=n("l7GE"),It=n("ZUHj"),xt=n("yCtX");const jt={};class kt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new At(t,this.resultSelector))}}class At extends St.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(jt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(It.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===jt?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var Nt=n("EY2u");function Rt(t){return new Et.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(mt.a)(n):Object(Nt.b)()).subscribe(e)})}var Pt=n("lJxs"),Dt=n("bHdf");function Lt(){return Object(Dt.a)(1)}var Ft=n("7o/Q");function Ut(t,e){return function(n){return n.lift(new Mt(t,e))}}class Mt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Ht(t,this.predicate,this.thisArg))}}class Ht extends Ft.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const qt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Vt(t){return function(e){return 0===t?Object(Nt.b)():e.lift(new Gt(t))}}class Gt{constructor(t){if(this.total=t,this.total<0)throw new qt}call(t,e){return e.subscribe(new zt(t,this.total))}}class zt extends Ft.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Bt(t=Qt){return e=>e.lift(new Kt(t))}class Kt{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Wt(t,this.errorFactory))}}class Wt extends Ft.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(c_){t=c_}this.destination.error(t)}}}function Qt(){return new Ot}function $t(t=null){return e=>e.lift(new Yt(t))}class Yt{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Jt(t,this.defaultValue))}}class Jt extends Ft.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Xt=n("SpAZ"),Zt=n("51Dv");function te(t){return function(e){const n=new ee(t),r=e.lift(n);return n.caught=r}}class ee{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ne(t,this.selector,this.caught))}}class ne extends St.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Zt.a(this,void 0,void 0);this.add(r);const i=Object(It.a)(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function re(t){return e=>0===t?Object(Nt.b)():e.lift(new ie(t))}class ie{constructor(t){if(this.total=t,this.total<0)throw new qt}call(t,e){return e.subscribe(new oe(t,this.total))}}class oe extends Ft.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function se(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ut((e,n)=>t(e,n,r)):Xt.a,re(1),n?$t(e):Bt(()=>new Ot))}var ae=n("5+tZ"),ue=n("vkgz");class ce{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new le(t,this.predicate,this.thisArg,this.source))}}class le extends Ft.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function he(t,e){return"function"==typeof e?n=>n.pipe(he((n,r)=>Object(mt.a)(t(n,r)).pipe(Object(Pt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new fe(t))}class fe{constructor(t){this.project=t}call(t,e){return e.subscribe(new pe(t,this.project))}}class pe extends St.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new Zt.a(this,e,n),o=this.destination;o.add(i),this.innerSubscription=Object(It.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function de(...t){return Lt()(Object(vt.a)(...t))}function ge(...t){const e=t[t.length-1];return Object(Ct.a)(e)?(t.pop(),n=>de(t,n,e)):e=>de(t,e)}function ye(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ve(t,e,n))}}class ve{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new me(t,this.accumulator,this.seed,this.hasSeed))}}class me extends Ft.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function be(t,e){return Object(ae.a)(t,e,1)}var _e=n("quSY");class we{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ee(t,this.callback))}}class Ee extends Ft.a{constructor(t,e){super(t),this.add(new _e.a(e))}}class Oe{constructor(t,e){this.id=t,this.url=e}}class Ce extends Oe{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Te extends Oe{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Se extends Oe{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ie extends Oe{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xe extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Oe{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ae extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Re{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pe{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class De{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class He{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qe(t){return new He(t)}function Ve(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ge(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ze(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Be(t[i],e[i]))return!1;return!0}function Be(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function Ke(t){return Array.prototype.concat.apply([],t)}function We(t){return t.length>0?t[t.length-1]:null}function Qe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function $e(t){return Object(r.ob)(t)?t:Object(r.pb)(t)?Object(mt.a)(Promise.resolve(t)):Object(vt.a)(t)}function Ye(t,e,n){return n?function(t,e){return ze(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!tn(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Be(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!tn(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!tn(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!tn(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class Je{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return on.serialize(this)}}class Xe{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Qe(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sn(this)}}class Ze{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qe(this.parameters)),this._parameterMap}toString(){return fn(this)}}function tn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function en(t,e){let n=[];return Qe(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),Qe(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class nn{}class rn{parse(t){const e=new vn(t);return new Je(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return sn(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return Qe(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=en(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${sn(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${un(e)}=${un(t)}`).join("&"):`${un(e)}=${un(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const on=new rn;function sn(t){return t.segments.map(t=>fn(t)).join("/")}function an(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function un(t){return an(t).replace(/%3B/gi,";")}function cn(t){return an(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ln(t){return decodeURIComponent(t)}function hn(t){return ln(t.replace(/\+/g,"%20"))}function fn(t){return`${cn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${cn(t)}=${cn(e[t])}`).join("")}`;var e}const pn=/^[^\/()?;=#]+/;function dn(t){const e=t.match(pn);return e?e[0]:""}const gn=/^[^=?&#]+/,yn=/^[^?&#]+/;class vn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Xe(t,e)),n}parseSegment(){const t=dn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ze(ln(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=dn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=dn(this.remaining);t&&(n=t,this.capture(n))}t[ln(e)]=ln(n)}parseQueryParam(t){const e=function(t){const e=t.match(gn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(yn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=hn(e),i=hn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=dn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Xe([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class mn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=bn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=bn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=_n(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return _n(t,this._root).map(t=>t.value)}}function bn(t,e){if(t===e.value)return e;for(const n of e.children){const e=bn(t,n);if(e)return e}return null}function _n(t,e){if(t===e.value)return[e];for(const n of e.children){const r=_n(t,n);if(r.length)return r.unshift(e),r}return[]}class wn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function En(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class On extends mn{constructor(t,e){super(t),this.snapshot=e,jn(this,t)}toString(){return this.snapshot.toString()}}function Cn(t,e){const n=function(t,e){const n=new In([],{},{},"",{},"primary",e,null,t.root,-1,{});return new xn("",new wn(n,[]))}(t,e),r=new wt([new Ze("",{})]),i=new wt({}),o=new wt({}),s=new wt({}),a=new wt(""),u=new Tn(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new On(new wn(u,[]),n)}class Tn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Pt.a)(t=>qe(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Pt.a)(t=>qe(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Sn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class In{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xn extends mn{constructor(t,e){super(e),this.url=t,jn(this,e)}toString(){return kn(this._root)}}function jn(t,e){e.value._routerState=t,e.children.forEach(e=>jn(t,e))}function kn(t){const e=t.children.length>0?` { ${t.children.map(kn).join(", ")} } `:"";return`${t.value}${e}`}function An(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Nn(t,e){return ze(t.params,e.params)&&function(t,e){return tn(t,e)&&t.every((t,n)=>ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Nn(t.parent,e.parent))}function Rn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pn(t,e,n,r,i){let o={};return r&&Qe(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Je(n.root===t?e:function t(e,n,r){const i={};return Qe(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Xe(e.segments,i)}(n.root,t,e),o,i)}class Dn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Rn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==We(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ln{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Fn(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function Un(t,e,n){if(t||(t=new Xe([],{})),0===t.segments.length&&t.hasChildren())return Mn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=Fn(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Gn(s,a,e))return o;r+=2}else{if(!Gn(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Xe(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Xe(t.segments.slice(r.pathIndex),t.children),Mn(e,0,i)}return r.match&&0===i.length?new Xe(t.segments,{}):r.match&&!t.hasChildren()?Hn(t,e,n):r.match?Mn(t,0,i):Hn(t,e,n)}function Mn(t,e,n){if(0===n.length)return new Xe(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return Qe(r,(n,r)=>{null!==n&&(i[r]=Un(t.children[r],e,n))}),Qe(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Xe(t.segments,i)}}function Hn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=qn(n[i].outlets);return new Xe(r,t)}if(0===i&&Rn(n[0])){r.push(new Ze(t.segments[e].path,n[0])),i++;continue}const o=Fn(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Rn(s)?(r.push(new Ze(o,Vn(s))),i+=2):(r.push(new Ze(o,{})),i++)}return new Xe(r,{})}function qn(t){const e={};return Qe(t,(t,n)=>{null!==t&&(e[n]=Hn(new Xe([],{}),0,t))}),e}function Vn(t){const e={};return Qe(t,(t,n)=>e[n]=""+t),e}function Gn(t,e,n){return t==n.path&&ze(e,n.parameters)}class zn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),An(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=En(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Qe(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=En(t),i=t.value.component?n.children:e;Qe(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=En(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ue(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Le(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(An(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Bn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Bn(t){An(t.value),t.children.forEach(Bn)}class Kn{constructor(t,e){this.routes=t,this.module=e}}function Wn(t){return"function"==typeof t}function Qn(t){return t instanceof Je}class $n{constructor(t){this.segmentGroup=t||null}}class Yn{constructor(t){this.urlTree=t}}function Jn(t){return new Et.a(e=>e.error(new $n(t)))}function Xn(t){return new Et.a(e=>e.error(new Yn(t)))}function Zn(t){return new Et.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class tr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(Pt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(te(t=>{if(t instanceof Yn)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof $n)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(Pt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(te(t=>{if(t instanceof $n)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Xe([],{primary:t}):t;return new Je(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Pt.a)(t=>new Xe([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(vt.a)({});const n=[],r=[],i={};return Qe(t,(t,o)=>{const s=e(o,t).pipe(Object(Pt.a)(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),vt.a.apply(null,n.concat(r)).pipe(Lt(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ut((e,n)=>t(e,n,r)):Xt.a,Vt(1),n?$t(e):Bt(()=>new Ot))}(),Object(Pt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(vt.a)(...n).pipe(Object(Pt.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(te(t=>{if(t instanceof $n)return Object(vt.a)(null);throw t}))),Lt(),se(t=>!!t),te((t,n)=>{if(t instanceof Ot||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(vt.a)(new Xe([],{}));throw new $n(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return ir(r)!==o?Jn(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Jn(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Xn(i):this.lineralizeSegments(n,i).pipe(Object(ae.a)(n=>{const i=new Xe(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=er(e,r,i);if(!s)return Jn(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Xn(l):this.lineralizeSegments(r,l).pipe(Object(ae.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Pt.a)(t=>(n._loadedConfig=t,new Xe(r,{})))):Object(vt.a)(new Xe(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=er(e,n,r);if(!i)return Jn(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(ae.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>rr(t,e,n)&&"primary"!==ir(n))}(t,n,r)?{segmentGroup:nr(new Xe(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==ir(r)&&(n[ir(r)]=new Xe([],{}));return n}(r,new Xe(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>rr(t,e,n))}(t,n,r)?{segmentGroup:nr(new Xe(t.segments,function(t,e,n,r){const i={};for(const o of n)rr(t,e,o)&&!r[ir(o)]&&(i[ir(o)]=new Xe([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Pt.a)(t=>new Xe(o,t))):0===r.length&&0===s.length?Object(vt.a)(new Xe(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(Object(Pt.a)(t=>new Xe(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(vt.a)(new Kn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(vt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(ae.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Pt.a)(t=>(e._loadedConfig=t,t))):function(t){return new Et.a(e=>e.error(Ve(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(vt.a)(new Kn([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(mt.a)(r).pipe(Object(Pt.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&Wn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Wn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return $e(o)})).pipe(Lt(),Object(ue.a)(t=>{if(!Qn(t))return;const e=Ve(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(i=t=>!0===t,t=>t.lift(new ce(i,void 0,t)))):Object(vt.a)(!0);var i}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(vt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Zn(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Je(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Qe(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Qe(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Xe(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function er(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Ge)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function nr(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Xe(t.segments.concat(e.segments),e.children)}return t}function rr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function ir(t){return t.outlet||"primary"}class or{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class sr{constructor(t,e){this.component=t,this.route=e}}function ar(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=En(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!tn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!tn(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nn(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Nn(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new or(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new sr(u&&u.outlet&&u.outlet.component||null,a))}else a&&cr(n,u,o),o.canActivateChecks.push(new or(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),Qe(s,(t,e)=>cr(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function ur(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function cr(t,e,n){const r=En(t),i=t.value;Qe(r,(t,r)=>{cr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new sr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const lr=Symbol("INITIAL_VALUE");function hr(){return he(t=>function(...t){let e=null,n=null;return Object(Ct.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Tt.a)(t[0])&&(t=t[0]),Object(xt.a)(t,n).lift(new kt(e))}(...t.map(t=>t.pipe(re(1),ge(lr)))).pipe(ye((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==lr)return t;if(r===lr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Qn(r))return r}return t},t)},lr),Ut(t=>t!==lr),Object(Pt.a)(t=>Qn(t)?t:!0===t),re(1)))}function fr(t,e){return null!==t&&e&&e(new Fe(t)),Object(vt.a)(!0)}function pr(t,e){return null!==t&&e&&e(new De(t)),Object(vt.a)(!0)}function dr(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(vt.a)(!0);const i=r.map(r=>Rt(()=>{const i=ur(r,e,n);let o;if(function(t){return t&&Wn(t.canActivate)}(i))o=$e(i.canActivate(e,t));else{if(!Wn(i))throw new Error("Invalid CanActivate guard");o=$e(i(e,t))}return o.pipe(se())}));return Object(vt.a)(i).pipe(hr())}function gr(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Rt(()=>{const i=e.guards.map(i=>{const o=ur(i,e.node,n);let s;if(function(t){return t&&Wn(t.canActivateChild)}(o))s=$e(o.canActivateChild(r,t));else{if(!Wn(o))throw new Error("Invalid CanActivateChild guard");s=$e(o(r,t))}return s.pipe(se())});return Object(vt.a)(i).pipe(hr())}));return Object(vt.a)(i).pipe(hr())}class yr{}class vr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=_r(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new In([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wn(n,e),i=new xn(this.url,r);return this.inheritParamsAndData(i._root),Object(vt.a)(i)}catch(c_){return new Et.a(e=>e.error(c_))}}inheritParamsAndData(t){const e=t.value,n=Sn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=en(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(c_){if(!(c_ instanceof yr))throw c_}if(this.noLeftoversInUrl(e,n,r))return[];throw new yr}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new yr;if((t.outlet||"primary")!==r)throw new yr;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?We(n).parameters:{};i=new In(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Or(t),r,t.component,t,mr(e),br(e)+n.length,Cr(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new yr;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Ge)(n,t,e);if(!r)throw new yr;const i={};Qe(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new In(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Or(t),r,t.component,t,mr(e),br(e)+o.length,Cr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=_r(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new wn(i,t)]}if(0===a.length&&0===c.length)return[new wn(i,[])];const l=this.processSegment(a,u,c,"primary");return[new wn(i,l)]}}function mr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function br(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function _r(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>wr(t,e,n)&&"primary"!==Er(n))}(t,n,r)){const i=new Xe(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==Er(o)){const n=new Xe([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Er(o)]=n}return i}(t,e,r,new Xe(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>wr(t,e,n))}(t,n,r)){const o=new Xe(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(wr(t,n,a)&&!i[Er(a)]){const n=new Xe([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Er(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Xe(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function wr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Er(t){return t.outlet||"primary"}function Or(t){return t.data||{}}function Cr(t){return t.resolve||{}}function Tr(t){return function(e){return e.pipe(he(e=>{const n=t(e);return n?Object(mt.a)(n).pipe(Object(Pt.a)(()=>e)):Object(mt.a)([e])}))}}class Sr{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Ir=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Fb(0,"router-outlet")},directives:function(){return[Br]},encapsulation:2}),t})();function xr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];jr(r,kr(e,r))}}function jr(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&xr(t.children,e)}function kr(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ar(t){const e=t.children&&t.children.map(Ar),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Ir),n}const Nr=new r.q("ROUTES");class Rr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Pt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Kn(Ke(r.injector.get(Nr)).map(Ar),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(mt.a)(this.loader.load(t)):$e(t()).pipe(Object(ae.a)(t=>t instanceof r.v?Object(vt.a)(t):Object(mt.a)(this.compiler.compileModuleAsync(t))))}}class Pr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dr,this.attachRef=null}}class Dr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Pr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Lr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Fr(t){throw t}function Ur(t,e,n){return e.parse("/")}function Mr(t,e){return Object(vt.a)(null)}let Hr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new bt.a,this.errorHandler=Fr,this.malformedUriErrorHandler=Ur,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Mr,afterPreactivation:Mr},this.urlHandlingStrategy=new Lr,this.routeReuseStrategy=new Sr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.W);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new Je(new Xe([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Rr(s,a,t=>this.triggerEvent(new Re(t)),t=>this.triggerEvent(new Pe(t))),this.routerState=Cn(this.currentUrlTree,this.rootComponentType),this.transitions=new wt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ut(t=>0!==t.id),Object(Pt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),he(t=>{let n=!1,r=!1;return Object(vt.a)(t).pipe(Object(ue.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),he(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(vt.a)(t).pipe(he(t=>{const n=this.transitions.getValue();return e.next(new Ce(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Nt.a:[t]}),he(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(he(t=>function(t,e,n,r,i){return new tr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Pt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(ue.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(ae.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new vr(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Pt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(ue.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(ue.a)(t=>{const n=new xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ce(n,this.serializeUrl(r),i,o);e.next(a);const u=Cn(r,this.rootComponentType).snapshot;return Object(vt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Nt.a}),Tr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ue.a)(t=>{const e=new je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Pt.a)(t=>Object.assign(Object.assign({},t),{guards:ar(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(ae.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(vt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(mt.a)(t).pipe(Object(ae.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(vt.a)(!0);const s=o.map(o=>{const s=ur(o,e,i);let a;if(function(t){return t&&Wn(t.canDeactivate)}(s))a=$e(s.canDeactivate(t,e,n,r));else{if(!Wn(s))throw new Error("Invalid CanDeactivate guard");a=$e(s(t,e,n,r))}return a.pipe(se())});return Object(vt.a)(s).pipe(hr())}(t.component,t.route,n,e,r)),se(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(ae.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(mt.a)(e).pipe(be(e=>Object(mt.a)([pr(e.route.parent,r),fr(e.route,r),gr(t,e.path,n),dr(t,e.route,n)]).pipe(Lt(),se(t=>!0!==t,!0))),se(t=>!0!==t,!0))}(r,o,t,e):Object(vt.a)(n)),Object(Pt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(ue.a)(t=>{if(Qn(t.guardsResult)){const e=Ve(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(ue.a)(t=>{const e=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ut(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Se(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Tr(t=>{if(t.guards.canActivateChecks.length)return Object(vt.a)(t).pipe(Object(ue.a)(t=>{const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),he(t=>{let n=!1;return Object(vt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(ae.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(vt.a)(t);let o=0;return Object(mt.a)(n).pipe(be(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(vt.a)({});const o={};return Object(mt.a)(i).pipe(Object(ae.a)(i=>function(t,e,n,r){const i=ur(t,e,r);return $e(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(ue.a)(t=>{o[i]=t}))),Vt(1),Object(ae.a)(()=>Object.keys(o).length===i.length?Object(vt.a)(o):Nt.a))}(t._resolve,t,e,r).pipe(Object(Pt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Sn(t,n).resolve),null)))}(t.route,e,r,i)),Object(ue.a)(()=>o++),Vt(1),Object(ae.a)(e=>o===n.length?Object(vt.a)(t):Nt.a))}))}),Object(ue.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Se(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(ue.a)(t=>{const e=new Ne(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Tr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Pt.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new wn(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Tn(new wt((i=n.value).url),new wt(i.params),new wt(i.queryParams),new wt(i.fragment),new wt(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new wn(r,o)}}var i}(t,e._root,n?n._root:void 0);return new On(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(ue.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Pt.a)(t=>(new zn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(ue.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Se(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new we(i))),te(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Qn(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Se(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ie(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Ah){t.reject(Ah)}}var i;return Nt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){xr(t),this.config=t.map(Ar),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.T)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Pn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Dn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Qe(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Dn(n,e,r)}(n);if(o.toRoot())return Pn(e.root,new Xe([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ln(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ln(t,t===e.root,0)}const r=Rn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ln(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Mn(s.segmentGroup,s.index,o.commands):Un(s.segmentGroup,s.index,o.commands);return Pn(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.T)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Qn(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(c_){e=this.malformedUriErrorHandler(c_,this.urlSerializer,t)}return e}isActive(t,e){if(Qn(t))return Ye(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ye(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Te(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,u;i?(s=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.M),r.Kb(nn),r.Kb(Dr),r.Kb(E),r.Kb(r.r),r.Kb(r.w),r.Kb(r.i),r.Kb(void 0))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),qr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new bt.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:Gr(this.skipLocationChange),replaceUrl:Gr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Gr(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Gr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Hr),r.Eb(Tn),r.Lb("tabindex"),r.Eb(r.D),r.Eb(r.l))},t.\u0275dir=r.zb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Nb("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.ub]}),t})(),Vr=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new bt.a,this.subscription=t.events.subscribe(t=>{t instanceof Te&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:Gr(this.skipLocationChange),replaceUrl:Gr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Gr(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Gr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Hr),r.Eb(Tn),r.Eb(v))},t.\u0275dir=r.zb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Nb("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(r.Jb("href",e.href,r.Yb),r.wb("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.ub]}),t})();function Gr(t){return""===t||!!t}let zr=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Te&&this.update()})}ngAfterContentInit(){Object(mt.a)([this.links.changes,this.linksWithHrefs.changes,Object(vt.a)(null)]).pipe(Object(Dt.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(mt.a)(e).pipe(Object(Dt.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Hr),r.Eb(r.l),r.Eb(r.D),r.Eb(r.h),r.Eb(qr,8),r.Eb(Vr,8))},t.\u0275dir=r.zb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var i;1&t&&(r.xb(n,qr,!0),r.xb(n,Vr,!0)),2&t&&(r.Vb(i=r.Ob())&&(e.links=i),r.Vb(i=r.Ob())&&(e.linksWithHrefs=i))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.ub]}),t})(),Br=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Kr(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Dr),r.Eb(r.P),r.Eb(r.j),r.Lb("name"),r.Eb(r.h))},t.\u0275dir=r.zb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Kr{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Tn?this.route:t===Dr?this.childContexts:this.parent.get(t,e)}}class Wr{}class Qr{preload(t,e){return Object(vt.a)(null)}}let $r=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Rr(e,n,e=>t.triggerEvent(new Re(e)),e=>t.triggerEvent(new Pe(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ut(t=>t instanceof Te),be(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(mt.a)(n).pipe(Object(Dt.a)(),Object(Pt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(ae.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Hr),r.Kb(r.w),r.Kb(r.i),r.Kb(r.r),r.Kb(Wr))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Yr=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ce?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Te&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Me&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Me(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Hr),r.Kb(M),r.Kb(void 0))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const Jr=new r.q("ROUTER_CONFIGURATION"),Xr=new r.q("ROUTER_FORROOT_GUARD"),Zr=[E,{provide:nn,useClass:rn},{provide:Hr,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Hr(null,t,e,n,r,i,o,Ke(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[nn,Dr,E,r.r,r.w,r.i,Nr,Jr,[class{},new r.A],[class{},new r.A]]},Dr,{provide:Tn,useFactory:function(t){return t.routerState.root},deps:[Hr]},{provide:r.w,useClass:r.J},$r,Qr,class{preload(t,e){return e().pipe(te(()=>Object(vt.a)(null)))}},{provide:Jr,useValue:{enableTracing:!1}}];function ti(){return new r.y("Router",Hr)}let ei=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Zr,oi(e),{provide:Xr,useFactory:ii,deps:[[Hr,new r.A,new r.I]]},{provide:Jr,useValue:n||{}},{provide:v,useFactory:ri,deps:[u,[new r.p(b),new r.A],Jr]},{provide:Yr,useFactory:ni,deps:[Hr,M,Jr]},{provide:Wr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Qr},{provide:r.y,multi:!0,useFactory:ti},[si,{provide:r.d,multi:!0,useFactory:ai,deps:[si]},{provide:ci,useFactory:ui,deps:[si]},{provide:r.b,multi:!0,useExisting:ci}]]}}static forChild(e){return{ngModule:t,providers:[oi(e)]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)(r.Kb(Xr,8),r.Kb(Hr,8))}}),t})();function ni(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Yr(t,e,n)}function ri(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function ii(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function oi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Nr,multi:!0,useValue:t}]}let si=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new bt.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Hr),r=this.injector.get(Jr);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(vt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Jr),n=this.injector.get($r),i=this.injector.get(Yr),o=this.injector.get(Hr),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.r))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();function ai(t){return t.appInitializer.bind(t)}function ui(t){return t.bootstrapListener.bind(t)}const ci=new r.q("Router Initializer");class li{}class hi{}class fi{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof fi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new fi;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof fi?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class pi{encodeKey(t){return di(t)}encodeValue(t){return di(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function di(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class gi{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new pi,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gi({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function yi(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function vi(t){return"undefined"!=typeof Blob&&t instanceof Blob}function mi(t){return"undefined"!=typeof FormData&&t instanceof FormData}class bi{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new fi),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new gi,this.urlWithParams=e}serializeBody(){return null===this.body?null:yi(this.body)||vi(this.body)||mi(this.body)||"string"==typeof this.body?this.body:this.body instanceof gi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mi(this.body)?null:vi(this.body)?this.body.type||null:yi(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new bi(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var _i=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class wi{constructor(t,e=200,n="OK"){this.headers=t.headers||new fi,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ei extends wi{constructor(t={}){super(t),this.type=_i.ResponseHeader}clone(t={}){return new Ei({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Oi extends wi{constructor(t={}){super(t),this.type=_i.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Oi({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ci extends wi{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Ti(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Si=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof bi)r=t;else{let i=void 0;i=n.headers instanceof fi?n.headers:new fi(n.headers);let o=void 0;n.params&&(o=n.params instanceof gi?n.params:new gi({fromObject:n.params})),r=new bi(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(vt.a)(r).pipe(be(t=>this.handler.handle(t)));if(t instanceof bi||"events"===n.observe)return i;const o=i.pipe(Ut(t=>t instanceof Oi));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Pt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Pt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Pt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Pt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new gi).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Ti(n,e))}post(t,e,n={}){return this.request("POST",t,Ti(n,e))}put(t,e,n={}){return this.request("PUT",t,Ti(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(li))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class Ii{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const xi=new r.q("HTTP_INTERCEPTORS");let ji=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const ki=/^\)\]\}',?\n/;class Ai{}let Ni=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Ri=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new Et.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new fi(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Ei({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(ki,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Oi({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Ci({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Ci({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:_i.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:_i.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:_i.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ai))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const Pi=new r.q("XSRF_COOKIE_NAME"),Di=new r.q("XSRF_HEADER_NAME");class Li{}let Fi=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=j(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(a),r.Kb(r.B),r.Kb(Pi))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Ui=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Li),r.Kb(Di))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Mi=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(xi,[]);this.chain=t.reduceRight((t,e)=>new Ii(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(hi),r.Kb(r.r))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Hi=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Ui,useClass:ji}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Pi,useValue:e.cookieName}:[],e.headerName?{provide:Di,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Ui,{provide:xi,useExisting:Ui,multi:!0},{provide:Li,useClass:Fi},{provide:Pi,useValue:"XSRF-TOKEN"},{provide:Di,useValue:"X-XSRF-TOKEN"}]}),t})(),qi=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Si,{provide:li,useClass:Mi},Ri,{provide:hi,useExisting:Ri},Ni,{provide:Ai,useExisting:Ni}],imports:[[Hi.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),Vi=(()=>{class t{constructor(t){this.http=t,this.cargando=!0,this.productos=[],this.productosFiltrado=[],this.cargarProductos()}cargarProductos(){return new Promise((t,e)=>{this.http.get("https://portafoliogyna-default-rtdb.firebaseio.com/productos_idx.json").subscribe(e=>{this.productos=e,this.cargando=!1,t()})})}getProducto(t){return this.http.get(`https://portafoliogyna-default-rtdb.firebaseio.com/productos/${t}.json`)}buscarProducto(t){0===this.productos.length?this.cargarProductos().then(()=>{this.filtrarProductos(t)}):this.filtrarProductos(t)}filtrarProductos(t){this.productosFiltrado=[],t=t.toLocaleLowerCase(),this.productos.forEach(e=>{const n=e.titulo.toLocaleLowerCase();(e.categoria.indexOf(t)>=0||n.indexOf(t))&&this.productosFiltrado.push(e)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Si))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Gi(t,e){1&t&&(r.Hb(0,"div",12),r.Hb(1,"h2"),r.bc(2,"Cargando..."),r.Gb(),r.Hb(3,"div",13),r.Qb(),r.Hb(4,"svg",14),r.Fb(5,"path",15),r.Hb(6,"path",16),r.Fb(7,"animateTransform",17),r.Gb(),r.Gb(),r.Gb(),r.Pb(),r.Hb(8,"p"),r.bc(9,"Espere por favor!"),r.Gb(),r.Gb())}const zi=function(t){return["/item",t]};function Bi(t,e){if(1&t&&(r.Hb(0,"a",18),r.Fb(1,"img",19),r.Hb(2,"div",20),r.Hb(3,"h2"),r.bc(4),r.Gb(),r.Hb(5,"p"),r.bc(6),r.Gb(),r.Gb(),r.Gb()),2&t){const t=e.$implicit;r.Sb("routerLink",r.Ub(4,zi,t.cod)),r.vb(1),r.Tb("src","assets/productos/",t.url,".jpg",r.Yb),r.vb(3),r.cc(t.titulo),r.vb(2),r.cc(t.categoria)}}const Ki=function(t){return{"background-image":t}};function Wi(t,e){if(1&t&&(r.Hb(0,"section",1),r.Hb(1,"header",2),r.Hb(2,"div",3),r.Hb(3,"h1",4),r.bc(4),r.Gb(),r.Hb(5,"p",5),r.bc(6),r.Gb(),r.Gb(),r.Gb(),r.Hb(7,"div",6),r.Hb(8,"div",7),r.Hb(9,"div",8),r.Hb(10,"h2",9),r.bc(11),r.Gb(),r.Gb(),r.Hb(12,"div",10),r.Hb(13,"p",11),r.Hb(14,"span",12),r.bc(15,"Client: "),r.Gb(),r.Hb(16,"span",13),r.bc(17,"Agency Design Studio"),r.Gb(),r.Gb(),r.Hb(18,"p",14),r.Hb(19,"a",15),r.bc(20,"www.agencydesign.com"),r.Gb(),r.Gb(),r.Hb(21,"p",16),r.bc(22," 12 August, 2015 "),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Hb(23,"div",17),r.Hb(24,"div",18),r.Hb(25,"div",19),r.Hb(26,"h4",13),r.bc(27),r.Gb(),r.Hb(28,"p",20),r.bc(29," A series of essential stationery format to showcase your branding projects. "),r.Gb(),r.Hb(30,"p",20),r.bc(31),r.Gb(),r.Gb(),r.Hb(32,"div",21),r.Fb(33,"img",22),r.Gb(),r.Gb(),r.Hb(34,"div",23),r.Hb(35,"div",24),r.Fb(36,"img",22),r.Gb(),r.Hb(37,"div",25),r.Hb(38,"p"),r.bc(39),r.Gb(),r.Hb(40,"p",26),r.bc(41," Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit "),r.Fb(42,"br"),r.bc(43,"in voluptate velit esse cillum dolore eu fugiat nulla pariatur. "),r.Gb(),r.Hb(44,"p",13),r.bc(45,"Right Box Small Text"),r.Gb(),r.Gb(),r.Gb(),r.Hb(46,"div",27),r.Hb(47,"div",28),r.Hb(48,"h4",13),r.bc(49,"Full Wide Text"),r.Gb(),r.Hb(50,"p",20),r.bc(51," Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),r.Gb(),r.Hb(52,"p",20),r.bc(53," Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis. "),r.Gb(),r.Gb(),r.Gb(),r.Hb(54,"div",23),r.Hb(55,"div",29),r.Fb(56,"img",30),r.Gb(),r.Gb(),r.Hb(57,"div",23),r.Hb(58,"div",31),r.Fb(59,"img",32),r.Gb(),r.Hb(60,"div",33),r.Hb(61,"h4",13),r.bc(62,"Right Box Text"),r.Gb(),r.Hb(63,"p",20),r.bc(64," Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit. "),r.Gb(),r.Hb(65,"p",20),r.bc(66," It includes a A6 flyer, A5 folder, A4 horizontal paper and a business card mockup. You can easily put your own graphics and create a new layout according to your needs. "),r.Gb(),r.Gb(),r.Gb(),r.Hb(67,"div",34),r.Hb(68,"div",35),r.Hb(69,"div",36),r.Hb(70,"div",37),r.Hb(71,"span",38),r.bc(72,"1."),r.Gb(),r.Hb(73,"p",39),r.bc(74," Suspendisse ultricies tellus eget nisl molestie, quis sagittis mauris placerat. "),r.Gb(),r.Hb(75,"span",38),r.bc(76,"2."),r.Gb(),r.Hb(77,"p",39),r.bc(78," Pellentesque et nulla pulvinar, bibendum quam ac, cursus turpis. "),r.Gb(),r.Gb(),r.Hb(79,"div",37),r.Hb(80,"span",38),r.bc(81,"3."),r.Gb(),r.Hb(82,"p",39),r.bc(83," Sed quam odio, blandit sit amet dapibus id, aliquet sollicitudin enim. "),r.Gb(),r.Hb(84,"span",38),r.bc(85,"4."),r.Gb(),r.Hb(86,"p",39),r.bc(87,"Morbi hendrerit laoreet lectus a fringilla."),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Hb(88,"div",40),r.Fb(89,"img",41),r.Gb(),r.Gb(),r.Gb(),r.Hb(90,"div",42),r.Hb(91,"div",43),r.Hb(92,"a",44),r.bc(93,"Next Project"),r.Hb(94,"span",45),r.Qb(),r.Hb(95,"svg"),r.Fb(96,"use",46),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Gb()),2&t){const t=r.Rb();r.vb(1),r.Sb("ngStyle",r.Ub(9,Ki,"url(assets/productos/"+t.id+"/main.jpg)")),r.vb(3),r.cc(t.producto.producto),r.vb(2),r.cc(t.producto.categoria),r.vb(5),r.dc(" ",t.producto.subtitulo1," "),r.vb(16),r.cc(t.producto.subtitulo1),r.vb(4),r.dc(" ",t.producto.desc1," "),r.vb(2),r.Tb("src","assets/productos/",t.id,"/pic-1.jpg",r.Yb),r.vb(3),r.Tb("src","assets/productos/",t.id,"/pic-2.jpg",r.Yb),r.vb(3),r.dc(" ",t.producto.desc2," ")}}const Qi=function(t){return["/item",t]};function $i(t,e){if(1&t&&(r.Hb(0,"a",2),r.Fb(1,"img",3),r.Hb(2,"div",4),r.Hb(3,"h2"),r.bc(4),r.Gb(),r.Hb(5,"p"),r.bc(6),r.Gb(),r.Gb(),r.Gb()),2&t){const t=e.$implicit;r.Sb("routerLink",r.Ub(4,Qi,t.cod)),r.vb(1),r.Tb("src","assets/productos/",t.url,".jpg",r.Yb),r.vb(3),r.cc(t.titulo),r.vb(2),r.cc(t.categoria)}}const Yi=[{path:"home",component:(()=>{class t{constructor(t){this.productosSvc=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Vi))},t.\u0275cmp=r.yb({type:t,selectors:[["app-portafolio"]],decls:18,vars:2,consts:[[1,"ae-container-fluid","ae-container-fluid--inner","rk-portfolio"],[1,"au-xs-ta-center","au-lg-ta-left"],[1,"rk-menu","rk-categories-menu"],[1,"rk-menu__item"],["href","portfolio.html",1,"rk-menu__link"],["href","portfolio-alt.html",1,"rk-menu__link"],["href","portfolio-raw.html",1,"rk-menu__link"],[1,"active","rk-menu__item"],["href","portfolio-masonry.html",1,"rk-menu__link"],["align","center",4,"ngIf"],[1,"ae-masonry","ae-masonry-md-2","ae-masonry-xl-4"],["class","rk-item ae-masonry__item",3,"routerLink",4,"ngFor","ngForOf"],["align","center"],["title","0",1,"loader","loader--style1"],["version","1.1","id","loader-1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","40px","height","40px","viewBox","0 0 40 40","enable-background","new 0 0 40 40",0,"xml","space","preserve"],["opacity","0.2","fill","#000","d","M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n      s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n      c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"],["fill","#000","d","M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n      C22.32,8.481,24.301,9.057,26.013,10.047z"],["attributeType","xml","attributeName","transform","type","rotate","from","0 20 20","to","360 20 20","dur","0.5s","repeatCount","indefinite"],[1,"rk-item","ae-masonry__item",3,"routerLink"],["alt","",3,"src"],[1,"item-meta"]],template:function(t,e){1&t&&(r.Hb(0,"section",0),r.Hb(1,"div",1),r.Hb(2,"ul",2),r.Hb(3,"li",3),r.Hb(4,"a",4),r.bc(5,"Flex"),r.Gb(),r.Gb(),r.Hb(6,"li",3),r.Hb(7,"a",5),r.bc(8,"Switch"),r.Gb(),r.Gb(),r.Hb(9,"li",3),r.Hb(10,"a",6),r.bc(11,"Static"),r.Gb(),r.Gb(),r.Hb(12,"li",7),r.Hb(13,"a",8),r.bc(14,"Masonry"),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.ac(15,Gi,10,0,"div",9),r.Hb(16,"div",10),r.ac(17,Bi,7,6,"a",11),r.Gb(),r.Gb()),2&t&&(r.vb(15),r.Sb("ngIf",e.productosSvc.cargando),r.vb(2),r.Sb("ngForOf",e.productosSvc.productos))},directives:[R,A,Vr],styles:["body[_ngcontent-%COMP%]{padding:1em;background:#fff;color:#777;text-align:center;font-family:Gill sans,sans-serif;width:80%;margin:0 auto}svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{fill:#000}"]}),t})()},{path:"about",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["app-about"]],decls:63,vars:0,consts:[[1,"ae-grid","au-xs-ta-center","au-mb-4"],[1,"animated","fadeIn","ae-grid__item","item-lg-4","ae-kappa","au-mb-3"],["src","assets/img/team-1.jpg","alt","",1,"au-mb-3"],[1,"ae-u-bolder","au-mt-2"],[1,"ae-u-bolder","au-mb-3"],[1,"au-lg-ta-left","au-mb-3","au-pl-4","au-pr-4"],["href","#0",1,"ae-u-bolder","au-underline"],["src","assets/img/team-2.jpg","alt","",1,"au-mb-3"],["src","assets/img/team-3.jpg","alt","",1,"au-mb-3"],[1,"ae-grid","au-pt-2"],[1,"ae-grid__item","item-lg-8","item-lg--offset-2"],[1,"ae-u-bolder"],[1,"ae-grid","ae-grid--alt","au-xs-ptp-1"],[1,"ae-grid__item--alt","item-lg-4"],[1,"ae-u-boldest"],[1,"au-lh-3"],[1,"au-flex","au-pt-4","group-buttons"],["href","portfolio.html",1,"au-mt-4","arrow-button","arrow-button--right","arrow-button--out"],[1,"arrow-cont"],[0,"xlink","href","assets/img/symbols.svg#arrow"]],template:function(t,e){1&t&&(r.Hb(0,"div",0),r.Hb(1,"div",1),r.Fb(2,"img",2),r.Hb(3,"h5",3),r.bc(4,"Robert T. Williams"),r.Gb(),r.Hb(5,"p",4),r.bc(6,"Graphic Designer"),r.Gb(),r.Hb(7,"p",5),r.bc(8," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor. "),r.Gb(),r.Hb(9,"a",6),r.bc(10,"@robertwilliams"),r.Gb(),r.Gb(),r.Hb(11,"div",1),r.Fb(12,"img",7),r.Hb(13,"h5",3),r.bc(14,"Angelina B. Widow"),r.Gb(),r.Hb(15,"p",4),r.bc(16,"Founder / CEO"),r.Gb(),r.Hb(17,"p",5),r.bc(18," Ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit. "),r.Gb(),r.Hb(19,"a",6),r.bc(20,"@angelinawidow"),r.Gb(),r.Gb(),r.Hb(21,"div",1),r.Fb(22,"img",8),r.Hb(23,"h5",3),r.bc(24,"Patrick Anderson"),r.Gb(),r.Hb(25,"p",4),r.bc(26,"Art Director"),r.Gb(),r.Hb(27,"p",5),r.bc(28," Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),r.Gb(),r.Hb(29,"a",6),r.bc(30,"@patrickanderson"),r.Gb(),r.Gb(),r.Gb(),r.Hb(31,"div",9),r.Hb(32,"div",10),r.Hb(33,"h4",11),r.bc(34,"Title example"),r.Gb(),r.Hb(35,"p"),r.bc(36," Totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur. "),r.Gb(),r.Gb(),r.Gb(),r.Hb(37,"div",12),r.Hb(38,"div",13),r.Hb(39,"h6",14),r.bc(40,"About Us"),r.Gb(),r.Hb(41,"p",15),r.bc(42," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "),r.Gb(),r.Gb(),r.Hb(43,"div",13),r.Hb(44,"h6",14),r.bc(45,"Our Mission"),r.Gb(),r.Hb(46,"p",15),r.bc(47," Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. "),r.Fb(48,"br"),r.bc(49,"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),r.Gb(),r.Gb(),r.Hb(50,"div",13),r.Hb(51,"h6",14),r.bc(52,"Our Clients"),r.Gb(),r.Hb(53,"p",15),r.bc(54," Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. "),r.Gb(),r.Hb(55,"p",15),r.bc(56,"Nemo enim ipsam voluptatem quia voluptas"),r.Gb(),r.Gb(),r.Gb(),r.Hb(57,"p",16),r.Hb(58,"a",17),r.bc(59,"View Our Portfolio"),r.Hb(60,"span",18),r.Qb(),r.Hb(61,"svg"),r.Fb(62,"use",19),r.Gb(),r.Gb(),r.Gb(),r.Gb())},styles:[""]}),t})()},{path:"item/:id",component:(()=>{class t{constructor(t,e){this.route=t,this.productoSvc=e}ngOnInit(){this.route.params.subscribe(t=>{this.productoSvc.getProducto(t.id).subscribe(e=>{this.id=t.id,this.producto=e})})}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Tn),r.Eb(Vi))},t.\u0275cmp=r.yb({type:t,selectors:[["app-item"]],decls:1,vars:1,consts:[["class","",4,"ngIf"],[1,""],[1,"rk-portfolio-cover","item-inside-1",3,"ngStyle"],[1,"item-inside__meta"],[1,"ae-u-bolder","rk-portfolio-title"],[1,"ae-theta","rk-portfolio-category"],[1,"ae-container-fluid"],[1,"ae-grid","ae-grid--collapse","rk-portfolio-info"],[1,"ae-grid__item","item-lg-8","item-sm--center","au-xs-ta-center","au-lg-ta-left"],[1,"rk-portfolio-inner-title"],[1,"ae-grid__item","item-lg-4","au-xs-ta-center","au-lg-ta-right","rk-portfolio-details"],[1,"rk-portfolio-inner-client"],[1,"ae-lambda"],[1,"ae-u-bolder"],[1,"au-underline","rk-portfolio-inner-website"],["href","#0",1,"ae-kappa"],[1,"ae-kappa","ae-u-bold","rk-portfolio-inner-date"],[1,"ae-container-fluid","ae-container-fluid--inner","rk-portfolio--inner"],[1,"ae-grid","ae-grid--collapse","au-xs-ptp-1"],[1,"ae-grid__item","item-lg-5","au-lg-ptp-1"],[1,"ae-eta"],[1,"ae-grid__item","item-lg-6","item-lg--offset-1"],["alt","Urku Portfolio",3,"src"],[1,"ae-grid","ae-grid--collapse"],[1,"ae-grid__item","item-lg-8"],[1,"ae-grid__item","item-lg-3","item-lg--offset-1","au-lg-ptp-1"],[1,"au-mb-3"],[1,"ae-grid","ae-grid--collapse","au-xs-ptp-1","au-xs-pbp-1"],[1,"ae-grid__item","item-lg-8","item-lg--offset-2"],[1,"ae-grid__item","item-lg--auto"],["src","assets/img/project-1.jpg","alt","Urku Portfolio"],[1,"ae-grid__item","item-lg-6"],["src","assets/img/inner-3.jpg","alt","Urku Portfolio"],[1,"ae-grid__item","item-lg-5","item-lg--offset-1","au-lg-ptp-1"],[1,"ae-grid--alt","test"],[1,"ae-grid__item--alt","item-sm--auto","item-sm--offset-1","item-lg--offset-0","item-sm--end","item-sm--bottom"],[1,"ae-grid","ae-grid--alt8","au-xs-ta-center","au-sm-ta-left"],[1,"ae-grid__item--alt8","item-lg-6"],[1,"ae-u-boldest"],[1,"au-mt-1"],[1,"ae-grid__item--alt","item-sm--auto","item-lg-3","item-lg--offset-1","item-lg--end"],["src","assets/img/inner-4.jpg","alt","Urku Portfolio"],[1,"ae-container-fluid","au-pt-4","au-pb-4"],[1,"group-buttons"],["href","#0",1,"au-mt-2","arrow-button","arrow-button--right"],[1,"arrow-cont"],[0,"xlink","href","assets/img/symbols.svg#arrow"]],template:function(t,e){1&t&&r.ac(0,Wi,97,11,"section",0),2&t&&r.Sb("ngIf",e.producto)},directives:[R,L],styles:[""]}),t})()},{path:"search/:termino",component:(()=>{class t{constructor(t,e){this.route=t,this.productoService=e}ngOnInit(){this.route.params.subscribe(t=>{console.log(t.termino),this.productoService.buscarProducto(t.termino)})}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Tn),r.Eb(Vi))},t.\u0275cmp=r.yb({type:t,selectors:[["app-search"]],decls:2,vars:1,consts:[[1,"ae-masonry","ae-masonry-md-2","ae-masonry-xl-4"],["class","rk-item ae-masonry__item",3,"routerLink",4,"ngFor","ngForOf"],[1,"rk-item","ae-masonry__item",3,"routerLink"],["alt","",3,"src"],[1,"item-meta"]],template:function(t,e){1&t&&(r.Hb(0,"div",0),r.ac(1,$i,7,6,"a",1),r.Gb()),2&t&&(r.vb(1),r.Sb("ngForOf",e.productoService.productosFiltrado))},directives:[A,Vr],styles:[""]}),t})()},{path:"**",pathMatch:"full",redirectTo:"home"}];let Ji=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},imports:[[ei.forRoot(Yi,{useHash:!0})],ei]}),t})(),Xi=(()=>{class t{constructor(t){this.http=t,this.info={},this.cargada=!1,this.http.get("assets/data/data-pagina.json").subscribe(t=>{this.cargada=!0,this.info=t,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Si))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zi=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}buscarProducto(t){t.length<1||this.router.navigate(["/search",t])}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Hr))},t.\u0275cmp=r.yb({type:t,selectors:[["app-header"]],decls:29,vars:0,consts:[[1,"ae-container-fluid","ae-container-fluid--full","rk-header"],["type","checkbox","id","mobile-menu",1,"rk-mobile-menu"],["for","mobile-menu"],[0,"xlink","href","assets/img/symbols.svg#bar"],[1,"ae-container-fluid","rk-topbar"],[1,"rk-logo"],["routerLink","home"],[1,"rk-navigation"],[1,"rk-menu"],["routerLinkActive","active",1,"rk-menu__item"],["routerLink","home",1,"rk-menu__link"],["routerLink","about",1,"rk-menu__link"],[1,"rk-search"],["type","text","placeholder","Buscar...","id","urku-search",1,"rk-search-field",3,"keyup.enter"],["txtBuscar",""],["for","urku-search"],[0,"xlink","href","assets/img/symbols.svg#icon-search"]],template:function(t,e){if(1&t){const t=r.Ib();r.Hb(0,"header",0),r.Fb(1,"input",1),r.Hb(2,"label",2),r.Qb(),r.Hb(3,"svg"),r.Fb(4,"use",3),r.Gb(),r.Hb(5,"svg"),r.Fb(6,"use",3),r.Gb(),r.Hb(7,"svg"),r.Fb(8,"use",3),r.Gb(),r.Gb(),r.Pb(),r.Hb(9,"div",4),r.Hb(10,"h1",5),r.Hb(11,"a",6),r.bc(12,"GYNA'S Coffee"),r.Hb(13,"sup"),r.bc(14,"tm"),r.Gb(),r.Gb(),r.Gb(),r.Hb(15,"nav",7),r.Hb(16,"ul",8),r.Hb(17,"li",9),r.Hb(18,"a",10),r.bc(19,"Home"),r.Gb(),r.Gb(),r.Hb(20,"li",9),r.Hb(21,"a",11),r.bc(22," Acerca de Nosotros"),r.Gb(),r.Gb(),r.Gb(),r.Hb(23,"div",12),r.Hb(24,"input",13,14),r.Nb("keyup.enter",(function(){r.Xb(t);const n=r.Wb(25);return e.buscarProducto(n.value)})),r.Gb(),r.Hb(26,"label",15),r.Qb(),r.Hb(27,"svg"),r.Fb(28,"use",16),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Gb()}},directives:[Vr,zr],styles:[""]}),t})(),to=(()=>{class t{constructor(){this.anio=(new Date).getFullYear()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["app-footer"]],decls:37,vars:1,consts:[[1,"ae-container-fluid","rk-footer"],[1,"ae-grid","ae-grid--collapse"],[1,"ae-grid__item","item-lg-4","au-xs-ta-center","au-lg-ta-left"],[1,"rk-menu","rk-footer-menu"],[1,"rk-menu__item"],["href","about.html",1,"rk-menu__link"],["href","documentation.html",1,"rk-menu__link"],["href","contact.html",1,"rk-menu__link"],[1,"rk-footer__text","rk-footer__copy"],[1,"ae-u-bold"],[1,"ae-u-bolder"],[1,"ae-grid__item","item-lg-4","au-xs-ta-center"],["href","#0",1,"rk-social-btn"],[0,"xlink","href","assets/img/symbols.svg#icon-facebook"],[0,"xlink","href","assets/img/symbols.svg#icon-pinterest"],[1,"ae-grid__item","item-lg-4","au-xs-ta-center","au-lg-ta-right"],[1,"rk-footer__text","rk-footer__contact"],["href","#0",1,"rk-dark-color"],[1,"rk-footer__text","rk-footer__by"],["href","http://pixeden.com",1,"ae-u-bolder"]],template:function(t,e){1&t&&(r.Hb(0,"footer",0),r.Hb(1,"div",1),r.Hb(2,"div",2),r.Hb(3,"ul",3),r.Hb(4,"li",4),r.Hb(5,"a",5),r.bc(6,"About"),r.Gb(),r.Gb(),r.Hb(7,"li",4),r.Hb(8,"a",6),r.bc(9,"Docs"),r.Gb(),r.Gb(),r.Hb(10,"li",4),r.Hb(11,"a",7),r.bc(12,"Contact"),r.Gb(),r.Gb(),r.Gb(),r.Hb(13,"p",8),r.Hb(14,"span",9),r.bc(15,"\xa9 "),r.Gb(),r.Hb(16,"span",10),r.bc(17),r.Gb(),r.bc(18,"All Right Reserved. "),r.Gb(),r.Gb(),r.Hb(19,"div",11),r.Hb(20,"a",12),r.Qb(),r.Hb(21,"svg"),r.Fb(22,"use",13),r.Gb(),r.Gb(),r.Pb(),r.Hb(23,"a",12),r.Qb(),r.Hb(24,"svg"),r.Fb(25,"use",14),r.Gb(),r.Gb(),r.Gb(),r.Pb(),r.Hb(26,"div",15),r.Hb(27,"p",16),r.Hb(28,"span",9),r.bc(29,"Email: "),r.Gb(),r.Hb(30,"span",10),r.Hb(31,"a",17),r.bc(32,"contact@urkuportfolio.com "),r.Gb(),r.Gb(),r.Gb(),r.Hb(33,"p",18),r.bc(34," Theme by "),r.Hb(35,"a",19),r.bc(36,"Pixeden."),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Gb()),2&t&&(r.vb(17),r.dc("",e.anio," URKU PORTFOLIO "))},styles:[""]}),t})(),eo=(()=>{class t{constructor(t,e){this.productosSvc=t,this.info_PaginaService=e}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Vi),r.Eb(Xi))},t.\u0275cmp=r.yb({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"ae-container-fluid","rk-main"]],template:function(t,e){1&t&&(r.Fb(0,"app-header"),r.Hb(1,"section",0),r.Fb(2,"router-outlet"),r.Gb(),r.Fb(3,"app-footer"))},directives:[Zi,Br,to],styles:[""]}),t})();var no=n("spgP"),ro=n("VRyK"),io=n("pxpQ"),oo=n("qgXg"),so=n("Ylt2");class ao extends bt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new uo(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new _t.a;if(this.isStopped||this.hasError?o=_e.a.EMPTY:(this.observers.push(t),o=new so.a(this,t)),r&&t.add(t=new io.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||oo.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class uo{constructor(t,e){this.time=t,this.value=e}}function co(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){s++,i&&!a||(a=!1,i=new ao(t,e,r),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}));const l=i.subscribe(this);this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function lo(t,e){return e?he(()=>t,e):he(()=>t)}var ho=n("tf+s");const fo=new r.q("angularfire2.auth.use-emulator"),po=new r.q("angularfire2.auth.settings"),go=new r.q("angularfire2.auth.tenant-id"),yo=new r.q("angularfire2.auth.langugage-code"),vo=new r.q("angularfire2.auth.use-device-language"),mo=new r.q("angularfire.auth.persistence");let bo=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new no.d(i),f=Object(no.h)(h),p=new bt.a,d=Object(vt.a)(void 0).pipe(Object(io.b)(h.outsideAngular),he(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Pt.a)(()=>Object(no.g)(t,i,e)),Object(Pt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(no.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),co({bufferSize:1,refCount:!1}));if(U(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(vt.a)(null);else{d.pipe(se()).subscribe();const t=d.pipe(he(t=>t.getRedirectResult().then(t=>t,()=>null)),f,co({bufferSize:1,refCount:!1})),e=t=>new Et.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=d.pipe(he(t=>e(t.onAuthStateChanged.bind(t)))),r=d.pipe(he(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(lo(n),Object(ho.a)(h.outsideAngular),Object(io.b)(h.insideAngular)),this.user=t.pipe(lo(r),Object(ho.a)(h.outsideAngular),Object(io.b)(h.insideAngular)),this.idToken=this.user.pipe(he(t=>t?Object(mt.a)(t.getIdToken()):Object(vt.a)(null))),this.idTokenResult=this.user.pipe(he(t=>t?Object(mt.a)(t.getIdTokenResult()):Object(vt.a)(null))),this.credential=Object(ro.a)(t,p,this.authState.pipe(Ut(t=>!t))).pipe(Object(Pt.a)(t=>(null==t?void 0:t.user)?t:null),Object(ho.a)(h.outsideAngular),Object(io.b)(h.insideAngular))}return Object(no.i)(this,d,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>p.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(no.c),r.Kb(no.b,8),r.Kb(r.B),r.Kb(r.z),r.Kb(fo,8),r.Kb(po,8),r.Kb(go,8),r.Kb(yo,8),r.Kb(vo,8),r.Kb(mo,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Kb)(no.c),Object(r.Kb)(no.b,8),Object(r.Kb)(r.B),Object(r.Kb)(r.z),Object(r.Kb)(fo,8),Object(r.Kb)(po,8),Object(r.Kb)(go,8),Object(r.Kb)(yo,8),Object(r.Kb)(vo,8),Object(r.Kb)(mo,8))},token:t,providedIn:"any"}),t})(),_o=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[bo]}),t})();var wo=n("D0XW"),Eo=n("w1tV");function Oo(t,e){return n=>n.lift(new Co(t,e))}class Co{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new To(t,this.compare,this.keySelector))}}class To extends Ft.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class So{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Io(t,this.observables,this.project))}}class Io extends St.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(It.a)(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class xo{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new jo(t,this.predicate))}}class jo extends Ft.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var ko=n("Jgta");function Ao(t){return null==t}function No(t){return"function"==typeof t.set}function Ro(t,e){return No(e)?e:t.ref(e)}function Po(t,e){if("string"==typeof t)return e.stringCase();if(No(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Do(t,e,n="on",r=wo.a){return new Et.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Pt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Eo.a)())}function Lo(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Fo(t,e){const{payload:n,prevKey:r,key:i}=e,o=Lo(t,i),s=function(t,e){if(Ao(e))return 0;{const n=Lo(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Uo(t){return(Ao(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Mo(t,e,n){return function(t,e,n){return Do(t,"value","once",n).pipe(he(r=>{const i=[Object(vt.a)(r)];return e.forEach(e=>i.push(Do(t,e,"on",n))),Object(ro.a)(...i).pipe(ye(Fo,[]))}),Oo())}(t,e=Uo(e),n)}function Ho(t,e,n){const r=(e=Uo(e)).map(e=>Do(t,e,"on",n));return Object(ro.a)(...r)}function qo(t,e){return function(n,r){return Po(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Vo(t,e){return function(){return Do(t,"value","on",e)}}const Go=new r.q("angularfire2.realtimeDatabaseURL"),zo=new r.q("angularfire2.database.use-emulator");let Bo=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new no.d(i),this.keepUnstableUntilFirst=Object(no.h)(this.schedulers);const a=o,u=Object(no.g)(t,i,e);!ko.a.auth&&s&&Object(no.j)(),this.database=Object(no.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Ro(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:qo(r,"update"),set:qo(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Po(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Mo(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Ho(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Do(t,"value","on",e).pipe(Object(Pt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new So(t,n))}}(e),Object(Pt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new xo(r))),Object(Pt.a)(t=>t.actions));var r}(t,Ho(t,e).pipe(ye((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Mo(t,r,n).pipe(Object(Pt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Ro(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Vo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Vo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Pt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(no.c),r.Kb(no.b,8),r.Kb(Go,8),r.Kb(r.B),r.Kb(r.z),r.Kb(zo,8),r.Kb(fo,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Kb)(no.c),Object(r.Kb)(no.b,8),Object(r.Kb)(Go,8),Object(r.Kb)(r.B),Object(r.Kb)(r.z),Object(r.Kb)(zo,8),Object(r.Kb)(fo,8))},token:t,providedIn:"any"}),t})(),Ko=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Bo]}),t})();function Wo(){return t=>t.lift(new Qo)}class Qo{call(t,e){return e.subscribe(new $o(t))}}class $o extends Ft.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Yo=n("zIRd"),Jo=n("q/0M"),Xo=n("qOnz"),Zo=function(t,e){return(Zo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ts(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var es,ns="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rs=rs||{},is=ns||self;function os(){}function ss(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function as(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var us="closure_uid_"+(1e9*Math.random()>>>0),cs=0;function ls(t,e,n){return t.call.apply(t.bind,arguments)}function hs(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function fs(t,e,n){return(fs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ls:hs).apply(null,arguments)}function ps(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ds(){return Date.now()}function gs(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ys(){this.j=this.j,this.i=this.i}ys.prototype.j=!1,ys.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,us)&&t[us]||(t[us]=++cs)}(this)},ys.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var vs=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ms=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function bs(t){return Array.prototype.concat.apply([],arguments)}function _s(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ws(t){return/^[\s\xa0]*$/.test(t)}var Es,Os=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Cs(t,e){return-1!=t.indexOf(e)}function Ts(t,e){return t<e?-1:t>e?1:0}t:{var Ss=is.navigator;if(Ss){var Is=Ss.userAgent;if(Is){Es=Is;break t}}Es=""}function xs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function js(t){var e={};for(var n in t)e[n]=t[n];return e}var ks="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function As(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ks.length;o++)n=ks[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ns(t){return Ns[" "](t),t}Ns[" "]=os;var Rs,Ps,Ds=Cs(Es,"Opera"),Ls=Cs(Es,"Trident")||Cs(Es,"MSIE"),Fs=Cs(Es,"Edge"),Us=Fs||Ls,Ms=Cs(Es,"Gecko")&&!(Cs(Es.toLowerCase(),"webkit")&&!Cs(Es,"Edge"))&&!(Cs(Es,"Trident")||Cs(Es,"MSIE"))&&!Cs(Es,"Edge"),Hs=Cs(Es.toLowerCase(),"webkit")&&!Cs(Es,"Edge");function qs(){var t=is.document;return t?t.documentMode:void 0}t:{var Vs="",Gs=(Ps=Es,Ms?/rv:([^\);]+)(\)|;)/.exec(Ps):Fs?/Edge\/([\d\.]+)/.exec(Ps):Ls?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ps):Hs?/WebKit\/(\S+)/.exec(Ps):Ds?/(?:Version)[ \/]?(\S+)/.exec(Ps):void 0);if(Gs&&(Vs=Gs?Gs[1]:""),Ls){var zs=qs();if(null!=zs&&zs>parseFloat(Vs)){Rs=String(zs);break t}}Rs=Vs}var Bs={};function Ks(t){return function(t,e){var n=Bs;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Os(String(Rs)).split("."),r=Os(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Ts(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Ts(0==s[2].length,0==a[2].length)||Ts(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var Ws=is.document&&Ls&&(qs()||parseInt(Rs,10))||void 0,Qs=!Ls||9<=Number(Ws),$s=Ls&&!Ks("9"),Ys=function(){if(!is.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{is.addEventListener("test",os,e),is.removeEventListener("test",os,e)}catch(n){}return t}();function Js(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Xs(t,e){if(Js.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ms){t:{try{Ns(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Js.prototype.b=function(){this.defaultPrevented=!0},gs(Xs,Js);var Zs={2:"touch",3:"pen",4:"mouse"};Xs.prototype.b=function(){Xs.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$s)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ta="closure_listenable_"+(1e6*Math.random()|0),ea=0;function na(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ea,this.Y=this.Z=!1}function ra(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ia(t){this.src=t,this.a={},this.b=0}function oa(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=vs(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ra(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function sa(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ia.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sa(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new na(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var aa="closure_lm_"+(1e6*Math.random()|0),ua={};function ca(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=va(r),e&&e[ta]?e.wa(n,r,as(i)?!!i.capture:!!i,o):la(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ca(t,e[o],n,r,i);return null}return n=va(n),t&&t[ta]?t.va(e,n,as(r)?!!r.capture:!!r,i):la(t,e,n,!1,r,i)}function la(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=as(i)?!!i.capture:!!i;if(s&&!Qs)return null;var a=ga(t);if(a||(t[aa]=a=new ia(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=da,e=Qs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ys||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fa(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ha(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ta])oa(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fa(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ga(e))?(oa(n,t),0==n.b&&(n.src=null,e[aa]=null)):ra(t)}}}function fa(t){return t in ua?ua[t]:ua[t]="on"+t}function pa(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ha(t),n.call(r,e)}function da(t,e){if(t.Y)return!0;if(!Qs){if(!e)t:{e=["window","event"];for(var n=is,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return pa(t,e=new Xs(e,this))}return pa(t,new Xs(e,this))}function ga(t){return(t=t[aa])instanceof ia?t:null}var ya="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(t){return"function"==typeof t?t:(t[ya]||(t[ya]=function(e){return t.handleEvent(e)}),t[ya])}function ma(){ys.call(this),this.c=new ia(this),this.J=this,this.C=null}function ba(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Js(e,t);else if(e instanceof Js)e.target=e.target||t;else{var i=e;As(e=new Js(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=_a(s,r,!0,e)&&i}if(i=_a(s=e.a=t,r,!0,e)&&i,i=_a(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=_a(s=e.a=n[o],r,!1,e)&&i}function _a(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&oa(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}gs(ma,ys),ma.prototype[ta]=!0,(es=ma.prototype).addEventListener=function(t,e,n,r){ca(this,t,e,n,r)},es.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=as(i)?!!i.capture:!!i,r=va(r),e&&e[ta]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=sa(s=e.a[n],r,i,o))&&(ra(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=ga(e))&&(n=e.a[n.toString()],e=-1,n&&(e=sa(n,r,i,o)),(r=-1<e?n[e]:null)&&ha(r))}(this,t,e,n,r)},es.G=function(){if(ma.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ra(n[r]);delete e.a[t],e.b--}}this.C=null},es.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},es.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var wa=is.JSON.stringify;function Ea(){this.b=this.a=null}var Oa,Ca=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Sa}),(function(t){t.reset()}));function Ta(){var t=ka,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Sa(){this.next=this.b=this.a=null}function Ia(t){is.setTimeout((function(){throw t}),0)}function xa(t,e){Oa||function(){var t=is.Promise.resolve(void 0);Oa=function(){t.then(Aa)}}(),ja||(Oa(),ja=!0),ka.add(t,e)}Ea.prototype.add=function(t,e){var n=Ca.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Sa.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Sa.prototype.reset=function(){this.next=this.b=this.a=null};var ja=!1,ka=new Ea;function Aa(){for(var t;t=Ta();){try{t.a.call(t.b)}catch(n){Ia(n)}var e=Ca;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ja=!1}function Na(t,e){ma.call(this),this.b=t||1,this.a=e||is,this.f=fs(this.Za,this),this.g=ds()}function Ra(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Pa(t,e,n){if("function"==typeof t)n&&(t=fs(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=fs(t.handleEvent,t)}return 2147483647<Number(e)?-1:is.setTimeout(t,e||0)}function Da(t){t.a=Pa((function(){t.a=null,t.c&&(t.c=!1,Da(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}gs(Na,ma),(es=Na.prototype).aa=!1,es.M=null,es.Za=function(){if(this.aa){var t=ds()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ba(this,"tick"),this.aa&&(Ra(this),this.start()))}},es.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ds())},es.G=function(){Na.X.G.call(this),Ra(this),delete this.a};var La=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Zo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Da(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(is.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ys);function Fa(t){ys.call(this),this.b=t,this.a={}}gs(Fa,ys);var Ua=[];function Ma(t,e,n,r){Array.isArray(n)||(n&&(Ua[0]=n.toString()),n=Ua);for(var i=0;i<n.length;i++){var o=ca(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ha(t){xs(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ha(t)}),t),t.a={}}function qa(){this.a=!0}function Va(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return wa(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Fa.prototype.G=function(){Fa.X.G.call(this),Ha(this)},Fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qa.prototype.info=function(){};var Ga={},za=null;function Ba(){return za=za||new ma}function Ka(t){Js.call(this,Ga.Fa,t)}function Wa(t){var e=Ba();ba(e,new Ka(e,t))}function Qa(t,e){Js.call(this,Ga.STAT_EVENT,t),this.stat=e}function $a(t){var e=Ba();ba(e,new Qa(e,t))}function Ya(t){Js.call(this,Ga.Ga,t)}function Ja(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return is.setTimeout((function(){t()}),e)}Ga.Fa="serverreachability",gs(Ka,Js),Ga.STAT_EVENT="statevent",gs(Qa,Js),Ga.Ga="timingevent",gs(Ya,Js);var Xa={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Za={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function tu(){}function eu(){}tu.prototype.a=null;var nu,ru={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function iu(){Js.call(this,"d")}function ou(){Js.call(this,"c")}function su(){}function au(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Fa(this),this.P=uu,this.R=new Na(t=Us?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}gs(iu,Js),gs(ou,Js),gs(su,tu),nu=new su;var uu=45e3,cu={},lu={};function hu(t,e,n){t.H=1,t.i=Ru(Iu(e)),t.j=n,t.I=!0,fu(t,null)}function fu(t,e){t.u=ds(),gu(t),t.l=Iu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ku(n.b,"t",r),t.D=0,t.a=Hc(t.g,t.g.C?e:null),0<t.O&&(t.F=new La(fs(t.Ca,t,t.a),t.O)),Ma(t.J,t.a,"readystatechange",t.Xa),e=t.B?js(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Wa(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function pu(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=du(t,n);if(i==lu){4==e&&(t.h=4,$a(14),r=!1),Va(t.c,t.f,null,"[Incomplete Response]");break}if(i==cu){t.h=4,$a(15),Va(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Va(t.c,t.f,i,null),_u(t,i)}4==e&&0==n.length&&(t.h=1,$a(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Nc(e),e.F=!0,$a(11))):(Va(t.c,t.f,n,"[Invalid Chunked Response]"),bu(t),mu(t))}function du(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?lu:(n=Number(e.substring(n,r)),isNaN(n)?cu:(r+=1)+n>e.length?lu:(e=e.substr(r,n),t.D=r+n,e))}function gu(t){t.T=ds()+t.P,yu(t,t.P)}function yu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ja(fs(t.Va,t),e)}function vu(t){t.o&&(is.clearTimeout(t.o),t.o=null)}function mu(t){0==t.g.v||t.A||Dc(t.g,t)}function bu(t){vu(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ra(t.R),Ha(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function _u(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Zu(n.b,t)))if(n.I=t.N,!t.C&&Zu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Eb){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Pc(n),Oc(n)}Ac(n),$a(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ja(fs(n.Sa,n),6e3));if(1>=Xu(n.b)&&n.ea){try{n.ea()}catch(Eb){}n.ea=void 0}}else Fc(n,11)}else if((t.C||n.a==t)&&Pc(n),!ws(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Cs(l,"spdy")||Cs(l,"quic")||Cs(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(tc(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Nu(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ds()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Mc(u,u.C?u.ga:null,u.fa),p.C){ec(u.b,p);var d=p,g=u.D;g&&d.setTimeout(g),d.o&&(vu(d),gu(d)),u.a=p}else kc(u);0<n.g.length&&Sc(n)}else"stop"!=i[0]&&"close"!=i[0]||Fc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Fc(n,7):Ec(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Wa(4)}catch(Eb){}}function wu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ss(t)||"string"==typeof t)ms(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ss(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ss(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Eu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Eu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ou(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Cu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Cu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Cu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(es=au.prototype).setTimeout=function(t){this.P=t},es.Xa=function(t){t=t.target;var e=this.F;e&&3==mc(t)?e.f():this.Ca(t)},es.Ca=function(t){try{if(t==this.a)t:{var e=mc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Us&&!this.a.$())){this.A||4!=e||7==n||Wa(8==n||0>=r?3:2),vu(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ws(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,$a(12),bu(this),mu(this);break t}Va(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,_u(this,u)}this.I?(pu(this,e,o),Us&&this.b&&3==e&&(Ma(this.J,this.R,"tick",this.Wa),this.R.start())):(Va(this.c,this.f,o,null),_u(this,o)),4==e&&bu(this),this.b&&!this.A&&(4==e?Dc(this.g,this):(this.b=!1,gu(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,$a(12)):(this.h=0,$a(13)),bu(this),mu(this)}}}catch(c){}},es.Wa=function(){if(this.a){var t=mc(this.a),e=this.a.$();this.D<e.length&&(vu(this),pu(this,t,e),this.b&&4!=t&&gu(this))}},es.cancel=function(){this.A=!0,bu(this)},es.Va=function(){this.o=null;var t=ds();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Wa(3),$a(17)),bu(this),this.h=2,mu(this)):yu(this,this.T-t)},(es=Eu.prototype).K=function(){Ou(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},es.L=function(){return Ou(this),this.a.concat()},es.get=function(t,e){return Cu(this.b,t)?this.b[t]:e},es.set=function(t,e){Cu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},es.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Tu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Su(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Su){this.a=void 0!==e?e:t.a,xu(this,t.f),this.j=t.j,ju(this,t.c),ku(this,t.h),this.g=t.g,e=t.b;var n=new Vu;n.c=e.c,e.a&&(n.a=new Eu(e.a),n.b=e.b),Au(this,n),this.i=t.i}else t&&(n=String(t).match(Tu))?(this.a=!!e,xu(this,n[1]||"",!0),this.j=Pu(n[2]||""),ju(this,n[3]||"",!0),ku(this,n[4]),this.g=Pu(n[5]||"",!0),Au(this,n[6]||"",!0),this.i=Pu(n[7]||"")):(this.a=!!e,this.b=new Vu(null,this.a))}function Iu(t){return new Su(t)}function xu(t,e,n){t.f=n?Pu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ju(t,e,n){t.c=n?Pu(e,!0):e}function ku(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Au(t,e,n){e instanceof Vu?(t.b=e,function(t,e){e&&!t.f&&(Gu(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(zu(this,e),Ku(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Du(e,Hu)),t.b=new Vu(e,t.a))}function Nu(t,e,n){t.b.set(e,n)}function Ru(t){return Nu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ds()).toString(36)),t}function Pu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Du(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Lu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Lu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Su.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Du(e,Fu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Du(e,Fu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Du(n,"/"==n.charAt(0)?Mu:Uu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Du(n,qu)),t.join("")};var Fu=/[#\/\?@]/g,Uu=/[#\?:]/g,Mu=/[#\?]/g,Hu=/[#\?@]/g,qu=/#/g;function Vu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Gu(t){t.a||(t.a=new Eu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function zu(t,e){Gu(t),e=Wu(t,e),Cu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ou(t)))}function Bu(t,e){return Gu(t),e=Wu(t,e),Cu(t.a.b,e)}function Ku(t,e,n){zu(t,e),0<n.length&&(t.c=null,t.a.set(Wu(t,e),_s(n)),t.b+=n.length)}function Wu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(es=Vu.prototype).add=function(t,e){Gu(this),this.c=null,t=Wu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},es.forEach=function(t,e){Gu(this),this.a.forEach((function(n,r){ms(n,(function(n){t.call(e,n,r,this)}),this)}),this)},es.L=function(){Gu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},es.K=function(t){Gu(this);var e=[];if("string"==typeof t)Bu(this,t)&&(e=bs(e,this.a.get(Wu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=bs(e,t[n])}return e},es.set=function(t,e){return Gu(this),this.c=null,Bu(this,t=Wu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},es.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},es.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Qu=function(){return function(t,e){this.b=t,this.a=e}}();function $u(t){this.g=t||Yu,t=is.PerformanceNavigationTiming?0<(t=is.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(is.ia&&is.ia.ya&&is.ia.ya()&&is.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Yu=10;function Ju(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Xu(t){return t.b?1:t.a?t.a.size:0}function Zu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function tc(t,e){t.a?t.a.add(e):t.b=e}function ec(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function nc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ts(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return _s(t.c)}function rc(){}function ic(){this.a=new rc}function oc(t,e,n){var r=n||"";try{wu(t,(function(t,n){var i=t;as(t)&&(i=wa(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(c_){throw e.push(r+"type="+encodeURIComponent("_badmap")),c_}}function sc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}$u.prototype.cancel=function(){var t,e;if(this.c=nc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ts(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},rc.prototype.stringify=function(t){return is.JSON.stringify(t,void 0)},rc.prototype.parse=function(t){return is.JSON.parse(t,void 0)};var ac=is.JSON.parse;function uc(t){ma.call(this),this.headers=new Eu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=cc,this.D=this.F=!1}gs(uc,ma);var cc="",lc=/^https?$/i,hc=["POST","PUT"];function fc(t){return"content-type"==t.toLowerCase()}function pc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,dc(t),yc(t)}function dc(t){t.u||(t.u=!0,ba(t,"complete"),ba(t,"error"))}function gc(t){if(t.b&&void 0!==rs&&(!t.s[1]||4!=mc(t)||2!=t.W()))if(t.l&&4==mc(t))Pa(t.za,0,t);else if(ba(t,"readystatechange"),4==mc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Tu)[1]||null;if(!o&&is.self&&is.self.location){var s=is.self.location.protocol;o=s.substr(0,s.length-1)}i=!lc.test(o?o.toLowerCase():"")}e=i}if(e)ba(t,"complete"),ba(t,"success");else{t.h=6;try{var a=2<mc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",dc(t)}}finally{yc(t)}}}function yc(t,e){if(t.a){vc(t);var n=t.a,r=t.s[0]?os:null;t.a=null,t.s=null,e||ba(t,"ready");try{n.onreadystatechange=r}catch(c_){}}}function vc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(is.clearTimeout(t.m),t.m=null)}function mc(t){return t.a?t.a.readyState:0}function bc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return xs(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Nu(t,e,n))}function _c(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wc(t){this.pa=0,this.g=[],this.c=new qa,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=_c("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=_c("baseRetryDelayMs",5e3,t),this.Ra=_c("retryDelaySeedMs",1e4,t),this.Ma=_c("forwardChannelMaxRetries",2,t),this.ma=_c("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new $u(t&&t.concurrentRequestLimit),this.ka=new ic,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ec(t){if(Cc(t),3==t.v){var e=t.R++,n=Iu(t.B);Nu(n,"SID",t.J),Nu(n,"RID",e),Nu(n,"TYPE","terminate"),xc(t,n),(e=new au(t,t.c,e,void 0)).H=2,e.i=Ru(Iu(n)),n=!1,is.navigator&&is.navigator.sendBeacon&&(n=is.navigator.sendBeacon(e.i.toString(),"")),!n&&is.Image&&((new Image).src=e.i,n=!0),n||(e.a=Hc(e.g,null),e.a.ba(e.i)),e.u=ds(),gu(e)}Uc(t)}function Oc(t){t.a&&(Nc(t),t.a.cancel(),t.a=null)}function Cc(t){Oc(t),t.j&&(is.clearTimeout(t.j),t.j=null),Pc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&is.clearTimeout(t.h),t.h=null)}function Tc(t,e){t.g.push(new Qu(t.Oa++,e)),3==t.v&&Sc(t)}function Sc(t){Ju(t.b)||t.h||(t.h=!0,xa(t.Ba,t),t.u=0)}function Ic(t,e){var n;n=e?e.f:t.R++;var r=Iu(t.B);Nu(r,"SID",t.J),Nu(r,"RID",n),Nu(r,"AID",t.P),xc(t,r),t.i&&t.l&&bc(r,t.i,t.l),n=new au(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=jc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),tc(t.b,n),hu(n,r,e)}function xc(t,e){t.f&&wu({},(function(t,n){Nu(e,n,t)}))}function jc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?fs(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{oc(l,s,"req"+c+"_")}catch(El){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function kc(t){t.a||t.j||(t.T=1,xa(t.Aa,t),t.o=0)}function Ac(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ja(fs(t.Aa,t),Lc(t,t.o)),t.o++,0))}function Nc(t){null!=t.s&&(is.clearTimeout(t.s),t.s=null)}function Rc(t){t.a=new au(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Iu(t.la);Nu(e,"RID","rpc"),Nu(e,"SID",t.J),Nu(e,"CI",t.H?"0":"1"),Nu(e,"AID",t.P),xc(t,e),Nu(e,"TYPE","xmlhttp"),t.i&&t.l&&bc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ru(Iu(e)),n.j=null,n.I=!0,fu(n,t)}function Pc(t){null!=t.m&&(is.clearTimeout(t.m),t.m=null)}function Dc(t,e){var n=null;if(t.a==e){Pc(t),Nc(t),t.a=null;var r=2}else{if(!Zu(t.b,e))return;n=e.s,ec(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ds()-e.u;var i=t.u;ba(r=Ba(),new Ya(r,n,e,i)),Sc(t)}else kc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Xu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ja(fs(t.Ba,t,e),Lc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ac(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Fc(t,5);break;case 4:Fc(t,10);break;case 3:Fc(t,6);break;default:Fc(t,2)}}function Lc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Fc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=fs(t.Ya,t);n||(n=new Su("//www.google.com/images/cleardot.gif"),is.location&&"http"==is.location.protocol||xu(n,"https"),Ru(n)),function(t,e){var n=new qa;if(is.Image){var r=new Image;r.onload=ps(sc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ps(sc,n,r,"TestLoadImage: error",!1,e),r.onabort=ps(sc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ps(sc,n,r,"TestLoadImage: timeout",!1,e),is.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else $a(2);t.v=0,t.f&&t.f.ra(e),Uc(t),Cc(t)}function Uc(t){t.v=0,t.I=-1,t.f&&(0==nc(t.b).length&&0==t.g.length||(t.b.c.length=0,_s(t.g),t.g.length=0),t.f.qa())}function Mc(t,e,n){var r=function(t){return t instanceof Su?Iu(t):new Su(t,void 0)}(n);if(""!=r.c)e&&ju(r,e+"."+r.c),ku(r,r.h);else{var i=is.location;r=function(t,e,n,r){var i=new Su(null,void 0);return t&&xu(i,t),e&&ju(i,e),n&&ku(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&xs(t.V,(function(t,e){Nu(r,e,t)})),n=t.na,(e=t.A)&&n&&Nu(r,e,n),Nu(r,"VER",t.ha),xc(t,r),r}function Hc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new uc(t.Na)).F=t.C,e}function qc(){}function Vc(){if(Ls&&!(10<=Number(Ws)))throw Error("Environmental error: no available transport.")}function Gc(t,e){ma.call(this),this.a=new wc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ws(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ws(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Kc(this)}function zc(t){iu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Bc(){ou.call(this),this.status=1}function Kc(t){this.a=t}(es=uc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:nu),this.a.onreadystatechange=fs(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void pc(this,o)}t=n||"";var i=new Eu(this.headers);r&&wu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=fc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=is.FormData&&t instanceof is.FormData,!(0<=vs(hc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{vc(this),0<this.o&&((this.D=function(t){return Ls&&Ks(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=fs(this.xa,this)):this.m=Pa(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){pc(this,o)}},es.xa=function(){void 0!==rs&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ba(this,"timeout"),this.abort(8))},es.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ba(this,"complete"),ba(this,"abort"),yc(this))},es.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yc(this,!0)),uc.X.G.call(this)},es.za=function(){this.j||(this.A||this.l||this.g?gc(this):this.Ua())},es.Ua=function(){gc(this)},es.W=function(){try{return 2<mc(this)?this.a.status:-1}catch(Ps){return-1}},es.$=function(){try{return this.a?this.a.responseText:""}catch(Ps){return""}},es.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ac(e)}},es.ua=function(){return this.h},es.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(es=wc.prototype).ha=8,es.v=1,es.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new au(this,this.c,t,void 0),r=this.l;if(this.O&&(r?As(r=js(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=jc(this,n,e),Nu(i=Iu(this.B),"RID",t),Nu(i,"CVER",22),this.A&&Nu(i,"X-HTTP-Session-Id",this.A),xc(this,i),this.i&&r&&bc(i,this.i,r),tc(this.b,n),this.Ia&&Nu(i,"TYPE","init"),this.da?(Nu(i,"$req",e),Nu(i,"SID","null"),n.U=!0,hu(n,i,null)):hu(n,i,e),this.v=2}}else 3==this.v&&(t?Ic(this,t):0==this.g.length||Ju(this.b)||Ic(this))},es.Aa=function(){if(this.j=null,Rc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ja(fs(this.Ta,this),t)}},es.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,$a(10),Oc(this),Rc(this))},es.Sa=function(){null!=this.m&&(this.m=null,Oc(this),Ac(this),$a(19))},es.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),$a(2)):(this.c.info("Failed to ping google.com"),$a(1))},(es=qc.prototype).ta=function(){},es.sa=function(){},es.ra=function(){},es.qa=function(){},es.Ja=function(){},Vc.prototype.a=function(t,e){return new Gc(t,e)},gs(Gc,ma),Gc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;$a(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Mc(t,null,t.fa),Sc(t)},Gc.prototype.close=function(){Ec(this.a)},Gc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Tc(this.a,e)}else this.l?((e={}).__data__=wa(t),Tc(this.a,e)):Tc(this.a,t)},Gc.prototype.G=function(){this.a.f=null,delete this.f,Ec(this.a),delete this.a,Gc.X.G.call(this)},gs(zc,iu),gs(Bc,ou),gs(Kc,qc),Kc.prototype.ta=function(){ba(this.a,"a")},Kc.prototype.sa=function(t){ba(this.a,new zc(t))},Kc.prototype.ra=function(t){ba(this.a,new Bc(t))},Kc.prototype.qa=function(){ba(this.a,"b")},Vc.prototype.createWebChannel=Vc.prototype.a,Gc.prototype.send=Gc.prototype.h,Gc.prototype.open=Gc.prototype.g,Gc.prototype.close=Gc.prototype.close,Xa.NO_ERROR=0,Xa.TIMEOUT=8,Xa.HTTP_ERROR=6,Za.COMPLETE="complete",eu.EventType=ru,ru.OPEN="a",ru.CLOSE="b",ru.ERROR="c",ru.MESSAGE="d",ma.prototype.listen=ma.prototype.va,uc.prototype.listenOnce=uc.prototype.wa,uc.prototype.getLastError=uc.prototype.Qa,uc.prototype.getLastErrorCode=uc.prototype.ua,uc.prototype.getStatus=uc.prototype.W,uc.prototype.getResponseJson=uc.prototype.Pa,uc.prototype.getResponseText=uc.prototype.$,uc.prototype.send=uc.prototype.ba;var Wc=Xa,Qc=Za,$c=Ga,Yc=eu,Jc=uc,Xc=n("uXP2"),Zc=new Jo.b("@firebase/firestore");function tl(){return Zc.logLevel}function el(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zc.logLevel<=Jo.a.DEBUG){var r=e.map(il);Zc.debug.apply(Zc,Object(Xc.g)(["Firestore (8.2.2): "+t],r))}}function nl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zc.logLevel<=Jo.a.ERROR){var r=e.map(il);Zc.error.apply(Zc,Object(Xc.g)(["Firestore (8.2.2): "+t],r))}}function rl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zc.logLevel<=Jo.a.WARN){var r=e.map(il);Zc.warn.apply(Zc,Object(Xc.g)(["Firestore (8.2.2): "+t],r))}}function il(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(c_){return t}}function ol(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.2) INTERNAL ASSERTION FAILED: "+t;throw nl(e),new Error(e)}function sl(t,e){t||ol()}function al(t,e){return t}function ul(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var cl=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ul(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ll(t,e){return t<e?-1:t>e?1:0}function hl(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function fl(t){return t+"\0"}var pl=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return ll(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();pl.h=new pl("");var dl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Xc.c)(e,t),e}(Error),yl=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(pl.fromBase64String(e))}catch(e){throw new gl(dl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(pl.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),vl=function(t){this._=t};function ml(){if("undefined"==typeof Uint8Array)throw new gl(dl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function bl(){if("undefined"==typeof atob)throw new gl(dl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var _l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.fromBase64String=function(t){return bl(),new e(yl.fromBase64String(t))},e.fromUint8Array=function(t){return ml(),new e(yl.fromUint8Array(t))},e.prototype.toBase64=function(){return bl(),this._.toBase64()},e.prototype.toUint8Array=function(){return ml(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(vl),wl=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},El=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ol=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ol.UNAUTHENTICATED=new Ol(null),Ol.P=new Ol("google-credentials-uid"),Ol.g=new Ol("first-party-uid");var Cl=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},Tl=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(Ol.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),Sl=function(){function t(t){var e=this;this.C=null,this.currentUser=Ol.UNAUTHENTICATED,this.N=!1,this.O=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.O++,e.currentUser=e.F(),e.N=!0,e.p&&e.p(e.currentUser)},this.O=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.O,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.O!==e?(el("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(sl("string"==typeof n.accessToken),new Cl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.F=function(){var t=this.auth&&this.auth.getUid();return sl(null===t||"string"==typeof t),new Ol(t)},t}(),Il=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=Ol.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),xl=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new Il(this.k,this.M))},t.prototype.S=function(t){t(Ol.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),jl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();jl.U=-1;var kl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new gl(dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new gl(dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new gl(dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gl(dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?ll(this.nanoseconds,t.nanoseconds):ll(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Al=function(){function t(t){this.timestamp=t}return t.j=function(e){return new t(e)},t.min=function(){return new t(new kl(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),Nl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ol(),void 0===n?n=t.length-e:n>t.length-e&&ol(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return this.Y(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new gl(dl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(Nl),Pl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return Pl.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new gl(dl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new gl(dl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new gl(dl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new gl(dl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(Nl),Ll=function(){function t(t){this.path=t}return t.ft=function(e){return new t(Rl.ct(e))},t.dt=function(e){return new t(Rl.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Rl.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return Rl.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new Rl(e.slice()))},t}();function Fl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ul(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ml(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Hl=function(){function t(t){this.fields=t,t.sort(Dl.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return hl(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ql=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(t){if(sl(!!t),"string"==typeof t){var e=0,n=ql.exec(t);if(sl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gl(t.seconds),nanos:Gl(t.nanos)}}function Gl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zl(t){return"string"==typeof t?pl.fromBase64String(t):pl.fromUint8Array(t)}function Bl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kl(t){var e=Vl(t.mapValue.fields.__local_write_time__.timestampValue);return new kl(e.seconds,e.nanos)}function Wl(t){return null==t}function Ql(t){return 0===t&&1/t==-1/0}function $l(t){return"number"==typeof t&&Number.isInteger(t)&&!Ql(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Yl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bl(t)?4:10:ol()}function Jl(t,e){var n=Yl(t);if(n!==Yl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Vl(t.timestampValue),r=Vl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return zl(t.bytesValue).isEqual(zl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Gl(t.geoPointValue.latitude)===Gl(e.geoPointValue.latitude)&&Gl(t.geoPointValue.longitude)===Gl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Gl(t.integerValue)===Gl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Gl(t.doubleValue),r=Gl(e.doubleValue);return n===r?Ql(n)===Ql(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return hl(t.arrayValue.values||[],e.arrayValue.values||[],Jl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Fl(n)!==Fl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jl(n[i],r[i])))return!1;return!0}(t,e);default:return ol()}}function Xl(t,e){return void 0!==(t.values||[]).find((function(t){return Jl(t,e)}))}function Zl(t,e){var n=Yl(t),r=Yl(e);if(n!==r)return ll(n,r);switch(n){case 0:return 0;case 1:return ll(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Gl(t.integerValue||t.doubleValue),r=Gl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return th(t.timestampValue,e.timestampValue);case 4:return th(Kl(t),Kl(e));case 5:return ll(t.stringValue,e.stringValue);case 6:return function(t,e){var n=zl(t),r=zl(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ll(n[i],r[i]);if(0!==o)return o}return ll(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ll(Gl(t.latitude),Gl(e.latitude));return 0!==n?n:ll(Gl(t.longitude),Gl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Zl(n[i],r[i]);if(o)return o}return ll(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ll(r[s],o[s]);if(0!==a)return a;var u=Zl(n[r[s]],i[o[s]]);if(0!==u)return u}return ll(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ol()}}function th(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ll(t,e);var n=Vl(t),r=Vl(e),i=ll(n.seconds,r.seconds);return 0!==i?i:ll(n.nanos,r.nanos)}function eh(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Vl(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zl(e.bytesValue).toBase64():"referenceValue"in e?Ll.dt(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):ol();var n}(t)}function nh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function rh(t){return!!t&&"integerValue"in t}function ih(t){return!!t&&"arrayValue"in t}function oh(t){return!!t&&"nullValue"in t}function sh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}var uh=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ah(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return Jl(this.proto,t.proto)},t}(),ch=function(){function t(t){void 0===t&&(t=uh.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Yl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(Dl.at(),this.Rt);return null!=t?new uh(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=ah(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function lh(t){var e=[];return Ul(t.fields||{},(function(t,n){var r=new Dl([t]);if(ah(n)){var i=lh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Hl(e)}var hh=function(t,e){this.key=t,this.version=e},fh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Xc.c)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(hh),ph=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Xc.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(hh),dh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(hh),gh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function yh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new gh(t,e,n,r,i,o,s)}function vh(t){var e=al(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+eh(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),Wl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=kh(e.startAt)),e.endAt&&(n+="|ub:",n+=kh(e.endAt)),e.St=n}return e.St}function mh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Nh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Jl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ph(t.startAt,e.startAt)&&Ph(t.endAt,e.endAt)}function bh(t){return Ll.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var _h=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Xc.c)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new wh(t,n,r):"array-contains"===n?new Th(t,r):"in"===n?new Sh(t,r):"not-in"===n?new Ih(t,r):"array-contains-any"===n?new xh(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Eh(t,n):new Oh(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(Zl(e,this.value)):null!==e&&Yl(this.value)===Yl(e)&&this.Ct(Zl(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ol()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),wh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ll.dt(r.referenceValue),i}return Object(Xc.c)(e,t),e.prototype.matches=function(t){var e=Ll.J(t.key,this.key);return this.Ct(e)},e}(_h),Eh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ch(0,n),r}return Object(Xc.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(_h),Oh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ch(0,n),r}return Object(Xc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(_h);function Ch(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ll.dt(t.referenceValue)}))}var Th=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Xc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ih(e)&&Xl(e.arrayValue,this.value)},e}(_h),Sh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Xc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Xl(this.value.arrayValue,e)},e}(_h),Ih=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Xc.c)(e,t),e.prototype.matches=function(t){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Xl(this.value.arrayValue,e)},e}(_h),xh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Xc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ih(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Xl(e.value.arrayValue,t)}))},e}(_h),jh=function(t,e){this.position=t,this.before=e};function kh(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return eh(t)})).join(",")}var Ah=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Nh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Rh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?Ll.J(Ll.dt(s.referenceValue),n.key):Zl(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ph(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Jl(t.position[n],e.position[n]))return!1;return!0}var Dh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ot=null,this.Ft=null};function Lh(t,e,n,r,i,o,s,a){return new Dh(t,e,n,r,i,o,s,a)}function Fh(t){return new Dh(t)}function Uh(t){return!Wl(t.limit)&&"F"===t.limitType}function Mh(t){return!Wl(t.limit)&&"L"===t.limitType}function Hh(t){return t.Nt.length>0?t.Nt[0].field:null}function qh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Vh(t){return null!==t.collectionGroup}function Gh(t){var e=al(t);if(null===e.Ot){e.Ot=[];var n=qh(e),r=Hh(e);if(null!==n&&null===r)n.ht()||e.Ot.push(new Ah(n)),e.Ot.push(new Ah(Dl.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ot.push(a),a.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ot.push(new Ah(Dl.lt(),u))}}}return e.Ot}function zh(t){var e=al(t);if(!e.Ft)if("F"===e.limitType)e.Ft=yh(e.path,e.collectionGroup,Gh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Gh(e);r<i.length;r++){var o=i[r];n.push(new Ah(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new jh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new jh(e.startAt.position,!e.startAt.before):null;e.Ft=yh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.Ft}function Bh(t,e,n){return new Dh(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kh(t,e){return mh(zh(t),zh(e))&&t.limitType===e.limitType}function Wh(t){return vh(zh(t))+"|lt:"+t.limitType}function Qh(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+eh(e.value);var e})).join(", ")+"]"),Wl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+kh(t.startAt)),t.endAt&&(e+=", endAt: "+kh(t.endAt)),"Target("+e+")"}(zh(t))+"; limitType="+t.limitType+")"}function $h(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):Ll.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Rh(t.startAt,Gh(t),e)||t.endAt&&Rh(t.endAt,Gh(t),e))}(t,e)}function Yh(t){return function(e,n){for(var r=!1,i=0,o=Gh(t);i<o.length;i++){var s=o[i],a=Jh(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function Jh(t,e,n){var r=t.field.ht()?Ll.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Zl(r,i):ol()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ol()}}var Xh=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Al.min()),void 0===o&&(o=Al.min()),void 0===s&&(s=pl.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function Zh(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function tf(t){return{integerValue:""+t}}function ef(t,e){return $l(e)?tf(e):Zh(t,e)}var nf=function(){this.Ut=void 0};function rf(t,e,n){return t instanceof af?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof uf?cf(t,e):t instanceof lf?hf(t,e):function(t,e){var n=sf(t,e),r=pf(n)+pf(t.Qt);return rh(n)&&rh(t.Qt)?tf(r):Zh(t.Kt,r)}(t,e)}function of(t,e,n){return t instanceof uf?cf(t,e):t instanceof lf?hf(t,e):n}function sf(t,e){return t instanceof ff?rh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e}(nf),uf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Xc.c)(e,t),e}(nf);function cf(t,e){for(var n=df(e),r=function(t){n.some((function(e){return Jl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var lf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Xc.c)(e,t),e}(nf);function hf(t,e){for(var n=df(e),r=function(t){n=n.filter((function(e){return!Jl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ff=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(Xc.c)(e,t),e}(nf);function pf(t){return Gl(t.integerValue||t.doubleValue)}function df(t){return ih(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var gf=function(t,e){this.field=t,this.transform=e},yf=function(t,e){this.version=t,this.transformResults=e},vf=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.jt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function mf(t,e){return void 0!==t.updateTime?e instanceof fh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof fh}var bf=function(){};function _f(t,e,n){return t instanceof Tf?function(t,e,n){var r=t.value;if(n.transformResults){var i=xf(t.fieldTransforms,e,n.transformResults);r=kf(t.fieldTransforms,r,i)}return new fh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Sf?function(t,e,n){if(!mf(t.Gt,e))return new dh(t.key,n.version);var r=If(t,e,n.transformResults?xf(t.fieldTransforms,e,n.transformResults):[]);return new fh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new ph(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function wf(t,e,n,r){return t instanceof Tf?function(t,e,n,r){if(!mf(t.Gt,e))return e;var i=t.value,o=jf(t.fieldTransforms,n,e);i=kf(t.fieldTransforms,i,o);var s=Cf(e);return new fh(t.key,s,i,{bt:!0})}(t,e,r):t instanceof Sf?function(t,e,n,r){if(!mf(t.Gt,e))return e;var i=Cf(e),o=If(t,e,jf(t.fieldTransforms,n,e));return new fh(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return mf(t.Gt,e)?new ph(t.key,Al.min()):e}(t,e)}function Ef(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof fh?e.field(o.field):void 0,a=sf(o.transform,s||null);null!=a&&(n=null==n?(new ch).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e)}function Of(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&hl(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof uf&&e instanceof uf||t instanceof lf&&e instanceof lf?hl(t.elements,e.elements,Jl):t instanceof ff&&e instanceof ff?Jl(t.Qt,e.Qt):t instanceof af&&e instanceof af}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Cf(t){return t instanceof fh?t.version:Al.min()}var Tf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(Xc.c)(e,t),e}(bf),Sf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Object(Xc.c)(e,t),e}(bf);function If(t,e,n){var r;return r=function(t,e){var n=new ch(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof fh?e.data():uh.empty()),kf(t.fieldTransforms,r,n)}function xf(t,e,n){var r=[];sl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof fh&&(a=e.field(o.field)),r.push(of(s,a,n[i]))}return r}function jf(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof fh&&(c=n.field(a.field)),i.push(rf(u,c,e))}return i}function kf(t,e,n){for(var r=new ch(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.yt()}var Af,Nf,Rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(Xc.c)(e,t),e}(bf),Pf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(Xc.c)(e,t),e}(bf),Df=function(t){this.count=t};function Lf(t){switch(t){case dl.OK:return ol();case dl.CANCELLED:case dl.UNKNOWN:case dl.DEADLINE_EXCEEDED:case dl.RESOURCE_EXHAUSTED:case dl.INTERNAL:case dl.UNAVAILABLE:case dl.UNAUTHENTICATED:return!1;case dl.INVALID_ARGUMENT:case dl.NOT_FOUND:case dl.ALREADY_EXISTS:case dl.PERMISSION_DENIED:case dl.FAILED_PRECONDITION:case dl.ABORTED:case dl.OUT_OF_RANGE:case dl.UNIMPLEMENTED:case dl.DATA_LOSS:return!0;default:return ol()}}function Ff(t){if(void 0===t)return nl("GRPC error has no .code"),dl.UNKNOWN;switch(t){case Af.OK:return dl.OK;case Af.CANCELLED:return dl.CANCELLED;case Af.UNKNOWN:return dl.UNKNOWN;case Af.DEADLINE_EXCEEDED:return dl.DEADLINE_EXCEEDED;case Af.RESOURCE_EXHAUSTED:return dl.RESOURCE_EXHAUSTED;case Af.INTERNAL:return dl.INTERNAL;case Af.UNAVAILABLE:return dl.UNAVAILABLE;case Af.UNAUTHENTICATED:return dl.UNAUTHENTICATED;case Af.INVALID_ARGUMENT:return dl.INVALID_ARGUMENT;case Af.NOT_FOUND:return dl.NOT_FOUND;case Af.ALREADY_EXISTS:return dl.ALREADY_EXISTS;case Af.PERMISSION_DENIED:return dl.PERMISSION_DENIED;case Af.FAILED_PRECONDITION:return dl.FAILED_PRECONDITION;case Af.ABORTED:return dl.ABORTED;case Af.OUT_OF_RANGE:return dl.OUT_OF_RANGE;case Af.UNIMPLEMENTED:return dl.UNIMPLEMENTED;case Af.DATA_LOSS:return dl.DATA_LOSS;default:return ol()}}(Nf=Af||(Af={}))[Nf.OK=0]="OK",Nf[Nf.CANCELLED=1]="CANCELLED",Nf[Nf.UNKNOWN=2]="UNKNOWN",Nf[Nf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nf[Nf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nf[Nf.NOT_FOUND=5]="NOT_FOUND",Nf[Nf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nf[Nf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nf[Nf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nf[Nf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nf[Nf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nf[Nf.ABORTED=10]="ABORTED",Nf[Nf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nf[Nf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nf[Nf.INTERNAL=13]="INTERNAL",Nf[Nf.UNAVAILABLE=14]="UNAVAILABLE",Nf[Nf.DATA_LOSS=15]="DATA_LOSS";var Uf=function(){function t(t,e){this.J=t,this.root=e||Hf.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,Hf.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,Hf.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new Mf(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new Mf(this.root,t,this.J,!1)},t.prototype.se=function(){return new Mf(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new Mf(this.root,t,this.J,!0)},t}(),Mf=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),Hf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw ol();if(this.right._e())throw ol();var t=this.left.me();if(t!==this.right.me())throw ol();return t+(this._e()?0:1)},t}();Hf.EMPTY=null,Hf.RED=!0,Hf.Jt=!1,Hf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ol()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new Hf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var qf=function(){function t(t){this.J=t,this.data=new Uf(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new Vf(this.data.ee())},t.prototype.ne=function(t){return new Vf(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),Vf=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Gf=new Uf(Ll.J);function zf(){return Gf}function Bf(){return zf()}var Kf=new Uf(Ll.J);function Wf(){return Kf}var Qf=new Uf(Ll.J);function $f(){return Qf}var Yf=new qf(Ll.J);function Jf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Yf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Xf=new qf(ll);function Zf(){return Xf}var tp=function(){function t(t){this.J=t?function(e,n){return t(e,n)||Ll.J(e.key,n.key)}:function(t,e){return Ll.J(t.key,e.key)},this.Ve=Wf(),this.pe=new Uf(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),ep=function(){function t(){this.ve=new Uf(Ll.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):ol():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),np=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Oe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,tp.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&Kh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),rp=function(){function t(t,e,n,r,i){this.Mt=t,this.Fe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,ip.Be(e,n)),new t(Al.min(),r,Zf(),zf(),Jf())},t}(),ip=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(pl.h,n,Jf(),Jf(),Jf())},t}(),op=function(t,e,n,r){this.je=t,this.removedTargetIds=e,this.key=n,this.We=r},sp=function(t,e){this.targetId=t,this.Ge=e},ap=function(t,e,n,r){void 0===n&&(n=pl.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},up=function(){function t(){this.ze=0,this.He=hp(),this.Je=pl.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=Jf(),e=Jf(),n=Jf();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ol()}})),new ip(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=hp()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),cp=function(){function t(t){this.hn=t,this.ln=new Map,this._n=zf(),this.fn=lp(),this.dn=new qf(ll)}return t.prototype.wn=function(t){for(var e=0,n=t.je;e<n.length;e++){var r=n[e];t.We instanceof fh?this.En(r,t.We):t.We instanceof ph&&this.Tn(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Tn(r=o[i],t.key,t.We)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:ol()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(bh(i))if(0===n){var o=new Ll(i.path);this.Tn(e,o,new ph(o,Al.min()))}else sl(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&bh(o.target)){var s=new Ll(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new ph(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=Jf();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new rp(t,n,this.dn,this._n,r);return this._n=zf(),this.fn=lp(),this.dn=new qf(ll),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new up,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new qf(ll),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||el("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new up),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function lp(){return new Uf(Ll.J)}function hp(){return new Uf(Ll.J)}var fp={asc:"ASCENDING",desc:"DESCENDING"},pp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dp=function(t,e){this.T=t,this.qt=e};function gp(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function yp(t,e){return t.qt?e.toBase64():e.toUint8Array()}function vp(t,e){return gp(t,e.G())}function mp(t){return sl(!!t),Al.j(function(t){var e=Vl(t);return new kl(e.seconds,e.nanos)}(t))}function bp(t,e){return function(t){return new Rl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function _p(t){var e=Rl.ct(t);return sl(Gp(e)),e}function wp(t,e){return bp(t.T,e.path)}function Ep(t,e){var n=_p(e);if(n.get(1)!==t.T.projectId)throw new gl(dl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new gl(dl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new Ll(Sp(n))}function Op(t,e){return bp(t.T,e)}function Cp(t){var e=_p(t);return 4===e.length?Rl.at():Sp(e)}function Tp(t){return new Rl(["projects",t.T.projectId,"databases",t.T.database]).ot()}function Sp(t){return sl(t.length>4&&"documents"===t.get(4)),t.X(5)}function Ip(t,e,n){return{name:wp(t,e),fields:n.proto.mapValue.fields}}function xp(t,e,n){var r=Ep(t,e.name),i=mp(e.updateTime),o=new uh({mapValue:{fields:e.fields}});return new fh(r,i,o,{hasCommittedMutations:!!n})}function jp(t,e){var n;if(e instanceof Tf)n={update:Ip(t,e.key,e.value)};else if(e instanceof Rf)n={delete:wp(t,e.key)};else if(e instanceof Sf)n={update:Ip(t,e.key,e.data),updateMask:Vp(e.zt)};else{if(!(e instanceof Pf))return ol();n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof af)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof uf)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof lf)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof ff)return{fieldPath:e.field.ot(),increment:n.Qt};throw ol()}(0,t)}))),e.Gt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:vp(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ol()}(t,e.Gt)),n}function kp(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?vf.updateTime(mp(t.updateTime)):void 0!==t.exists?vf.exists(t.exists):vf.jt()}(e.currentDocument):vf.jt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(sl("REQUEST_TIME"===e.setToServerValue),n=new af):"appendMissingElements"in e?n=new uf(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new lf(e.removeAllFromArray.values||[]):"increment"in e?n=new ff(t,e.increment):ol();var r=Dl._t(e.fieldPath);return new gf(r,n)}(t,e)})):[];if(e.update){var i=Ep(t,e.update.name),o=new uh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Hl((t.fieldPaths||[]).map((function(t){return Dl._t(t)})))}(e.updateMask);return new Sf(i,o,s,n,r)}return new Tf(i,o,n,r)}if(e.delete){var a=Ep(t,e.delete);return new Rf(a,n)}if(e.verify){var u=Ep(t,e.verify);return new Pf(u,n)}return ol()}function Ap(t,e){return{documents:[Op(t,e.path)]}}function Np(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Op(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Op(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(sh(t.value))return{unaryFilter:{field:Up(t.field),op:"IS_NAN"}};if(oh(t.value))return{unaryFilter:{field:Up(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sh(t.value))return{unaryFilter:{field:Up(t.field),op:"IS_NOT_NAN"}};if(oh(t.value))return{unaryFilter:{field:Up(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Up(t.field),op:Fp(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Up(t.field),direction:Lp(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||Wl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Pp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Pp(e.endAt)),n}function Rp(t){var e=Cp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){sl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[qp(e)]:void 0!==e.fieldFilter?[Hp(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):ol():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Ah(Mp(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Wl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Dp(n.startAt));var l=null;return n.endAt&&(l=Dp(n.endAt)),Lh(e,i,a,s,u,"F",c,l)}function Pp(t){return{before:t.before,values:t.position}}function Dp(t){return new jh(t.values||[],!!t.before)}function Lp(t){return fp[t]}function Fp(t){return pp[t]}function Up(t){return{fieldPath:t.ot()}}function Mp(t){return Dl._t(t.fieldPath)}function Hp(t){return _h.create(Mp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ol()}}(t.fieldFilter.op),t.fieldFilter.value)}function qp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Mp(t.unaryFilter.field);return _h.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Mp(t.unaryFilter.field);return _h.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Mp(t.unaryFilter.field);return _h.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Mp(t.unaryFilter.field);return _h.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ol()}}function Vp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function Gp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var zp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Bp=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.On=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.On&&ol(),this.On=!0,this.Nn?this.error?this.Fn(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.Fn(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.Fn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),Kp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new zp,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new $p(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=td(e.target.error);n.qn.reject(new $p(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new $p(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(el("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Jp(e)},t}(),Wp=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Object(Xo.n)())&&nl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return el("SimpleDb","Removing database:",t),Xp(window.indexedDB.deleteDatabase(t)).Mn()},t.jn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(Xo.n)(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n=this;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(el("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new $p(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new gl(dl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new $p(t,n))},i.onupgradeneeded=function(t){el("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Qn.Yn(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){el("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Xc.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(Xc.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Xc.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Jn(t)];case 2:return a.db=h.sent(),e=Kp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Bp.reject(t)})).Mn(),u={},s.catch((function(){})),[4,e.Un];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return el("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qp=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return Xp(this.ts.delete())},t}(),$p=function(t){function e(e,n){var r=this;return(r=t.call(this,dl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Xc.c)(e,t),e}(gl);function Yp(t){return"IndexedDbTransactionError"===t.name}var Jp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(el("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(el("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xp(n)},t.prototype.add=function(t){return el("SimpleDb","ADD",this.store.name,t,t),Xp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),el("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return el("SimpleDb","DELETE",this.store.name,t),Xp(this.store.delete(t))},t.prototype.count=function(){return el("SimpleDb","COUNT",this.store.name),Xp(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){el("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new Bp((function(n,r){e.onerror=function(t){var e=td(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new Bp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Qp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Bp){var a=s.catch((function(t){return o.done(),Bp.reject(t)}));n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return Bp.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xp(t){return new Bp((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=td(t.target.error);n(e)}}))}var Zp=!1;function td(t){var e=Wp.Kn(Object(Xo.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new gl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Zp||(Zp=!0,setTimeout((function(){throw r}),0)),r}}return t}var ed=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new zp,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new gl(dl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function nd(t,e){if(nl("AsyncQueue",e+": "+t),Yp(t))return new gl(dl.UNAVAILABLE,e+": "+t);throw t}var rd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",id=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach((function(t){return t()}))},t}();function od(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ad(e)),e=sd(t.get(n),e);return ad(e)}function sd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ad(t){return t+"\x01\x01"}function ud(t){var e=t.length;if(sl(e>=2),2===e)return sl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Rl.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ol(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ol()}o=s+2}return new Rl(r)}var cd=function(t,e){this.seconds=t,this.nanoseconds=e},ld=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ld.store="owner",ld.key="owner";var hd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hd.store="mutationQueues",hd.keyPath="userId";var fd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};fd.store="mutations",fd.keyPath="batchId",fd.userMutationsIndex="userMutationsIndex",fd.userMutationsKeyPath=["userId","batchId"];var pd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,od(e)]},t.key=function(t,e,n){return[t,od(e),n]},t}();pd.store="documentMutations",pd.PLACEHOLDER=new pd;var dd=function(t,e){this.path=t,this.readTime=e},gd=function(t,e){this.path=t,this.version=e},yd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};yd.store="remoteDocuments",yd.readTimeIndex="readTimeIndex",yd.readTimeIndexPath="readTime",yd.collectionReadTimeIndex="collectionReadTimeIndex",yd.collectionReadTimeIndexPath=["parentPath","readTime"];var vd=function(t){this.byteSize=t};vd.store="remoteDocumentGlobal",vd.key="remoteDocumentGlobalKey";var md=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};md.store="targets",md.keyPath="targetId",md.queryTargetsIndexName="queryTargetsIndex",md.queryTargetsKeyPath=["canonicalId","targetId"];var bd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};bd.store="targetDocuments",bd.keyPath=["targetId","path"],bd.documentTargetsIndex="documentTargetsIndex",bd.documentTargetsKeyPath=["path","targetId"];var _d=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};_d.key="targetGlobalKey",_d.store="targetGlobal";var wd=function(t,e){this.collectionId=t,this.parent=e};wd.store="collectionParents",wd.keyPath=["collectionId","parent"];var Ed=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ed.store="clientMetadata",Ed.keyPath="clientId";var Od=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Od.store="bundles",Od.keyPath="bundleId";var Cd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Cd.store="namedQueries",Cd.keyPath="name";var Td=Object(Xc.g)(Object(Xc.g)(Object(Xc.g)(Object(Xc.g)([hd.store,fd.store,pd.store,yd.store,md.store,ld.store,_d.store,bd.store],[Ed.store]),[vd.store]),[wd.store]),[Od.store,Cd.store]),Sd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return Object(Xc.c)(e,t),e}(id);function Id(t,e){var n=al(t);return Wp.Hn(n.bs,e)}var xd=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=_f(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=wf(s,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=wf(s,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Jf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&hl(this.mutations,t.mutations,(function(t,e){return Of(t,e)}))&&hl(this.baseMutations,t.baseMutations,(function(t,e){return Of(t,e)}))},t}(),jd=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.Cs=n,this.Fs=r}return t.from=function(e,n,r){sl(e.mutations.length===r.length);for(var i=$f(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),kd=function(t){this.ks=t};function Ad(t,e){if(e.document)return xp(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ll.Tt(e.noDocument.path),r=Ld(e.noDocument.readTime);return new ph(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Ll.Tt(e.unknownDocument.path);return r=Ld(e.unknownDocument.version),new dh(i,r)}return ol()}function Nd(t,e,n){var r=Rd(n),i=e.key.path.Z().rt();if(e instanceof fh){var o=function(t,e){return{name:wp(t,e.key),fields:e.vt().mapValue.fields,updateTime:gp(t,e.version.G())}}(t.ks,e),s=e.hasCommittedMutations;return new yd(null,null,o,s,r,i)}if(e instanceof ph){var a=e.key.path.rt(),u=Dd(e.version);return s=e.hasCommittedMutations,new yd(null,new dd(a,u),null,s,r,i)}if(e instanceof dh){var c=e.key.path.rt(),l=Dd(e.version);return new yd(new gd(c,l),null,null,!0,r,i)}return ol()}function Rd(t){var e=t.G();return[e.seconds,e.nanoseconds]}function Pd(t){var e=new kl(t[0],t[1]);return Al.j(e)}function Dd(t){var e=t.G();return new cd(e.seconds,e.nanoseconds)}function Ld(t){var e=new kl(t.seconds,t.nanoseconds);return Al.j(e)}function Fd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return kp(t.ks,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return kp(t.ks,e)})),s=kl.fromMillis(e.localWriteTimeMs);return new xd(e.batchId,s,n,o)}function Ud(t){var e,n,r=Ld(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ld(t.lastLimboFreeSnapshotVersion):Al.min();return void 0!==t.query.documents?(sl(1===(n=t.query).documents.length),e=zh(Fh(Cp(n.documents[0])))):e=function(t){return zh(Rp(t))}(t.query),new Xh(e,t.targetId,0,t.lastListenSequenceNumber,r,i,pl.fromBase64String(t.resumeToken))}function Md(t,e){var n,r=Dd(e.Mt),i=Dd(e.lastLimboFreeSnapshotVersion);n=bh(e.target)?Ap(t.ks,e.target):Np(t.ks,e.target);var o=e.resumeToken.toBase64();return new md(e.targetId,vh(e.target),r,o,e.sequenceNumber,i,n)}function Hd(t){var e=Rp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Bh(e,e.limit,"L"):e}var qd=function(){function t(){}return t.prototype.Ms=function(t,e){return Vd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ld(e.createTime),version:e.version};var e}))},t.prototype.Ls=function(t,e){return Vd(t).put({bundleId:(n=e).id,createTime:Dd(mp(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return Gd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Hd(e.bundledQuery),readTime:Ld(e.readTime)};var e}))},t.prototype.Bs=function(t,e){return Gd(t).put(function(t){return{name:t.name,readTime:Dd(mp(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Vd(t){return Id(t,Od.store)}function Gd(t){return Id(t,Cd.store)}var zd=function(){function t(){this.qs=new Bd}return t.prototype.Us=function(t,e){return this.qs.add(e),Bp.resolve()},t.prototype.Qs=function(t,e){return Bp.resolve(this.qs.getEntries(e))},t}(),Bd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new qf(Rl.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new qf(Rl.J)).rt()},t}(),Kd=function(){function t(){this.Ks=new Bd}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs((function(){n.Ks.add(e)}));var o={collectionId:r,parent:od(i)};return Wd(t).put(o)}return Bp.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[fl(e),""],!1,!0);return Wd(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ud(o.parent))}return n}))},t}();function Wd(t){return Id(t,wd.store)}var Qd={js:!1,Ws:0,Gs:0,zs:0},$d=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();function Yd(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){if(t.code!==dl.FAILED_PRECONDITION||t.message!==rd)throw t;return el("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}$d.Zs=10,$d.ti=1e3,$d.ei=new $d(41943040,$d.Zs,$d.ti),$d.ni=new $d(-1,0,0);var Jd=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.ii(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ul(this.ri,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.nt=function(){return Ml(this.ri)},t}(),Xd=function(){function t(){this.oi=new Jd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:Al.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?Bp.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();function Zd(t,e,n){var r=t.store(fd.store),i=t.store(pd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ls({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){sl(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=pd.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Bp.$n(o).next((function(){return c}))}function tg(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ol();e=t.noDocument}return JSON.stringify(e).length}var eg=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return sl(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rg(t).ls({index:fd.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Pi=function(t,e,n,r){var i=this,o=ig(t),s=rg(t);return s.add({}).next((function(a){sl("number"==typeof a);for(var u=new xd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return jp(t.ks,e)})),i=n.mutations.map((function(e){return jp(t.ks,e)}));return new fd(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,u),l=[],h=new qf((function(t,e){return ll(t.ot(),e.ot())})),f=0,p=r;f<p.length;f++){var d=p[f],g=pd.key(i.userId,d.key.path,a);h=h.add(d.key.path.Z()),l.push(s.put(c)),l.push(o.put(g,pd.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ti.Us(t,e))})),t.Vs((function(){i.mi[a]=u.keys()})),Bp.$n(l).next((function(){return u}))}))},t.prototype.yi=function(t,e){var n=this;return rg(t).get(e).next((function(t){return t?(sl(t.userId===n.userId),Fd(n.Kt,t)):null}))},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?Bp.resolve(this.mi[e]):this.yi(t,e).next((function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null}))},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return rg(t).ls({index:fd.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(sl(e.batchId>=r),o=Fd(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rg(t).ls({index:fd.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rg(t).os(fd.userMutationsIndex,n).next((function(t){return t.map((function(t){return Fd(e.Kt,t)}))}))},t.prototype.vi=function(t,e){var n=this,r=pd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ig(t).ls({range:i},(function(r,i,s){var a=r[0],u=r[2],c=ud(r[1]);if(a===n.userId&&e.path.isEqual(c))return rg(t).get(u).next((function(t){if(!t)throw ol();sl(t.userId===n.userId),o.push(Fd(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Si=function(t,e){var n=this,r=new qf(ll),i=[];return e.forEach((function(e){var o=pd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=ig(t).ls({range:s},(function(t,i,o){var s=t[0],a=t[2],u=ud(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Bp.$n(i).next((function(){return n.Di(t,r)}))},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=pd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new qf(ll);return ig(t).ls({range:s},(function(t,e,o){var s=t[0],u=t[2],c=ud(t[1]);s===n.userId&&r.st(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Di(t,a)}))},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(rg(t).get(e).next((function(t){if(null===t)throw ol();sl(t.userId===n.userId),r.push(Fd(n.Kt,t))})))})),Bp.$n(i).next((function(){return r}))},t.prototype.xi=function(t,e){var n=this;return Zd(t.bs,this.userId,e).next((function(r){return t.Vs((function(){n.Ni(e.batchId)})),Bp.forEach(r,(function(e){return n.Ii.Oi(t,e)}))}))},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Fi=function(t){var e=this;return this.Ri(t).next((function(n){if(!n)return Bp.resolve();var r=IDBKeyRange.lowerBound(pd.prefixForUser(e.userId)),i=[];return ig(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ud(t[1]);i.push(o)}else r.done()})).next((function(){sl(0===i.length)}))}))},t.prototype.ki=function(t,e){return ng(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return og(t).get(this.userId).next((function(t){return t||new hd(e.userId,-1,"")}))},t}();function ng(t,e,n){var r=pd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ig(t).ls({range:o,hs:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function rg(t){return Id(t,fd.store)}function ig(t){return Id(t,pd.store)}function og(t){return Id(t,hd.store)}var sg=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),ag=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next((function(n){var r=new sg(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ki=function(t){return this.Ui(t).next((function(t){return Al.j(new kl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Ui(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.Ui(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)}))},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next((function(){return n.Ui(t).next((function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)}))}))},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next((function(){return ug(t).delete(e.targetId)})).next((function(){return n.Ui(t)})).next((function(e){return sl(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)}))},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return ug(t).ls((function(s,a){var u=Ud(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Yi(t,u)))})).next((function(){return Bp.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return ug(t).ls((function(t,n){var r=Ud(n);e(r)}))},t.prototype.Ui=function(t){return cg(t).get(_d.key).next((function(t){return sl(null!==t),t}))},t.prototype.Qi=function(t,e){return cg(t).put(_d.key,e)},t.prototype.zi=function(t,e){return ug(t).put(Md(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next((function(t){return t.targetCount}))},t.prototype.er=function(t,e){var n=vh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ug(t).ls({range:r,index:md.queryTargetsIndexName},(function(t,n,r){var o=Ud(n);mh(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nr=function(t,e,n){var r=this,i=[],o=lg(t);return e.forEach((function(e){var s=od(e.path);i.push(o.put(new bd(n,s))),i.push(r.Ii.sr(t,n,e))})),Bp.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=lg(t);return Bp.forEach(e,(function(e){var o=od(e.path);return Bp.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])}))},t.prototype.Xi=function(t,e){var n=lg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=lg(t),i=Jf();return r.ls({range:n,hs:!0},(function(t,e,n){var r=ud(t[1]),o=new Ll(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ki=function(t,e){var n=od(e.path),r=IDBKeyRange.bound([n],[fl(n)],!1,!0),i=0;return lg(t).ls({index:bd.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return ug(t).get(e).next((function(t){return t?Ud(t):null}))},t}();function ug(t){return Id(t,md.store)}function cg(t){return Id(t,_d.store)}function lg(t){return Id(t,bd.store)}function hg(t,e){var n=t[1],r=e[1],i=ll(t[0],e[0]);return 0===i?ll(n,r):i}var fg=function(){function t(t){this.ar=t,this.buffer=new qf(hg),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),pg=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;el("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,(function(){return Object(Xc.b)(e,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return Yp(e=n.sent())?(el("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Yd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),dg=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yr=function(t,e){var n=this;if(0===e)return Bp.resolve(jl.U);var r=new fg(e);return this.Ar.mn(t,(function(t){return r.lr(t.sequenceNumber)})).next((function(){return n.Ar.gr(t,(function(t){return r.lr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(el("LruGarbageCollector","Garbage collection skipped; disabled"),Bp.resolve(Qd)):this.br(t).next((function(r){return r<n.params.Hs?(el("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),Qd):n.vr(t,e)}))},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Rr(t,this.params.Js).next((function(e){return e>c.params.Ys?(el("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Ys+" from "+e),r=c.params.Ys):r=e,o=Date.now(),c.yr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Zi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Vr(t,n)})).next((function(t){return u=Date.now(),tl()<=Jo.a.DEBUG&&el("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Bp.resolve({js:!0,Ws:r,Gs:i,zs:t})}))},t}(),gg=function(){function t(t,e){this.db=t,this._r=function(t,e){return new dg(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Sr=function(t){var e=0;return this.gr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,(function(t,n){return e(n)}))},t.prototype.sr=function(t,e,n){return yg(t,n)},t.prototype.rr=function(t,e,n){return yg(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Oi=function(t,e){return yg(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return og(t)._s((function(r){return ng(t,r,e).next((function(t){return t&&(n=!0),Bp.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Fr().Or(),i=[],o=0;return this.Cr(t,(function(s,a){if(a<=e){var u=n.Nr(t,s).next((function(e){if(!e)return o++,r.fi(t,s).next((function(){return r._i(s),lg(t).delete([0,od(s.path)])}))}));i.push(u)}})).next((function(){return Bp.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return yg(t,e)},t.prototype.Cr=function(t,e){var n,r=lg(t),i=jl.U;return r.ls({index:bd.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==jl.U&&e(new Ll(ud(n)),i),i=s,n=o):i=jl.U})).next((function(){i!==jl.U&&e(new Ll(ud(n)),i)}))},t.prototype.br=function(t){return this.db.Fr().Mr(t)},t}();function yg(t,e){return lg(t).put(function(t,e){return new bd(0,od(t.path),e)}(e,t.vs))}var vg=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return _g(t).put(wg(e),n)},t.prototype._i=function(t,e){var n=_g(t),r=wg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Lr(t,r)}))},t.prototype.fi=function(t,e){var n=this;return _g(t).get(wg(e)).next((function(t){return n.$r(t)}))},t.prototype.Br=function(t,e){var n=this;return _g(t).get(wg(e)).next((function(t){var e=n.$r(t);return e?{li:e,size:tg(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Bf();return this.qr(t,e,(function(t,e){var i=n.$r(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Ur=function(t,e){var n=this,r=Bf(),i=new Uf(Ll.J);return this.qr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,tg(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Qr:r,Kr:i}}))},t.prototype.qr=function(t,e,n){if(e.nt())return Bp.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return _g(t).ls({range:r},(function(t,e,r){for(var s=Ll.Tt(t);o&&Ll.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=Wf(),o=e.path.length+1,s={};if(n.isEqual(Al.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.rt(),c=Rd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=yd.collectionReadTimeIndex}return _g(t).ls(s,(function(t,n,s){if(t.length===o){var a=Ad(r.Kt,n);e.path.st(a.key.path)?a instanceof fh&&$h(e,a)&&(i=i.Ht(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new mg(this,!!t&&t.Wr)},t.prototype.Mr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return bg(t).get(vd.key).next((function(t){return sl(!!t),t}))},t.prototype.Lr=function(t,e){return bg(t).put(vd.key,e)},t.prototype.$r=function(t){if(t){var e=Ad(this.Kt,t);return e instanceof ph&&e.version.isEqual(Al.min())?null:e}return null},t}(),mg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.Wr=n,r.zr=new Jd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(Xc.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new qf((function(t,e){return ll(t.ot(),e.ot())}));return this.oi.forEach((function(o,s){var a=e.zr.get(o);if(s.li){var u=Nd(e.Gr.Kt,s.li,e.ai(o));i=i.add(o.path.Z());var c=tg(u);r+=c-a,n.push(e.Gr.ui(t,o,u))}else if(r-=a,e.Wr){var l=Nd(e.Gr.Kt,new ph(o,Al.min()),e.ai(o));n.push(e.Gr.ui(t,o,l))}else n.push(e.Gr._i(t,o))})),i.forEach((function(r){n.push(e.Gr.Ti.Us(t,r))})),n.push(this.Gr.updateMetadata(t,r)),Bp.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next((function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)}))},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next((function(t){var e=t.Qr;return t.Kr.forEach((function(t,e){n.zr.set(t,e)})),e}))},e}(Xd);function bg(t){return Id(t,vd.store)}function _g(t){return Id(t,yd.store)}function wg(t){return t.path.rt()}var Eg=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;sl(n<r&&n>=0&&r<=11);var o=new Kp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ld.store)}(t),function(t){t.createObjectStore(hd.store,{keyPath:hd.keyPath}),t.createObjectStore(fd.store,{keyPath:fd.keyPath,autoIncrement:!0}).createIndex(fd.userMutationsIndex,fd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(pd.store)}(t),Og(t),function(t){t.createObjectStore(yd.store)}(t));var s=Bp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(bd.store),t.deleteObjectStore(md.store),t.deleteObjectStore(_d.store)}(t),Og(t)),s=s.next((function(){return function(t){var e=t.store(_d.store),n=new _d(0,0,Al.min().G(),0);return e.put(_d.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(fd.store).os().next((function(n){t.deleteObjectStore(fd.store),t.createObjectStore(fd.store,{keyPath:fd.keyPath,autoIncrement:!0}).createIndex(fd.userMutationsIndex,fd.userMutationsKeyPath,{unique:!0});var r=e.store(fd.store),i=n.map((function(t){return r.put(t)}));return Bp.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Ed.store,{keyPath:Ed.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Hr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(vd.store)}(t),i.Jr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Yr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Xr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(yd.store);e.createIndex(yd.readTimeIndex,yd.readTimeIndexPath,{unique:!1}),e.createIndex(yd.collectionReadTimeIndex,yd.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Zr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Od.store,{keyPath:Od.keyPath})}(t),function(t){t.createObjectStore(Cd.store,{keyPath:Cd.keyPath})}(t)}))),s},t.prototype.Jr=function(t){var e=0;return t.store(yd.store).ls((function(t,n){e+=tg(n)})).next((function(){var n=new vd(e);return t.store(vd.store).put(vd.key,n)}))},t.prototype.Hr=function(t){var e=this,n=t.store(hd.store),r=t.store(fd.store);return n.os().next((function(n){return Bp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(fd.userMutationsIndex,i).next((function(r){return Bp.forEach(r,(function(r){sl(r.userId===n.userId);var i=Fd(e.Kt,r);return Zd(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Yr=function(t){var e=t.store(bd.store),n=t.store(yd.store);return t.store(_d.store).get(_d.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new Rl(n),s=function(t){return[0,od(t)]}(o);r.push(e.get(s).next((function(n){return n?Bp.resolve():function(n){return e.put(new bd(0,od(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Bp.$n(r)}))}))},t.prototype.Xr=function(t,e){t.createObjectStore(wd.store,{keyPath:wd.keyPath});var n=e.store(wd.store),r=new Bd,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:od(i)})}};return e.store(yd.store).ls({hs:!0},(function(t,e){var n=new Rl(t);return i(n.Z())})).next((function(){return e.store(pd.store).ls({hs:!0},(function(t,e){var n=ud(t[1]);return i(n.Z())}))}))},t.prototype.Zr=function(t){var e=this,n=t.store(md.store);return n.ls((function(t,r){var i=Ud(r),o=Md(e.Kt,i);return n.put(o)}))},t}();function Og(t){t.createObjectStore(bd.store,{keyPath:bd.keyPath}).createIndex(bd.documentTargetsIndex,bd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(md.store,{keyPath:md.keyPath}).createIndex(md.queryTargetsIndexName,md.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(_d.store)}var Cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Tg=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=s,this.document=a,this.no=c,this.so=l,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.jn())throw new gl(dl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new gg(this,i),this.lo=n+"main",this.Kt=new kd(u),this._o=new Wp(this.lo,11,new Eg(this.Kt)),this.fo=new ag(this.Ii,this.Kt),this.Ti=new Kd,this.wo=function(t,e){return new vg(t,e)}(this.Kt,this.Ti),this.Eo=new qd,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===l&&nl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new gl(dl.FAILED_PRECONDITION,Cg);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.fo.ji(e)}))})).then((function(e){t.io=new jl(e,t.no)})).then((function(){t.ro=!0})).catch((function(e){return t._o&&t._o.close(),Promise.reject(e)}))},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return Object(Xc.b)(e,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){return this.Tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn((function(n){return Object(Xc.b)(e,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys((function(){return Object(Xc.b)(e,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Ig(e).put(new Ed(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.po(e).next((function(e){e||(t.isPrimary=!1,t.eo.bo((function(){return t.ho(!1)})))}))})).next((function(){return t.vo(e)})).next((function(n){return t.isPrimary&&!n?t.So(e).next((function(){return!1})):!!n&&t.Do(e).next((function(){return!0}))}))})).catch((function(e){if(Yp(e))return el("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return el("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.eo.bo((function(){return t.ho(e)})),t.isPrimary=e}))},t.prototype.po=function(t){var e=this;return Sg(t).get(ld.key).next((function(t){return Bp.resolve(e.Co(t))}))},t.prototype.xo=function(t){return Ig(t).delete(this.clientId)},t.prototype.No=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Oo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Id(t,Ed.store);return e.os().next((function(t){var n=r.Fo(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Bp.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.To)for(e=0,n=t;e<n.length;e++)this.To.removeItem(this.ko(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,(function(){return t.Io().then((function(){return t.No()})).then((function(){return t.Ro()}))}))},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?Bp.resolve(!0):Sg(t).get(ld.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new gl(dl.FAILED_PRECONDITION,Cg);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ig(t).os().next((function(t){return void 0===e.Fo(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&el("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Lo=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t=this;return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[ld.store,Ed.store],(function(e){var n=new Sd(e,jl.U);return t.So(n).next((function(){return t.xo(n)}))}))];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}}))}))},t.prototype.Fo=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Mo(t.clientId)}))},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Ig(e).os().next((function(e){return t.Fo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return eg.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.jo=function(){return this.Ti},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return el("IndexedDbPersistence","Starting transaction:",t),this._o.runTransaction(t,"readonly"===e?"readonly":"readwrite",Td,(function(o){return r=new Sd(o,i.io?i.io.next():jl.U),"readwrite-primary"===e?i.po(r).next((function(t){return!!t||i.vo(r)})).next((function(e){if(!e)throw nl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.eo.bo((function(){return i.ho(!1)})),new gl(dl.FAILED_PRECONDITION,rd);return n(r)})).next((function(t){return i.Do(r).next((function(){return t}))})):i.Go(r).next((function(){return n(r)}))})).then((function(t){return r.ps(),t}))},t.prototype.Go=function(t){var e=this;return Sg(t).get(ld.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new gl(dl.FAILED_PRECONDITION,Cg)}))},t.prototype.Do=function(t){var e=new ld(this.clientId,this.allowTabSynchronization,Date.now());return Sg(t).put(ld.key,e)},t.jn=function(){return Wp.jn()},t.prototype.So=function(t){var e=this,n=Sg(t);return n.get(ld.key).next((function(t){return e.Co(t)?(el("IndexedDbPersistence","Releasing primary lease."),n.delete(ld.key)):Bp.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(nl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()}))},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys((function(){return e.Lo()}))},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return el("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return nl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){nl("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Sg(t){return Id(t,ld.store)}function Ig(t){return Id(t,Ed.store)}function xg(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var jg=function(t,e){this.progress=t,this.zo=e},kg=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=Bf();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){var i=n.Xo(t,e,r),o=zf();return i.forEach((function(t,e){e||(e=new ph(t,Al.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return Ll.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Vh(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new Ll(e)).next((function(t){var e=Wf();return t instanceof fh&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=Wf();return this.Ti.Qs(t,i).next((function(s){return Bp.forEach(s,(function(s){var a=function(t,e){return new Dh(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.jr(t,e,n).next((function(n){return r=n,o.Ho.Ci(t,e)})).next((function(e){return o.ic(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=wf(u,r.get(c),0,o.Ss);r=l instanceof fh?r.Ht(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){$h(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=Jf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Sf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.wo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof fh&&(c=c.Ht(t,e))})),c}))},t}(),Ag=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=Jf(),i=Jf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ng=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(Al.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(Uh(e)||Mh(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(tl()<=Jo.a.DEBUG&&el("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Qh(e)),i.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new qf(Yh(t));return e.forEach((function(e,r){r instanceof fh&&$h(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return tl()<=Jo.a.DEBUG&&el("QueryEngine","Using full collection scan to execute query:",Qh(e)),this.uc.jr(t,e,Al.min())},t}(),Rg=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new Uf(ll),this.wc=new Jd((function(t){return vh(t)}),mh),this.Ec=Al.min(),this.Ho=t.Ko(n),this.Tc=t.Fr(),this.fo=t.Dr(),this.Ic=new kg(this.Tc,this.Ho,this.persistence.jo()),this.Eo=t.Wo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.pr(n,e.dc)}))},t}();function Pg(t,e,n,r){return new Rg(t,e,n,r)}function Dg(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Xc.d)(this,(function(s){switch(s.label){case 0:return n=al(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.bi(t).next((function(s){return o=s,r=n.persistence.Ko(e),i=new kg(n.Tc,r,n.persistence.jo()),r.bi(t)})).next((function(e){for(var n=[],r=[],s=Jf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,p=e;f<p.length;f++){var d=p[f];r.push(d.batchId);for(var g=0,y=d.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function Lg(t,e){var n=al(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Bp.resolve();return o.forEach((function(t){s=s.next((function(){return r.fi(e,t)})).next((function(e){var o=e,s=n.Fs.get(t);sl(null!==s),(!o||o.version.u(s)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Os)}))})),s.next((function(){return t.Ho.xi(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.Fi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function Fg(t){var e=al(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.fo.Ki(t)}))}function Ug(t,e){var n=al(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Wr:!0});i=n.dc;var s=[];e.Fe.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.fo.ir(t,e.Ke,o).next((function(){return n.fo.nr(t,e.Ue,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.$t(u,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return sl(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.W()-t.Mt.W()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,c,e)&&s.push(n.fo.Ji(t,c))}}}));var a=zf();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.Ii.kr(t,r))})),s.push(Mg(t,o,e.Me,r,void 0).next((function(t){a=t}))),!r.isEqual(Al.min())){var u=n.fo.Ki(t).next((function(e){return n.fo.Wi(t,t.vs,r)}));s.push(u)}return Bp.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,a)}))})).then((function(t){return n.dc=i,t}))}function Mg(t,e,n,r,i){var o=Jf();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=zf();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof ph&&s.version.isEqual(Al.min())?(e._i(n,u),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.ui(s,u),o=o.Ht(n,s)):el("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Hg(t,e){var n=al(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)}))}function qg(t,e){var n=al(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.fo.er(t,e).next((function(i){return i?Bp.resolve(r=i):n.fo.qi(t).next((function(i){return r=new Xh(e,i,0,t.vs),n.fo.Gi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function Vg(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:r=al(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ii.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Yp(s=a.sent()))throw s;return el("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function Gg(t,e,n){var r=al(t),i=Al.min(),o=Jf();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=al(t),i=r.wc.get(n);return void 0!==i?Bp.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,zh(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:Al.min(),n?o:Jf())})).next((function(t){return{documents:t,Pc:o}}))}))}function zg(t,e){var n=al(t),r=al(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function Bg(t){var e=al(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=al(t),i=zf(),o=Rd(n),s=_g(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:yd.readTimeIndex,range:a},(function(t,e){var n=Ad(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{zo:i,readTime:Pd(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.zo;return e.Ec=t.readTime,n}))}function Kg(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){return[2,(e=al(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=_g(t),n=Al.min();return e.ls({index:yd.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Pd(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function Wg(t,e,n,r){return Object(Xc.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,p;return Object(Xc.d)(this,(function(d){switch(d.label){case 0:for(i=al(t),o=Jf(),s=zf(),a=$f(),u=0,c=n;u<c.length;u++)h=e.yc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.Ht(h,e.gc(l)),a=a.Ht(h,e.Vc(l.metadata.readTime));return f=i.Tc.Or({Wr:!0}),[4,qg(i,function(t){return zh(Fh(Rl.ct("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Mg(t,f,s,Al.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.fo.Xi(t,p.targetId).next((function(){return i.fo.nr(t,o,p.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function Qg(t,e,n){return void 0===n&&(n=Jf()),Object(Xc.b)(this,void 0,void 0,(function(){var r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return[4,qg(t,zh(Hd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=al(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=mp(e.readTime);if(r.Mt.u(o)>=0)return i.Eo.Bs(t,e);var s=r.$t(pl.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.fo.Ji(t,s).next((function(){return i.fo.Xi(t,r.targetId)})).next((function(){return i.fo.nr(t,n,r.targetId)})).next((function(){return i.Eo.Bs(t,e)}))}))]}}))}))}var $g=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return Bp.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:mp(n.createTime)}),Bp.resolve()},t.prototype.$s=function(t,e){return Bp.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:Hd(t.bundledQuery),readTime:mp(t.readTime)}}(e)),Bp.resolve()},t}(),Yg=function(){function t(){this.Sc=new qf(Jg.Dc),this.Cc=new qf(Jg.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new Jg(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.sr(t,e)}))},t.prototype.rr=function(t,e){this.Oc(new Jg(t,e))},t.prototype.Fc=function(t,e){var n=this;t.forEach((function(t){return n.rr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new Ll(new Rl([])),r=new Jg(n,t),i=new Jg(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Oc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Oc(e)}))},t.prototype.Oc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new Ll(new Rl([])),n=new Jg(e,t),r=new Jg(e,t+1),i=Jf();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ki=function(t){var e=new Jg(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),Jg=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return Ll.J(t.key,e.key)||ll(t.$c,e.$c)},t.xc=function(t,e){return ll(t.$c,e.$c)||Ll.J(t.key,e.key)},t}(),Xg=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new qf(Jg.Dc)}return t.prototype.Ri=function(t){return Bp.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++;var o=new xd(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qc=this.qc.add(new Jg(u.key,i)),this.Ti.Us(t,u.key.path.Z())}return Bp.resolve(o)},t.prototype.yi=function(t,e){return Bp.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=this.Qc(e+1),r=n<0?0:n;return Bp.resolve(this.Ho.length>r?this.Ho[r]:null)},t.prototype.pi=function(){return Bp.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return Bp.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new Jg(e,0),i=new Jg(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),Bp.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new qf(ll);return e.forEach((function(t){var e=new Jg(t,0),i=new Jg(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),Bp.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;Ll.Et(i)||(i=i.child(""));var o=new Jg(new Ll(i),0),s=new qf(ll);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),Bp.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.xi=function(t,e){var n=this;sl(0===this.jc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return Bp.forEach(e.mutations,(function(i){var o=new Jg(i.key,e.batchId);return r=r.delete(o),n.Ii.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new Jg(e,0),r=this.qc.Pe(n);return Bp.resolve(e.isEqual(r&&r.key))},t.prototype.Fi=function(t){return Bp.resolve()},t.prototype.jc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),Zg=function(){function t(t,e){this.Ti=t,this.Wc=e,this.docs=new Uf(Ll.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.Ht(r,{li:e,size:s,readTime:n}),this.size+=s-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return Bp.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=Bf();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)})),Bp.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=Wf(),i=new Ll(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.value,u=a.li,c=a.readTime;if(!e.path.st(s.key.path))break;c.u(n)<=0||u instanceof fh&&$h(e,u)&&(r=r.Ht(u.key,u))}return Bp.resolve(r)},t.prototype.Gc=function(t,e){return Bp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new ty(this)},t.prototype.Mr=function(t){return Bp.resolve(this.size)},t}(),ty=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return Object(Xc.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach((function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)})),Bp.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(Xd),ey=function(){function t(t){this.persistence=t,this.zc=new Jd((function(t){return vh(t)}),mh),this.lastRemoteSnapshotVersion=Al.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new Yg,this.targetCount=0,this.Yc=sg.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),Bp.resolve()},t.prototype.Ki=function(t){return Bp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return Bp.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),Bp.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),Bp.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new sg(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,Bp.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),Bp.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,Bp.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Xi(t,a.targetId)),i++)})),Bp.$n(o).next((function(){return i}))},t.prototype.tr=function(t){return Bp.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return Bp.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),Bp.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Fc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),Bp.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),Bp.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return Bp.resolve(n)},t.prototype.ki=function(t,e){return Bp.resolve(this.Jc.ki(e))},t}(),ny=function(){function t(t,e){var n=this;this.Xc={},this.io=new jl(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new ey(this),this.Ti=new zd,this.wo=function(t,e){return new Zg(t,(function(t){return n.Ii.Zc(t)}))}(this.Ti),this.Kt=new kd(e),this.Eo=new $g(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.jo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new Xg(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;el("MemoryPersistence","Starting transaction:",t);var i=new ry(this.io.next());return this.Ii.ta(),n(i).next((function(t){return r.Ii.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.ps(),t}))},t.prototype.na=function(t,e){return Bp.Bn(Object.values(this.Xc).map((function(n){return function(){return n.ki(t,e)}})))},t}(),ry=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return Object(Xc.c)(e,t),e}(id),iy=function(){function t(t){this.persistence=t,this.sa=new Yg,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw ol()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),Bp.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),Bp.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),Bp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Dr();return r.cr(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Yi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Fr().Or();return Bp.forEach(this.oa,(function(r){var i=Ll.ft(r);return e.ca(t,i).next((function(t){t||n._i(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return Bp.Bn([function(){return Bp.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();function oy(t,e){return"firestore_clients_"+t+"_"+e}function sy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function ay(t,e){return"firestore_targets_"+t+"_"+e}var uy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new gl(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(nl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new gl(r.error.code,r.error.message)),i?new t(e,r.state,o):(nl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ly=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Zf(),s=0;i&&s<r.activeTargetIds.length;++s)i=$l(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(nl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),hy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(nl("SharedClientState","Failed to parse online state: "+e),null)},t}(),fy=function(){function t(){this.activeTargetIds=Zf()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),py=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new Uf(ll),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=oy(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new fy),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.jn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Xc.d)(this,(function(h){switch(h.label){case 0:return[4,this.fa.Qo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(oy(this.persistenceKey,r)))&&(o=ly.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(a=this.ba(s))&&this.va(a),u=0,c=this.Ia;u<c.length;u++)this.Ea(c[u]);return this.Ia=[],this.window.addEventListener("unload",(function(){return l.Lo()})),this.Tr=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Oa=function(t,e,n){this.Na(t,e,n),this.Fa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(ay(this.persistenceKey,t));if(n){var r=cy.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(ay(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Fa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.ja(t)},t.prototype.Wa=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return el("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){el("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){el("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(el("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void nl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo((function(){return Object(Xc.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(Xc.d)(this,(function(a){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=jl.U;if(null!=t)try{var n=JSON.parse(t);sl("number"==typeof n),e=n}catch(t){nl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==jl.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new uy(this.currentUser,t,e,n),i=sy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Fa=function(t){var e=sy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ja=function(t){this.storage.setItem(this.ga,JSON.stringify({clientId:this._a,onlineState:t}))},t.prototype.Ua=function(t,e,n){var r=ay(this.persistenceKey,t),i=new cy(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return ly.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return uy.aa(new Ol(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return cy.aa(r,e)},t.prototype.ba=function(t){return hy.aa(t)},t.prototype.Xa=function(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(el("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fa.iu(s,a).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=Zf();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),dy=function(){function t(){this.ru=new fy,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Oa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new fy,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.Wa=function(){},t}(),gy=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),yy=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){el("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){el("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.jn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),vy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},my=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),by=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(Xc.c)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new Jc;s.listenOnce(Qc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Wc.NO_ERROR:var e=s.getResponseJson();el("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Wc.TIMEOUT:el("Connection",'RPC "'+t+'" timed out'),o(new gl(dl.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:var n=s.getStatus();if(el("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(dl).indexOf(e)>=0?e:dl.UNKNOWN}(r.status);o(new gl(a,r.message))}else o(new gl(dl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new gl(dl.UNAVAILABLE,"Connection failed."));break;default:ol()}}finally{el("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Vc,i=Ba(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(o.initMessageHeaders,e),Object(Xo.u)()||Object(Xo.x)()||Object(Xo.r)()||Object(Xo.t)()||Object(Xo.y)()||Object(Xo.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");el("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new my({du:function(t){c?el("Connection","Not sending because WebChannel is closed:",t):(u||(el("Connection","Opening WebChannel transport."),a.open(),u=!0),el("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,Yc.EventType.OPEN,(function(){c||el("Connection","WebChannel transport opened.")})),h(a,Yc.EventType.CLOSE,(function(){c||(c=!0,el("Connection","WebChannel transport closed"),l.Pu())})),h(a,Yc.EventType.ERROR,(function(t){c||(c=!0,rl("Connection","WebChannel transport errored:",t),l.Pu(new gl(dl.UNAVAILABLE,"The operation could not be completed")))})),h(a,Yc.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];sl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){el("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Af[t];if(void 0!==e)return Ff(e)}(i),s=r.message;void 0===o&&(o=dl.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Pu(new gl(o,s)),a.close()}else el("Connection","WebChannel received:",n),l.yu(n)}})),h(i,$c.STAT_EVENT,(function(t){10===t.stat?el("Connection","Detected buffering proxy"):11===t.stat&&el("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Ru()}),0),l},e}(function(){function t(t){this.gu=t,this.T=t.T,this.Vu=(t.ssl?"https":"http")+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);el("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return el("RestConnection","Received: ",t),t}),(function(e){throw rl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.2",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){return this.Vu+"/v1/"+e+":"+vy[t]},t}());function _y(){return"undefined"!=typeof window?window:null}function wy(){return"undefined"!=typeof document?document:null}function Ey(t){return new dp(t,!0)}var Oy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Ou=r,this.Fu=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Fu},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&el("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Ou,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Fu&&(this.ku=this.Fu)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),Cy=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.ju=i,this.listener=o,this.state=0,this.Wu=0,this.Gu=null,this.stream=null,this.zu=new Oy(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.Wu++,3!==t?this.zu.reset():e&&e.code===dl.RESOURCE_EXHAUSTED?(nl(e.toString()),nl("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===dl.UNAUTHENTICATED&&this.ju.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.Wu),n=this.Wu;this.ju.getToken().then((function(e){t.Wu===n&&t.rh(e)}),(function(n){e((function(){var e=new gl(dl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.Wu);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return Object(Xc.b)(t,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return el("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys((function(){return e.Wu===t?n():(el("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ty=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Object(Xc.c)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ol()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(sl(void 0===e||"string"==typeof e),pl.fromBase64String(e||"")):(sl(void 0===e||e instanceof Uint8Array),pl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?dl.UNKNOWN:Ff(t.code);return new gl(e,t.message||"")}(a);n=new ap(r,i,o,s||null)}else if("documentChange"in e){i=Ep(t,(r=e.documentChange).document.name),o=mp(r.document.updateTime);var a=new uh({mapValue:{fields:r.document.fields}}),u=(s=new fh(i,o,a,{}),r.targetIds||[]);n=new op(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Ep(t,(r=e.documentDelete).document),o=r.readTime?mp(r.readTime):Al.min(),a=new ph(i,o),n=new op([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Ep(t,(r=e.documentRemove).document),n=new op([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return ol();var c=e.filter;i=new Df(r=c.count||0),n=new sp(o=c.targetId,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return Al.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Al.min():e.readTime?mp(e.readTime):Al.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=Tp(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=bh(r)?{documents:Ap(t,r)}:{query:Np(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=yp(t,e.resumeToken):e.Mt.u(Al.min())>0&&(n.readTime=gp(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ol()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=Tp(this.Kt),e.removeTarget=t,this.eh(e)},e}(Cy),Sy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Object(Xc.c)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(sl(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(sl(void 0!==e),t.map((function(t){return function(t,e){var n=mp(t.updateTime?t.updateTime:e);n.isEqual(Al.min())&&(n=mp(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new yf(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=mp(t.commitTime);return this.listener.wh(n,e)}return sl(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=Tp(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return jp(e.Kt,t)}))};this.eh(n)},e}(Cy),Iy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(Xc.c)(e,t),e.prototype.mh=function(){if(this.Ih)throw new gl(dl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===dl.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===dl.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),xy=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(nl(e),this.Ph=!1):el("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),jy=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Oh=new Set,this.Fh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return Object(Xc.b)(o,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){switch(t.label){case 0:return Uy(this)?(el("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return(e=al(t)).Oh.add(4),[4,Ay(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Oh.delete(4),[4,ky(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new xy(n,r)};function ky(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:if(!Uy(t))return[3,4];e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ay(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ny(t,e){var n=al(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),Fy(n)?Ly(n):Zy(n).Ju()&&Py(n,e))}function Ry(t,e){var n=al(t),r=Zy(n);n.Nh.delete(e),r.Ju()&&Dy(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():Uy(n)&&n.Mh.set("Unknown"))}function Py(t,e){t.Lh.cn(e.targetId),Zy(t).hh(e)}function Dy(t,e){t.Lh.cn(e),Zy(t).lh(e)}function Ly(t){t.Lh=new cp({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),Zy(t).start(),t.Mh.yh()}function Fy(t){return Uy(t)&&!Zy(t).Hu()&&t.Nh.size>0}function Uy(t){return 0===al(t).Oh.size}function My(t){t.Lh=void 0}function Hy(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){return t.Nh.forEach((function(e,n){Py(t,e)})),[2]}))}))}function qy(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(n){return My(t),Fy(t)?(t.Mh.ph(e),Ly(t)):t.Mh.set("Unknown"),[2]}))}))}function Vy(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i,o;return Object(Xc.d)(this,(function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof ap&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Xc.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Nh.has(o=i[r])?[4,t.Ch.$h(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),el("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Gy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof op?t.Lh.wn(e):e instanceof sp?t.Lh.yn(e):t.Lh.In(e),n.isEqual(Al.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Fg(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Fe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(pl.h,n.Mt)),Dy(t,e);var r=new Xh(n.target,e,1,n.sequenceNumber);Py(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return el("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Gy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Gy(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r=this;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:if(!Yp(e))throw e;return t.Oh.add(1),[4,Ay(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return Fg(t.Sh)}),t.fs.bo((function(){return Object(Xc.b)(r,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return el("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Oh.delete(1),[4,ky(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function zy(t,e){return e().catch((function(n){return Gy(t,n,e)}))}function By(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(Xc.d)(this,(function(s){switch(s.label){case 0:e=al(t),n=tv(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Uy(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Hg(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=tv(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Gy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Ky(e)&&Wy(e),[2]}}))}))}function Ky(t){return Uy(t)&&!tv(t).Hu()&&t.xh.length>0}function Wy(t){tv(t).start()}function Qy(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){return tv(t).Th(),[2]}))}))}function $y(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n,r;return Object(Xc.d)(this,(function(i){for(e=tv(t),n=0,r=t.xh;n<r.length;n++)e.dh(r[n].mutations);return[2]}))}))}function Yy(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=jd.from(r,e,n),[4,zy(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,By(t)];case 2:return o.sent(),[2]}}))}))}function Jy(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return e&&tv(t).fh?[4,function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return Lf(r=e.code)&&r!==dl.ABORTED?(n=t.xh.shift(),tv(t).Xu(),[4,zy(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,By(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ky(t)&&Wy(t),[2]}}))}))}function Xy(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return n=al(t),e?(n.Oh.delete(2),[4,ky(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Oh.add(2),[4,Ay(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Zy(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=al(t);return r.mh(),new Ty(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Hy.bind(null,t),Iu:qy.bind(null,t),uh:Vy.bind(null,t)}),t.Fh.push((function(n){return Object(Xc.b)(e,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),Fy(t)?Ly(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),My(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function tv(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=al(t);return r.mh(),new Sy(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Qy.bind(null,t),Iu:Jy.bind(null,t),Eh:$y.bind(null,t),wh:Yy.bind(null,t)}),t.Fh.push((function(n){return Object(Xc.b)(e,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,By(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(el("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var ev=function(){this.jh=void 0,this.listeners=[]},nv=function(){this.queries=new Jd((function(t){return Wh(t)}),Kh),this.onlineState="Unknown",this.Wh=new Set};function rv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(Xc.d)(this,(function(c){switch(c.label){case 0:if(n=al(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new ev),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.jh=c.sent(),[3,4];case 3:return a=c.sent(),u=nd(a,"Initialization of query '"+Qh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.jh&&e.Hh(o.jh)&&av(n),[2]}}))}))}function iv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Xc.d)(this,(function(a){return n=al(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function ov(t,e){for(var n=al(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hh(s)&&(r=!0);a.jh=s}}r&&av(n)}function sv(t,e,n){var r=al(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function av(t){t.Wh.forEach((function(t){t.next()}))}var uv=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new np(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){return!t.fromCache||!(this.options.sl&&"Offline"!==e||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){return t.docChanges.length>0||!!(t.xe||this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=np.Oe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),cv=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),lv=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return Ep(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?xp(this.Kt,t.document,!1):new ph(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return mp(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new lv(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Jf()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return[4,Wg(this.Sh,new lv(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Qg(this.Sh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new jg(Object.assign({},this.progress),t))]}}))}))}}();var hv=function(t){this.key=t},fv=function(t){this.key=t},pv=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=Jf(),this.Ce=Jf(),this.ll=Yh(t),this._l=new tp(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new ep,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,u=Uh(this.query)&&i.size===this.query.limit?i.last():null,c=Mh(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var l=i.get(t),h=e instanceof fh?e:null;h&&(h=$h(n.query,h)?h:null);var f=!!l&&n.Ce.has(l.key),p=!!h&&(h.bt||n.Ce.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.El(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.ll(h,u)>0||c&&n.ll(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Uh(this.query)||Mh(this.query))for(;s.size>this.query.limit;){var l=Uh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ol()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,u=a!==this.ul;return this.ul=a,0!==o.length||u?{snapshot:new np(this.query,t._l,i,o,t.Ce,0===a,u,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new ep,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=Jf(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new fv(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new hv(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=Jf();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return np.Oe(this.query,this._l,this.Ce,0===this.ul)},t}(),dv=function(t,e,n){this.query=t,this.targetId=e,this.view=n},gv=function(t){this.key=t,this.yl=!1},yv=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new Jd((function(t){return Wh(t)}),Kh),this.Dl=new Map,this.Cl=[],this.xl=new Uf(Ll.J),this.Nl=new Map,this.Ol=new Yg,this.Fl={},this.kl=new Map,this.Ml=sg.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function vv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:return n=Kv(t),(i=n.Sl.get(e))?(n.pl.ka(i.targetId),r=i.view.Pl(),[3,4]):[3,1];case 1:return[4,qg(n.Sh,zh(e))];case 2:return o=a.sent(),s=n.pl.ka(o.targetId),[4,mv(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.$l&&Ny(n.gl,o),a.label=4;case 4:return[2,r]}}))}))}function mv(t,e,n,r){return Object(Xc.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(Xc.d)(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object(Xc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:return(i=e.view.dl(n))._c?[4,Gg(t.Sh,e.query,!1).then((function(t){return e.view.dl(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.Fe.get(e.targetId),s=e.view.Ei(i,t.$l,o),[2,(Av(t,e.targetId,s.ml),s.snapshot)]}}))}))}(t,e,n,r)},[4,Gg(t.Sh,e,!0)];case 1:return i=l.sent(),o=new pv(e,i.Pc),s=o.dl(i.documents),a=ip.Be(n,r&&"Offline"!==t.onlineState),u=o.Ei(s,t.$l,a),Av(t,n,u.ml),c=new dv(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),u.snapshot)]}}))}))}function bv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return n=al(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!Kh(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,Vg(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Ry(n.gl,r.targetId),jv(n,r.targetId)})).catch(Yd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return jv(n,r.targetId),[4,Vg(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function _v(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:r=Wv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=al(t),i=kl.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Jf());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Ef(c,n.get(c.key));null!=l&&s.push(new Sf(c.key,l,lh(l.proto.mapValue),vf.exists(!0)))}return r.Ho.Pi(t,i,s,e)}))})).then((function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}}))}(r.Sh,e)];case 2:return i=a.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Fl[t.currentUser.R()];r||(r=new Uf(ll)),r=r.Ht(e,n),t.Fl[t.currentUser.R()]=r}(r,i.batchId,n),[4,Pv(r,i.oi)];case 3:return a.sent(),[4,By(r.gl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=nd(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function wv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:n=al(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ug(n.Sh,e)];case 2:return r=i.sent(),e.Fe.forEach((function(t,e){var r=n.Nl.get(e);r&&(sl(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?sl(r.yl):t.Ke.size>0&&(sl(r.yl),r.yl=!1))})),[4,Pv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Yd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ev(t,e,n){var r=al(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=al(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&av(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Ov(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(Xc.d)(this,(function(c){switch(c.label){case 0:return(r=al(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new Uf(Ll.J)).Ht(o,new ph(o,Al.min())),a=Jf().add(o),u=new rp(Al.min(),new Map,new qf(ll),s,a),[4,wv(r,u)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),Rv(r),[3,4];case 2:return[4,Vg(r.Sh,e,!1).then((function(){return jv(r,e,n)})).catch(Yd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Cv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:n=al(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Lg(n.Sh,e)];case 2:return i=o.sent(),xv(n,r,null),Iv(n,r),n.pl.Oa(r,"acknowledged"),[4,Pv(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Tv(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:r=al(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=al(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.yi(t,e).next((function(e){return sl(null!==e),r=e.keys(),n.Ho.xi(t,e)})).next((function(){return n.Ho.Fi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),xv(r,e,n),Iv(r,e),r.pl.Oa(e,"rejected",n),[4,Pv(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Sv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:Uy((n=al(t)).gl)||el("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=al(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.pi(t)}))}(n.Sh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=a.sent(),s=nd(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Iv(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function xv(t,e,n){var r=al(t),i=r.Fl[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fl[r.currentUser.R()]=i}}function jv(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Ol.kc(e).forEach((function(e){t.Ol.ki(e)||kv(t,e)}))}function kv(t,e){var n=t.xl.get(e);null!==n&&(Ry(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),Rv(t))}function Av(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof hv?(t.Ol.sr(o.key,e),Nv(t,o)):o instanceof fv?(el("SyncEngine","Document no longer in limbo: "+o.key),t.Ol.rr(o.key,e),t.Ol.ki(o.key)||kv(t,o.key)):ol()}}function Nv(t,e){var n=e.key;t.xl.get(n)||(el("SyncEngine","New document in limbo: "+n),t.Cl.push(n),Rv(t))}function Rv(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new gv(e)),t.xl=t.xl.Ht(e,n),Ny(t.gl,new Xh(zh(Fh(e.path)),n,2,jl.U))}}function Pv(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:return r=al(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,a){s.push(r.Bl(a,e,n).then((function(t){if(t){r.$l&&r.pl.qa(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ag.cc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vl.uh(i),[4,function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(Xc.d)(this,(function(l){switch(l.label){case 0:n=al(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Bp.forEach(e,(function(e){return Bp.forEach(e.rc,(function(r){return n.persistence.Ii.sr(t,e.targetId,r)})).next((function(){return Bp.forEach(e.oc,(function(r){return n.persistence.Ii.rr(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Yp(r=l.sent()))throw r;return el("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.dc.get(a),c=u.Bt(u.Mt),n.dc=n.dc.Ht(a,c));return[2]}}))}))}(r.Sh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Dv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return(n=al(t)).currentUser.isEqual(e)?[3,3]:(el("SyncEngine","User change. New user:",e.R()),[4,Dg(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new gl(dl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Pv(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Lv(t,e){var n=al(t),r=n.Nl.get(e);if(r&&r.yl)return Jf().add(r.key);var i=Jf(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Sl.get(a[s]);i=i.ye(u.view.fl)}return i}function Fv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return[4,Gg((n=al(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Av(n,e.targetId,i.ml),i)]}}))}))}function Uv(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){return[2,Bg((e=al(t)).Sh).then((function(t){return Pv(e,t)}))]}))}))}function Mv(t,e,n,r){return Object(Xc.b)(this,void 0,void 0,(function(){var i,o;return Object(Xc.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=al(t),r=al(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.gi(t,e).next((function(e){return e?n.Ic.Zo(t,e):Bp.resolve(null)}))}))}((i=al(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,By(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(xv(i,e,r||null),Iv(i,e),function(t,e){al(al(t).Ho).Ni(e)}(i.Sh,e)):ol(),s.label=4;case 4:return[4,Pv(i,o)];case 5:return s.sent(),[3,7];case 6:el("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Hv(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(Xc.d)(this,(function(c){switch(c.label){case 0:return Kv(n=al(t)),Wv(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,qv(n,r.rt())]);case 1:return i=c.sent(),n.Ll=!0,[4,Xy(n.gl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Ny(n.gl,s[o]);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],u=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?a.push(e):u=u.then((function(){return jv(n,e),Vg(n.Sh,e,!0)})),Ry(n.gl,e)})),[4,u]);case 4:return c.sent(),[4,qv(n,a)];case 5:return c.sent(),function(t){var e=al(t);e.Nl.forEach((function(t,n){Ry(e.gl,n)})),e.Ol.Mc(),e.Nl=new Map,e.xl=new Uf(Ll.J)}(n),n.Ll=!1,[4,Xy(n.gl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function qv(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d;return Object(Xc.d)(this,(function(g){switch(g.label){case 0:n=al(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Dl.get(a=s[o]))&&0!==c.length?[4,qg(n.Sh,zh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Sl.get(h[l]),[4,Fv(n,f)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,zg(n.Sh,a)];case 8:return d=g.sent(),[4,qg(n.Sh,d)];case 9:return u=g.sent(),[4,mv(n,Vv(d),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function Vv(t){return Lh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Gv(t){var e=al(t);return al(al(e.Sh).persistence).Qo()}function zv(t,e,n,r){return Object(Xc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:return(i=al(t)).Ll?(el("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Bg(i.Sh)];case 3:return o=a.sent(),s=rp.$e(e,"current"===n),[4,Pv(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Vg(i.Sh,e,!0)];case 6:return a.sent(),jv(i,e,r),[3,8];case 7:ol(),a.label=8;case 8:return[2]}}))}))}function Bv(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(Xc.d)(this,(function(f){switch(f.label){case 0:if(!(r=Kv(t)).Ll)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Dl.has(s=o[i])?(el("SyncEngine","Adding an already active target "+s),[3,5]):[4,zg(r.Sh,s)]:[3,6];case 2:return a=f.sent(),[4,qg(r.Sh,a)];case 3:return u=f.sent(),[4,mv(r,Vv(a),u.targetId,!1)];case 4:f.sent(),Ny(r.gl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,Vg(r.Sh,t,!1).then((function(){Ry(r.gl,t),jv(r,t)})).catch(Yd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Kv(t){var e=al(t);return e.gl.Ch.Bh=wv.bind(null,e),e.gl.Ch.Sn=Lv.bind(null,e),e.gl.Ch.$h=Ov.bind(null,e),e.vl.uh=ov.bind(null,e.Vl),e.vl.ql=sv.bind(null,e.Vl),e}function Wv(t){var e=al(t);return e.gl.Ch.qh=Cv.bind(null,e),e.gl.Ch.Uh=Tv.bind(null,e),e}var Qv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return this.Kt=Ey(t.gu.T),this.pl=this.Wl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Pg(this.persistence,new Ng,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new ny(iy.ra,this.Kt)},t.prototype.Wl=function(t){return new dy},t.prototype.terminate=function(){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}}))}))},t}(),$v=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Xc.c)(e,t),e.prototype.initialize=function(e){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Kg(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Wv(this.Xl.fa)];case 4:return n.sent(),[4,By(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Pg(this.persistence,new Ng,t.Yl,this.Kt)},e.prototype.Hl=function(t){return new pg(this.persistence.Ii._r,t.fs)},e.prototype.Gl=function(t){var e=xg(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?$d.Xs(this.cacheSizeBytes):$d.ei;return new Tg(this.synchronizeTabs,e,t.clientId,n,t.fs,_y(),wy(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new dy},e}(Qv),Yv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Xc.c)(e,t),e.prototype.initialize=function(e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r=this;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof py?(this.pl.fa={nu:Mv.bind(null,n),su:zv.bind(null,n),iu:Bv.bind(null,n),Qo:Gv.bind(null,n),eu:Uv.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po((function(t){return Object(Xc.b)(r,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return[4,Hv(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=_y();if(!py.jn(e))throw new gl(dl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=xg(t.gu.T,t.gu.persistenceKey);return new py(e,t.fs,n,t.clientId,t.Yl)},e}($v),Jv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n=this;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return Ev(n.fa,t,1)},this.gl.Ch.s_=Dv.bind(null,this.fa),[4,Xy(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new nv},t.prototype.Zl=function(t){var e=Ey(t.gu.T),n=new by(t.gu);return function(t,e,n){return new Iy(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return Ev(s.fa,t,0)},o=yy.jn()?new yy:new gy,new jy(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new yv(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return e=al(t),el("RemoteStore","RemoteStore shutting down."),e.Oh.add(5),[4,Ay(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),Xv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Zv=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new zp,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new cv(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new gl(dl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new Dl(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),tm=function(t){this._methodName=t};function em(t,e,n){if(!n)throw new gl(dl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function nm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gl(dl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function rm(t,e,n,r){if(!0===e&&!0===r)throw new gl(dl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function im(t){if(!Ll.Et(t))throw new gl(dl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function om(t){if(Ll.Et(t))throw new gl(dl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function sm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ol()}function am(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new gl(dl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=sm(t);throw new gl(dl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function um(t,e){if(e<=0)throw new gl(dl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var cm=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new gl(dl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gl(dl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,rm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),lm=new Map,hm=function(){function t(t,e){this.w_="(lite)",this.E_=new cm({}),this.T_=!1,t instanceof El?(this.I_=t,this.m_=new Tl):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new gl(dl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(t.options.projectId)}(t),this.m_=new Sl(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new gl(dl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new gl(dl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new cm(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Tl;switch(t.type){case"gapi":var e=t.client;return sl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xl(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new gl(dl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=lm.get(this))&&(el("ComponentProvider","Removing Datastore"),lm.delete(this),t.terminate()),Promise.resolve();var t},t}(),fm=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new dm(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),pm=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),dm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Fh(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Xc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new fm(this.firestore,null,new Ll(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(pm);function gm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof vl&&(t=t._),em("collection","path",e),t instanceof hm)return om(n=Rl.ct.apply(Rl,Object(Xc.g)([e],r))),new dm(t,null,n);if(!(t instanceof fm||t instanceof dm))throw new gl(dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return om(n=Rl.ct.apply(Rl,Object(Xc.g)([t.path],r)).child(Rl.ct(e))),new dm(t.firestore,null,n)}function ym(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof vl&&(t=t._),1===arguments.length&&(e=cl.t()),em("doc","path",e),t instanceof hm)return im(n=Rl.ct.apply(Rl,Object(Xc.g)([e],r))),new fm(t,null,new Ll(n));if(!(t instanceof fm||t instanceof dm))throw new gl(dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return im(n=t.D_.child(Rl.ct.apply(Rl,Object(Xc.g)([e],r)))),new fm(t.firestore,t instanceof dm?t.v_:null,new Ll(n))}function vm(t,e){return t instanceof vl&&(t=t._),e instanceof vl&&(e=e._),(t instanceof fm||t instanceof dm)&&(e instanceof fm||e instanceof dm)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function mm(t,e){return t instanceof vl&&(t=t._),e instanceof vl&&(e=e._),t instanceof pm&&e instanceof pm&&t.firestore===e.firestore&&Kh(t.C_,e.C_)&&t.v_===e.v_}var bm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new gl(dl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new gl(dl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return ll(this.x_,t.x_)||ll(this.N_,t.N_)},t}(),_m=/^__.*__$/,wm=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return null!==this.zt?new Sf(t,this.data,this.zt,e,this.fieldTransforms):new Tf(t,this.data,e,this.fieldTransforms)},t}(),Em=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return new Sf(t,this.data,this.zt,e,this.fieldTransforms)},t}();function Om(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ol()}}var Cm=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.F_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.F_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return zm(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.W_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.F_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Om(this.k_)&&_m.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Tm=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Ey(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Cm({k_:t,methodName:e,W_:n,path:Dl.at(),B_:!1,j_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Sm(t){var e=t.p_(),n=Ey(t.I_);return new Tm(t.I_,!!e.ignoreUndefinedProperties,n)}function Im(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Hm("Data must be an object, but it was:",s,r);var a,u,c=Um(r,s);if(o.merge)a=new Hl(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=qm(e,f[h],n);if(!s.contains(p))throw new gl(dl.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Bm(l,p)||l.push(p)}a=new Hl(l),u=s.fieldTransforms.filter((function(t){return a.It(t.field)}))}else a=null,u=s.fieldTransforms;return new wm(new uh(c),a,u)}var xm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(tm);function jm(t,e,n){return new Cm({k_:3,W_:e.settings.W_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var km=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.z_=function(t){return new gf(t.path,new af)},e.prototype.isEqual=function(t){return t instanceof e},e}(tm),Am=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Xc.c)(e,t),e.prototype.z_=function(t){var e=jm(this,t,!0),n=this.H_.map((function(t){return Fm(t,e)})),r=new uf(n);return new gf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(tm),Nm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Xc.c)(e,t),e.prototype.z_=function(t){var e=jm(this,t,!0),n=this.H_.map((function(t){return Fm(t,e)})),r=new lf(n);return new gf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(tm),Rm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Xc.c)(e,t),e.prototype.z_=function(t){var e=new ff(t.Kt,ef(t.Kt,this.J_));return new gf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(tm);function Pm(t,e,n,r){var i=t.G_(1,e,n);Hm("Data must be an object, but it was:",i,r);var o=[],s=new ch;Ul(r,(function(t,r){var a=Gm(e,t,n);r instanceof vl&&(r=r._);var u=i.U_(a);if(r instanceof xm)o.push(a);else{var c=Fm(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Hl(o);return new Em(s.yt(),a,i.fieldTransforms)}function Dm(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[qm(e,r,n)],u=[i];if(o.length%2!=0)throw new gl(dl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(qm(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ch,f=a.length-1;f>=0;--f)if(!Bm(l,a[f])){var p=a[f],d=u[f];d instanceof vl&&(d=d._);var g=s.U_(p);if(d instanceof xm)l.push(p);else{var y=Fm(d,g);null!=y&&(l.push(p),h.set(p,y))}}var v=new Hl(l);return new Em(h.yt(),v,s.fieldTransforms)}function Lm(t,e,n,r){return void 0===r&&(r=!1),Fm(n,t.G_(r?4:3,e))}function Fm(t,e){if(t instanceof vl&&(t=t._),Mm(t))return Hm("Unsupported field value:",e,t),Um(t,e);if(t instanceof tm)return function(t,e){if(!Om(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Fm(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof vl&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ef(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=kl.fromDate(t);return{timestampValue:gp(e.Kt,n)}}if(t instanceof kl)return n=new kl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:gp(e.Kt,n)};if(t instanceof bm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yl)return{bytesValue:yp(e.Kt,t.l)};if(t instanceof fm){var r=t.firestore.I_;if(!r.isEqual(n=e.T))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:bp(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+sm(t))}(t,e)}function Um(t,e){var n={};return Ml(t)?e.path&&e.path.length>0&&e.zt.push(e.path):Ul(t,(function(t,r){var i=Fm(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Mm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kl||t instanceof bm||t instanceof yl||t instanceof fm||t instanceof tm)}function Hm(t,e,n){if(!Mm(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=sm(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function qm(t,e,n){if(e instanceof vl&&(e=e._),e instanceof Zv)return e.d_;if("string"==typeof e)return Gm(t,e);throw zm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Vm=new RegExp("[~\\*/\\[\\]]");function Gm(t,e,n){if(e.search(Vm)>=0)throw zm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Zv.bind.apply(Zv,Object(Xc.g)([void 0],e.split("."))))).d_}catch(r){throw zm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function zm(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new gl(dl.INVALID_ARGUMENT,(a+=". ")+t+u)}function Bm(t,e){return t.some((function(t){return t.isEqual(e)}))}var Km=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n=this;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new gl(dl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(Xc.d)(this,(function(u){switch(u.label){case 0:return n=al(t),r=Tp(n.Kt)+"/documents",i={documents:e.map((function(t){return wp(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){sl(!!e.found);var n=Ep(t,e.found.name),r=mp(e.found.updateTime),i=new uh({mapValue:{fields:e.found.fields}});return new fh(n,r,i,{})}(t,e):"missing"in e?function(t,e){sl(!!e.missing),sl(!!e.readTime);var n=Ep(t,e.missing),r=mp(e.readTime);return new ph(n,r)}(t,e):ol()}(n.Kt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());sl(!!e),a.push(e)})),a)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof ph||t instanceof fh?n.sf(t):ol()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.O_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.O_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Rf(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e=this;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ll.ft(n);e.mutations.push(new Pf(r,e.Gt(r)))})),[4,function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return n=al(t),r=Tp(n.Kt)+"/documents",i={writes:e.map((function(t){return jp(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof fh)e=t.version;else{if(!(t instanceof ph))throw ol();e=Al.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new gl(dl.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?vf.updateTime(e):vf.jt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Al.min()))throw new gl(dl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vf.updateTime(e)}return vf.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Wm=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Oy(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return Object(Xc.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(Xc.d)(this,(function(r){return t=new Km(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Wl(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Lf(e)}return!1},t}(),Qm=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=Ol.UNAUTHENTICATED,this.clientId=cl.t(),this._f=function(){},this.N=new zp,this.credentials.S((function(t){el("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new gl(dl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new zp;return this.fs.Tf((function(){return Object(Xc.b)(t,void 0,void 0,(function(){var t,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=nd(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function $m(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return t.fs.Af(),el("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.bo((function(){return Object(Xc.b)(i,void 0,void 0,(function(){return Object(Xc.d)(this,(function(t){switch(t.label){case 0:return[4,Dg(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.yo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Ym(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,Jm(t)];case 1:return n=i.sent(),el("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.bo((function(){return function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return(n=al(t)).fs.Af(),el("RemoteStore","RemoteStore received new credentials"),r=Uy(n),n.Oh.add(3),[4,Ay(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Oh.delete(3),[4,ky(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function Jm(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(el("FirestoreClient","Using default OfflineComponentProvider"),[4,$m(t,new Qv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Xm(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(el("FirestoreClient","Using default OnlineComponentProvider"),[4,Ym(t,new Jv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Zm(t){return Jm(t).then((function(t){return t.persistence}))}function tb(t){return Jm(t).then((function(t){return t.Sh}))}function eb(t){return Xm(t).then((function(t){return t.gl}))}function nb(t){return Xm(t).then((function(t){return t.fa}))}function rb(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return[4,Xm(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=vv.bind(null,e.fa),n.Jh=bv.bind(null,e.fa),n)]}}))}))}function ib(t,e,n){var r=this;void 0===n&&(n={});var i=new zp;return t.fs.ys((function(){return Object(Xc.b)(r,void 0,void 0,(function(){var r;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xv({next:function(o){e.ys((function(){return iv(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new gl(dl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new gl(dl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new uv(Fh(n.path),o,{includeMetadataChanges:!0,sl:!0});return rv(t,s)},[4,rb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function ob(t,e,n){var r=this;void 0===n&&(n={});var i=new zp;return t.fs.ys((function(){return Object(Xc.b)(r,void 0,void 0,(function(){var r;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xv({next:function(n){e.ys((function(){return iv(t,s)})),n.fromCache&&"server"===r.source?i.reject(new gl(dl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new uv(n,o,{includeMetadataChanges:!0,sl:!0});return rv(t,s)},[4,rb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var sb=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Oy(this,"async_queue_retry"),this.vf=function(){var e=wy();e&&el("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=wy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=wy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e=this;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Yp(t=n.sent()))throw t;return el("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,nl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=ed.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ol()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t;return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Of=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),ab=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new sb,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Xc.c)(e,t),e.prototype.b_=function(){return this.Lf||cb(this),this.Lf.terminate()},e}(hm);function ub(t){return t.Lf||cb(t),t.Lf.df(),t.Lf}function cb(t){var e=t.p_(),n=function(t,e,n){return new wl(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new Qm(t.m_,t.Mf,n)}function lb(t,e,n){var r=this,i=new zp;return t.fs.enqueue((function(){return Object(Xc.b)(r,void 0,void 0,(function(){var r;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,$m(t,n)];case 1:return o.sent(),[4,Ym(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===dl.FAILED_PRECONDITION||t.code===dl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function hb(t){if(t.R_||t.P_)throw new gl(dl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var fb=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Yl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gl(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(zl(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.jf(t.arrayValue,e);case 10:return this.Wf(t.mapValue,e);default:throw ol()}},t.prototype.Wf=function(t,e){var n=this,r={};return Ul(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new bm(Gl(t.latitude),Gl(t.longitude))},t.prototype.jf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Bl(n)?t(n):n}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Kl(t));default:return null}},t.prototype.Bf=function(t){var e=Vl(t);return new kl(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=Rl.ct(t);sl(Gp(n));var r=new El(n.get(1),n.get(3)),i=new Ll(n.X(5));return r.isEqual(e)||nl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),pb=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new fm(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new db(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(gb("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),db=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(pb);function gb(t,e){return"string"==typeof e?Gm(t,e):e instanceof vl?e._.d_:e.d_}function yb(t){if(Mh(t)&&0===t.Nt.length)throw new gl(dl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vb=function(){};function mb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var bb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(Xc.c)(e,t),e.prototype.Yf=function(t){var e=Sm(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new gl(dl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Sb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Tb(r,t,l[c]));a={arrayValue:{values:u}}}else a=Tb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Sb(s,o),a=Lm(n,"where",s,"in"===o||"not-in"===o);var h=_h.create(i,o,a);return function(t,e){if(e.xt()){var n=qh(t);if(null!==n&&!n.isEqual(e.field))throw new gl(dl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Hh(t);null!==r&&Ib(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new gl(dl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new pm(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Dh(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(vb),_b=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(Xc.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new gl(dl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new gl(dl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ah(e,n);return function(t,e){if(null===Hh(t)){var n=qh(t);null!==n&&Ib(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new pm(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Dh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(vb),wb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(Xc.c)(e,t),e.prototype.Yf=function(t){return new pm(t.firestore,t.v_,Bh(t.C_,this.nd,this.sd))},e}(vb),Eb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(Xc.c)(e,t),e.prototype.Yf=function(t){var e=Cb(t,this.type,this.rd,this.od);return new pm(t.firestore,t.v_,function(t,e){return new Dh(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(vb),Ob=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(Xc.c)(e,t),e.prototype.Yf=function(t){var e=Cb(t,this.type,this.rd,this.od);return new pm(t.firestore,t.v_,function(t,e){return new Dh(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(vb);function Cb(t,e,n,r){if(n[0]instanceof vl&&(n[0]=n[0]._),n[0]instanceof pb)return function(t,e,n,r,i){if(!r)throw new gl(dl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Gh(t);s<a.length;s++){var u=a[s];if(u.field.ht())o.push(nh(e,r.key));else{var c=r.field(u.field);if(Bl(c))throw new gl(dl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.ot();throw new gl(dl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new jh(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Sm(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new gl(dl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new gl(dl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Vh(t)&&-1!==c.indexOf("/"))throw new gl(dl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Rl.ct(c));if(!Ll.Et(l))throw new gl(dl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ll(l);a.push(nh(e,h))}else{var f=Lm(n,r,c);a.push(f)}}return new jh(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Tb(t,e,n){if(n instanceof vl&&(n=n._),"string"==typeof n){if(""===n)throw new gl(dl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vh(e)&&-1!==n.indexOf("/"))throw new gl(dl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Rl.ct(n));if(!Ll.Et(r))throw new gl(dl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return nh(t,new Ll(r))}if(n instanceof fm)return nh(t,n.S_);throw new gl(dl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+sm(n)+".")}function Sb(t,e){if(!Array.isArray(t)||0===t.length)throw new gl(dl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new gl(dl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ib(t,e,n){if(!n.isEqual(e))throw new gl(dl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function xb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function jb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var kb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Xc.c)(e,t),e.prototype.Uf=function(t){return new yl(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new fm(this.firestore,null,e)},e}(fb),Ab=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Nb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return Object(Xc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Rb(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(gb("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(pb),Rb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Nb),Pb=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Ab(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Rb(n.zf,n.Hf,r.key,r,new Ab(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new gl(dl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){return{type:"added",doc:new Rb(t.zf,t.Hf,e.doc.key,e.doc,new Ab(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Rb(t.zf,t.Hf,e.doc.key,e.doc,new Ab(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Db(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Db(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ol()}}function Lb(t,e){return t instanceof Nb&&e instanceof Nb?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Pb&&e instanceof Pb&&t.zf===e.zf&&mm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var Fb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Xc.c)(e,t),e.prototype.Uf=function(t){return new yl(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new fm(this.firestore,null,e)},e}(fb);function Ub(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=am(t,fm);var o=am(t.firestore,ab),s=Sm(o);return e instanceof vl&&(e=e._),Hb(o,[("string"==typeof e||e instanceof Zv?Dm(s,"updateDoc",t.S_,e,n,r):Pm(s,"updateDoc",t.S_,e)).O_(t.S_,vf.exists(!0))])}function Mb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof vl&&(t=t._);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||xb(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(xb(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof fm)c=am(t.firestore,ab),l=Fh(t.S_.path),u={next:function(e){i[a]&&i[a](qb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=am(t,pm);c=am(p.firestore,ab),l=p.C_;var d=new Fb(c);u={next:function(t){i[a]&&i[a](new Pb(c,d,p,t))},error:i[a+1],complete:i[a+2]},yb(t.C_)}return function(t,e,n,r){var i=this,o=new Xv(r),s=new uv(e,o,n);return t.fs.ys((function(){return Object(Xc.b)(i,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return e=rv,[4,rb(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return Object(Xc.b)(i,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return e=iv,[4,rb(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(ub(c),l,h,u)}function Hb(t,e){return function(t,e){var n=this,r=new zp;return t.fs.ys((function(){return Object(Xc.b)(n,void 0,void 0,(function(){var n;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return n=_v,[4,nb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(ub(t),e)}function qb(t,e,n){var r=n.docs.get(e.S_),i=new Fb(t);return new Nb(t,i,e.S_,r,new Ab(n.hasPendingWrites,n.fromCache),e.v_)}var Vb=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Sm(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=Gb(t,this.zf),i=jb(r.v_,e,n),o=Im(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.O_(r.S_,vf.jt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=Gb(t,this.zf);return e instanceof vl&&(e=e._),o="string"==typeof e||e instanceof Zv?Dm(this.wd,"WriteBatch.update",s.S_,e,n,r):Pm(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.O_(s.S_,vf.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=Gb(t,this.zf);return this.fd=this.fd.concat(new Rf(e.S_,vf.jt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new gl(dl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Gb(t,e){if(t instanceof vl&&(t=t._),t.firestore!==e)throw new gl(dl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var zb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(Xc.c)(e,t),e.prototype.get=function(e){var n=this,r=Gb(e,this.zf),i=new Fb(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Nb(n.zf,i,r.S_,t.Jf,new Ab(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Sm(t)}return t.prototype.get=function(t){var e=this,n=Gb(t,this.zf),r=new kb(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return ol();var i=t[0];if(i instanceof ph)return new pb(e.zf,r,n.S_,null,n.v_);if(i instanceof fh)return new pb(e.zf,r,i.key,i,n.v_);throw ol()}))},t.prototype.set=function(t,e,n){var r=Gb(t,this.zf),i=jb(r.v_,e,n),o=Im(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Gb(t,this.zf);return e instanceof vl&&(e=e._),o="string"==typeof e||e instanceof Zv?Dm(this.wd,"Transaction.update",s.S_,e,n,r):Pm(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=Gb(t,this.zf);return this.Td.delete(e.S_),this},t}()),Bb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){hb(t=am(t,ab));var n=ub(t),r=t.p_(),i=new Jv;return lb(n,i,new $v(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){hb(t=am(t,ab));var e=ub(t),n=t.p_(),r=new Jv;return lb(e,r,new Yv(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new gl(dl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new zp;return t.Mf.Tf((function(){return Object(Xc.b)(e,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Xc.b)(this,void 0,void 0,(function(){return Object(Xc.d)(this,(function(e){switch(e.label){case 0:return Wp.jn()?[4,Wp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(xg(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),Kb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof El||(i.md=e),i}return Object(Xc.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=am(t,hm)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&rl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(Xc.b)(e,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return[4,Zm(t)];case 1:return e=r.sent(),[4,eb(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=al(t);return e.Oh.delete(0),ky(e)}(n))]}}))}))}))}(ub(am(this._,ab)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(Xc.b)(e,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return[4,Zm(t)];case 1:return e=r.sent(),[4,eb(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return(e=al(t)).Oh.add(0),[4,Ay(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(ub(am(this._,ab)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&rm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new zp;return t.fs.ys((function(){return Object(Xc.b)(e,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return e=Sv,[4,nb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(ub(am(this._,ab)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Xv(e);return t.fs.ys((function(){return Object(Xc.b)(n,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){al(t).Wh.add(e),e.next()},[4,rb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return Object(Xc.b)(n,void 0,void 0,(function(){var e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){al(t).Wh.delete(e)},[4,rb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(ub(t=am(t,ab)),xb(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new gl(dl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new o_(this,gm(this._,t))}catch(t){throw Jb(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Yb(this,ym(this._,t))}catch(t){throw Jb(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new n_(this,function(t,e){if(t=am(t,hm),em("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gl(dl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new pm(t,null,function(t){return new Dh(Rl.at(),t)}(e))}(this._,t))}catch(t){throw Jb(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new zp;return t.fs.ys((function(){return Object(Xc.b)(n,void 0,void 0,(function(){var n;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Xm(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new Wm(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(ub(t),(function(n){return e(new zb(t,n))}))}(this._,(function(n){return t(new Qb(e,n))}))},e.prototype.batch=function(){var t=this;return ub(this._),new $b(new Vb(this._,(function(e){return Hb(t._,e)})))},e.prototype.loadBundle=function(t){throw new gl(dl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new gl(dl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(vl),Wb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Xc.c)(e,t),e.prototype.Uf=function(t){return new _l(new yl(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return Yb.Ad(e,this.firestore,null)},e}(fb),Qb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new Wb(e),r}return Object(Xc.c)(e,t),e.prototype.get=function(t){var e=this,n=s_(t);return this._.get(n).then((function(t){return new t_(e.zf,new Nb(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=s_(t);return n?(nm("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=s_(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(Xc.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=s_(t);return this._.delete(e),this},e}(vl),$b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.set=function(t,e,n){var r=s_(t);return n?(nm("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=s_(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(Xc.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=s_(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(vl),Yb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Wb(e),r}return Object(Xc.c)(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new gl(dl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new fm(n._,r,new Ll(t)))},e.Ad=function(t,n,r){return new e(n,new fm(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new o_(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new o_(this.firestore,gm(this._,t))}catch(t){throw Jb(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof vl&&(t=t._),t instanceof fm&&vm(this._,t)},e.prototype.set=function(t,e){e=nm("DocumentReference.set",e);try{return function(t,e,n){t=am(t,fm);var r=am(t.firestore,ab),i=jb(t.v_,e,n);return Hb(r,[Im(Sm(r),"setDoc",t.S_,i,null!==t.v_,n).O_(t.S_,vf.jt())])}(this._,t,e)}catch(t){throw Jb(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ub(this._,t):Ub.apply(void 0,Object(Xc.g)([this._,t,e],n))}catch(t){throw Jb(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Hb(am((t=this._).firestore,ab),[new Rf(t.S_,vf.jt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xb(e),i=Zb(e,(function(e){return new t_(t.firestore,new Nb(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return Mb(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=am(t,fm);var e=am(t.firestore,ab),n=ub(e),r=new Fb(e);return function(t,e){var n=this,r=new zp;return t.fs.ys((function(){return Object(Xc.b)(n,void 0,void 0,(function(){var n;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=al(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof fh?n.resolve(i):i instanceof ph?n.resolve(null):n.reject(new gl(dl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=nd(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,tb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Nb(e,r,t.S_,n,new Ab(n instanceof fh&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=am(t,fm);var e=am(t.firestore,ab);return ib(ub(e),t.S_,{source:"server"}).then((function(n){return qb(e,t,n)}))}(this._):function(t){t=am(t,fm);var e=am(t.firestore,ab);return ib(ub(e),t.S_).then((function(n){return qb(e,t,n)}))}(this._)).then((function(t){return new t_(e.firestore,new Nb(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(vl);function Jb(t,e,n){return t.message=t.message.replace(e,n),t}function Xb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!xb(r))return r}return{}}function Zb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=xb(t[0])?t[0]:xb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var t_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Xc.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Yb(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Lb(this._,t._)},e}(vl),e_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(t_),n_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Wb(e),r}return Object(Xc.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,mb(this._,function(t,e,n){var r=e,i=gb("where",t);return new bb(i,r,n)}(t,n,r)))}catch(t){throw Jb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,mb(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=gb("orderBy",t);return new _b(r,n)}(t,n)))}catch(t){throw Jb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,mb(this._,function(t){return um("limit",t),new wb("limit",t,"F")}(t)))}catch(t){throw Jb(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,mb(this._,function(t){return um("limitToLast",t),new wb("limitToLast",t,"L")}(t)))}catch(t){throw Jb(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mb(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eb("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Jb(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mb(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eb("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Jb(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mb(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ob("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Jb(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mb(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ob("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Jb(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return mm(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=am(t,pm);var e=am(t.firestore,ab),n=ub(e),r=new Fb(e);return function(t,e){var n=this,r=new zp;return t.fs.ys((function(){return Object(Xc.b)(n,void 0,void 0,(function(){var n;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Xc.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(Xc.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Gg(t,e,!0)];case 1:return a=u.sent(),r=new pv(e,a.Pc),i=r.dl(a.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=nd(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,tb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Pb(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=am(t,pm);var e=am(t.firestore,ab),n=ub(e),r=new Fb(e);return ob(n,t.C_,{source:"server"}).then((function(n){return new Pb(e,r,t,n)}))}(this._):function(t){t=am(t,pm);var e=am(t.firestore,ab),n=ub(e),r=new Fb(e);return yb(t.C_),ob(n,t.C_).then((function(n){return new Pb(e,r,t,n)}))}(this._)).then((function(t){return new i_(e.firestore,new Pb(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xb(e),i=Zb(e,(function(e){return new i_(t.firestore,new Pb(t.firestore._,t.Hf,t._,e.ud))}));return Mb(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(vl),r_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Xc.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new e_(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(vl),i_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Xc.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new n_(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new e_(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new r_(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new e_(n.zf,r))}))},e.prototype.isEqual=function(t){return Lb(this._,t._)},e}(vl),o_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(Xc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new Yb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Yb(this.firestore,void 0===t?ym(this._):ym(this._,t))}catch(t){throw Jb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=am(t.firestore,ab),r=ym(t),i=jb(t.v_,e);return Hb(n,[Im(Sm(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).O_(r.S_,vf.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new Yb(e.firestore,t)}))},e.prototype.isEqual=function(t){return vm(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(n_);function s_(t){return t instanceof vl&&(t=t._),am(t,fm)}var a_=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Zv.bind.apply(Zv,Object(Xc.g)([void 0],e))))||this}return Object(Xc.c)(e,t),e.documentId=function(){return new e(Dl.lt().ot())},e.prototype.isEqual=function(t){return t instanceof vl&&(t=t._),t instanceof Zv&&this._.d_.isEqual(t.d_)},e}(vl),u_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xc.c)(e,t),e.serverTimestamp=function(){var t=new km("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new xm("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Am("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nm("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Rm("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(vl);!function(){function t(){this.Pd={},this.yd=new zp,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.jl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)}}();var c_,l_=n("/6Yf"),h_={Firestore:Kb,GeoPoint:bm,Timestamp:kl,Blob:_l,Transaction:Qb,WriteBatch:$b,DocumentReference:Yb,DocumentSnapshot:t_,Query:n_,QueryDocumentSnapshot:e_,QuerySnapshot:i_,CollectionReference:o_,FieldPath:a_,FieldValue:u_,setLogLevel:function(t){Zc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function f_(t,e){return function(t,e=wo.a){return new Et.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function p_(t,e){return f_(t,e).pipe(Object(Pt.a)(t=>({payload:t,type:"query"})))}function d_(t,e){return p_(t,e).pipe(ge(void 0),Wo(),Object(Pt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function g_(t,e,n){return d_(t,n).pipe(ye((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return y_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return y_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return y_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Oo(),Object(Pt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function y_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function v_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new l_.a("firestore",(function(t){return function(t,e){return new Kb(t,new ab(t,e),new Bb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},h_)))})(c_=Yo.a),c_.registerVersion("@firebase/firestore","2.1.2");class m_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=d_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Pt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ge(void 0),Wo(),Ut(([t,e])=>e.length>0||!t),Object(Pt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ye((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=v_(t);return g_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return p_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Pt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(io.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new b_(this.ref.doc(t),this.afs)}}class b_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=T_(n,e);return new m_(r,i,this.afs)}snapshotChanges(){return f_(this.ref,this.afs.schedulers.outsideAngular).pipe(ge(void 0),Wo(),Object(Pt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Pt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(mt.a)(this.ref.get(t)).pipe(Object(io.b)(this.afs.schedulers.insideAngular))}}class __{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?d_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Pt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ut(t=>t.length>0),this.afs.keepUnstableUntilFirst):d_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ye((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=v_(t);return g_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return p_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Pt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(io.b)(this.afs.schedulers.insideAngular))}}const w_=new r.q("angularfire2.enableFirestorePersistence"),E_=new r.q("angularfire2.firestore.persistenceSettings"),O_=new r.q("angularfire2.firestore.settings"),C_=new r.q("angularfire2.firestore.use-emulator");function T_(t,e=(t=>t)){return{query:e(t),ref:t}}let S_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new no.d(o),this.keepUnstableUntilFirst=Object(no.h)(this.schedulers);const c=Object(no.g)(t,o,e);!ko.a.auth&&u&&Object(no.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(no.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!U(i)){const e=()=>{try{return Object(mt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(c_){return"undefined"!=typeof console&&console.warn(c_),Object(vt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(vt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=T_(n,e),o=this.schedulers.ngZone.run(()=>r);return new m_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new __(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new b_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(no.c),r.Kb(no.b,8),r.Kb(w_,8),r.Kb(O_,8),r.Kb(r.B),r.Kb(r.z),r.Kb(E_,8),r.Kb(C_,8),r.Kb(fo,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Kb)(no.c),Object(r.Kb)(no.b,8),Object(r.Kb)(w_,8),Object(r.Kb)(O_,8),Object(r.Kb)(r.B),Object(r.Kb)(r.z),Object(r.Kb)(E_,8),Object(r.Kb)(C_,8),Object(r.Kb)(fo,8))},token:t,providedIn:"any"}),t})(),I_=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:w_,useValue:!0},{provide:E_,useValue:e}]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[S_]}),t})();class x_{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new j_(t,this.dueTime,this.scheduler))}}class j_ extends Ft.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(k_,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function k_(t){t.debouncedNext()}var A_=function(t){function e(n,r){var i=t.call(this,N_(n),"Firebase Storage: "+r+" ("+N_(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Xc.c)(e,t),e.prototype.codeEquals=function(t){return N_(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Xo.c);function N_(t){return"storage/"+t}function R_(){return new A_("unknown","An unknown error occurred, please check the error payload for server response.")}function P_(){return new A_("canceled","User canceled the upload/download.")}function D_(){return new A_("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function L_(t){return new A_("invalid-argument",t)}function F_(){return new A_("app-deleted","The Firebase app was deleted.")}function U_(t){return new A_("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function M_(t,e){return new A_("invalid-format","String does not match format '"+t+"': "+e)}function H_(t){throw new A_("internal-error","Internal error: "+t)}var q_={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},V_=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function G_(t,e){switch(t){case q_.RAW:return new V_(z_(e));case q_.BASE64:case q_.BASE64URL:return new V_(B_(t,e));case q_.DATA_URL:return new V_((n=new K_(e)).base64?B_(q_.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(c_){throw M_(q_.DATA_URL,"Malformed data URL.")}return z_(e)}(n.rest),function(t){return new K_(t).contentType}(e))}var n;throw R_()}function z_(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function B_(t,e){switch(t){case q_.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw M_(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case q_.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw M_(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c_){throw M_(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var K_=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw M_(q_.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),W_={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Q_(t){switch(t){case"running":case"pausing":case"canceling":return W_.RUNNING;case"paused":return W_.PAUSED;case"success":return W_.SUCCESS;case"canceled":return W_.CANCELED;case"error":default:return W_.ERROR}}var $_=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Y_=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=$_.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=$_.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=$_.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw H_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw H_("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw H_("cannot .getStatus() before sending");try{return this.xhr_.status}catch(c_){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw H_("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),J_=function(){function t(){}return t.prototype.createXhrIo=function(){return new Y_},t}();function X_(t){return"string"==typeof t||t instanceof String}function Z_(t){return tw()&&t instanceof Blob}function tw(){return"undefined"!=typeof Blob}function ew(t,e,n,r){if(r<e)throw new A_("invalid-argument","Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new A_("invalid-argument","Invalid value for '"+t+"'. Expected "+n+" or less.")}function nw(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function rw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=nw();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(tw())return new Blob(t);throw new A_("unsupported-environment","This browser doesn't seem to support creating Blobs")}var iw=function(){function t(t,e){var n=0,r="";Z_(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Z_(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(tw()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(rw.apply(null,r))}var i=e.map((function(t){return X_(t)?G_(q_.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),ow=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(c_){return new t(e,"")}if(""===n.path)return n;throw new A_("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(e);if(c){var l=c[u.indices.path];l||(l=""),n=new t(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(t){return new A_("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function sw(t){var e,n;try{e=JSON.parse(t)}catch(c_){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function aw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function uw(t){return"https://firebasestorage.googleapis.com/v0"+t}function cw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function lw(t,e){return e}var hw=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||lw}}(),fw=null;function pw(){if(fw)return fw;var t=[];t.push(new hw("bucket")),t.push(new hw("generation")),t.push(new hw("metageneration")),t.push(new hw("name","fullPath",!0));var e=new hw("name");e.xform=function(t,e){return function(t){return!X_(t)||t.length<2?t:aw(t)}(e)},t.push(e);var n=new hw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new hw("timeCreated")),t.push(new hw("updated")),t.push(new hw("md5Hash",null,!0)),t.push(new hw("cacheControl",null,!0)),t.push(new hw("contentDisposition",null,!0)),t.push(new hw("contentEncoding",null,!0)),t.push(new hw("contentLanguage",null,!0)),t.push(new hw("contentType",null,!0)),t.push(new hw("metadata","customMetadata",!0)),fw=t}function dw(t,e,n){var r=sw(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new ow(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function gw(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var yw=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function vw(t){if(!t)throw R_()}function mw(t,e){return function(n,r){var i=dw(t,r,e);return vw(null!==i),i}}function bw(t){return function(e,n){var r;return(r=401===e.getStatus()?new A_("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new A_("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new A_("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function _w(t){var e=bw(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new A_("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function ww(t,e,n){var r=uw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new yw(r,"GET",mw(t,n),i);return o.errorHandler=_w(e),o}function Ew(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Ow=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Cw(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(c_){vw(!1)}return vw(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Tw=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),Sw=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Iw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var xw=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=pw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Ew(e,r,i),a={name:s.fullPath},u=uw(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=gw(s,n),h=new yw(u,"POST",(function(t){var e;Cw(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(c_){vw(!1)}return vw(X_(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=bw(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new yw(n,"POST",(function(t){var e=Cw(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(c_){vw(!1)}n||vw(!1);var i=Number(n);return vw(!isNaN(i)),new Ow(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=bw(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new Ow(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Ow(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new A_("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,h+l);if(null===p)throw D_();var d=new yw(n,"POST",(function(t,n){var i,s=Cw(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?mw(e,o)(t,n):null,new Ow(a,c,"final"===s,i)}),e.maxUploadRetryTime);return d.headers=f,d.body=p.uploadData(),d.progressCallback=a||null,d.errorHandler=bw(t),d}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(c_){return t._error=c_,void t._transition("error")}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=ww(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Ew(e,r,i),c=gw(u,n),l=iw.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw D_();var h={name:u.fullPath},f=uw(o),p=t.maxUploadRetryTime,d=new yw(f,"POST",mw(t,n),p);return d.urlParams=h,d.headers=s,d.body=l.uploadData(),d.errorHandler=bw(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=P_(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Q_(this._state);return new Sw(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Tw(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Q_(this._state)){case W_.SUCCESS:Iw(this._resolve.bind(null,this.snapshot))();break;case W_.CANCELED:case W_.ERROR:Iw(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Q_(this._state)){case W_.RUNNING:case W_.PAUSED:t.next&&Iw(t.next.bind(t,this.snapshot))();break;case W_.SUCCESS:t.complete&&Iw(t.complete.bind(t))();break;case W_.CANCELED:case W_.ERROR:t.error&&Iw(t.error.bind(t,this._error))();break;default:t.error&&Iw(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),jw=function(){function t(t,e){this._service=t,this._location=e instanceof ow?e:ow.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new ow(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return aw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new ow(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw U_(t)},t}();function kw(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Xc.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&ew("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=uw(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new yw(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=sw(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new ow(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new ow(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return vw(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=bw(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function Aw(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ow(t._location.bucket,n);return new jw(t.storage,r)}var Nw=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Rw=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new Nw(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Nw(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Nw(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Nw(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Pw=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Dw(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Dw(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Dw=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Aw(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Rw(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new xw(t,new iw(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=q_.RAW),this._throwIfRoot("putString"),new Rw(function(t,e,n,r){void 0===n&&(n=q_.RAW),t._throwIfRoot("putString");var i=G_(n,e),o=Object(Xc.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new xw(t,new iw(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t,e,n=this;return(t=this._delegate,e={prefixes:[],items:[]},function t(e,n,r){return Object(Xc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(Xc.d)(this,(function(a){switch(a.label){case 0:return[4,kw(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))).then((function(t){return new Pw(t,n.storage)}))},t.prototype.list=function(t){var e=this;return kw(this._delegate,t).then((function(t){return new Pw(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=ww(t.storage,t._location,pw()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(Xc.b)(this,void 0,void 0,(function(){var n,r;return Object(Xc.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=uw(e.fullServerUrl()),o=gw(n,r),s=t.maxOperationRetryTime,a=new yw(i,"PATCH",mw(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=_w(e),a}(t.storage,t._location,e,pw()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=uw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new yw(r,"GET",function(t,e){return function(n,r){var i=dw(t,r,e);return vw(null!==i),function(t,e){var n=sw(e);if(null===n)return null;if(!X_(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return uw("/b/"+i(t.bucket)+"/o/"+i(n))+cw({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=_w(e),o}(t.storage,t._location,pw()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new A_("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Xc.b)(this,void 0,void 0,(function(){var e,n;return Object(Xc.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=uw(e.fullServerUrl()),r=new yw(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=_w(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw U_(t)},t}(),Lw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Fw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(c_){o(c_)}else null!==s?((r=R_()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?F_():P_():new A_("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Uw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Uw(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===$_.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Uw(s,n))}else{var a=n.getErrorCode()===$_.ABORT;e(!1,new Uw(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Xc.g)([null,t],e));else{var r,o=u()||s;o?l.call.apply(l,Object(Xc.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Uw=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Mw(t){return/^[A-Za-z]+:\/\//.test(t)}function Hw(t,e){if(e&&Mw(e)){if(t instanceof Gw)return new jw(t,e);throw L_("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof Gw){var r=e;if(null==r._bucket)throw new A_("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new jw(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw L_('`path` param cannot contain ".."');return Aw(e,n)}return e}(t,e)}var qw,Vw,Gw=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ow.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:ow.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){ew("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){ew("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(Xc.b)(this,void 0,void 0,(function(){var t,e;return Object(Xc.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new jw(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new Lw(F_());var r=function(t,e,n,r){var i=cw(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Yo.a?Yo.a.SDK_VERSION:"AppManager")}(s),new Fw(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),zw=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Mw(t))throw L_("ref() expected a child path but got a URL, use refFromURL instead.");return new Dw(Hw(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Mw(t))throw L_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ow.makeFromUrl(t)}catch(c_){throw L_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Dw(Hw(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Bw(t){const e=function(t){return new Et.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=wo.a){return n=>n.lift(new x_(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(Pt.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function Kw(t,e,n){return{getDownloadURL:()=>Object(vt.a)(void 0).pipe(Object(io.b)(e.outsideAngular),he(()=>t.getDownloadURL()),n),getMetadata:()=>Object(vt.a)(void 0).pipe(Object(io.b)(e.outsideAngular),he(()=>t.getMetadata()),n),delete:()=>Object(mt.a)(t.delete()),child:r=>Kw(t.child(r),e,n),updateMetadata:e=>Object(mt.a)(t.updateMetadata(e)),put:(e,n)=>Bw(t.put(e,n)),putString:(e,n,r)=>Bw(t.putString(e,n,r)),listAll:()=>Object(mt.a)(t.listAll())}}Vw={TaskState:W_,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:q_,Storage:Gw,Reference:Dw},(qw=Yo.a).INTERNAL.registerComponent(new l_.a("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new zw(n,new Gw(n,r,new J_,e))}),"PUBLIC").setServiceProps(Vw).setMultipleInstances(!0)),qw.registerVersion("@firebase/storage","0.4.2");const Ww=new r.q("angularfire2.storageBucket"),Qw=new r.q("angularfire2.storage.maxUploadRetryTime"),$w=new r.q("angularfire2.storage.maxOperationRetryTime");let Yw=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new no.d(i),this.keepUnstableUntilFirst=Object(no.h)(this.schedulers);const a=Object(no.g)(t,i,e);this.storage=Object(no.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return Kw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return Kw(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Kw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(no.c),r.Kb(no.b,8),r.Kb(Ww,8),r.Kb(r.B),r.Kb(r.z),r.Kb(Qw,8),r.Kb($w,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Kb)(no.c),Object(r.Kb)(no.b,8),Object(r.Kb)(Ww,8),Object(r.Kb)(r.B),Object(r.Kb)(r.z),Object(r.Kb)(Qw,8),Object(r.Kb)($w,8))},token:t,providedIn:"any"}),t})(),Jw=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)}}),t})(),Xw=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Yw],imports:[Jw]}),t})(),Zw=(()=>{class t{}return t.\u0275mod=r.Cb({type:t,bootstrap:[eo]}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[],imports:[[yt,Ji,qi,no.a.initializeApp(i),_o,Ko,I_,Xw]]}),t})();Object(r.S)(),dt().bootstrapModule(Zw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);